(this.webpackJsonpcaisse=this.webpackJsonpcaisse||[]).push([[0],{249:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},480:function(e,t,n){},488:function(e){e.exports=JSON.parse("{}")},489:function(e,t,n){},514:function(e,t){},526:function(e,t){},529:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=529},532:function(e,t){},534:function(e,t){},568:function(e,t){},570:function(e,t){},598:function(e,t){},600:function(e,t){},601:function(e,t){},606:function(e,t){},608:function(e,t){},614:function(e,t){},616:function(e,t){},635:function(e,t){},647:function(e,t){},650:function(e,t){},684:function(e,t,n){"use strict";n.r(t);var c,r=n(1),i=n.n(r),a=n(40),o=(n(442),n(5)),s=n(18),l=(n(443),n(11)),d=n(10),u=n(80),j=n.n(u),b=(n(204),n(744)),h=n(13),O=n(4),m=n(27),p=n(36),x=n(65),v=Object(x.c)({name:"message",initialState:{},reducers:{setMessage:function(e,t){return{message:t.payload}},clearMessage:function(){return{message:""}}}}),f=v.reducer,g=v.actions,A=g.setMessage,y=(g.clearMessage,f),C=n(17),_=n.n(C),N={login:function(e,t){return _.a.post("http://192.168.1.166:5000/api/login",{username:e,password:t}).then((function(e){return e.data.token&&(console.log(e.data),localStorage.setItem("user",JSON.stringify(e.data.token)),localStorage.setItem("username",e.data.username),localStorage.setItem("tva",e.data.tva),localStorage.setItem("address",e.data.address),localStorage.setItem("telephone",e.data.telephone)),e.data}))},logout:function(){localStorage.removeItem("user")}},k=JSON.parse(localStorage.getItem("user")),w=Object(x.b)("auth/register",function(){var e=Object(p.a)(Object(m.a)().mark((function e(t,n){var c,r,i,a,o,s;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.first_name,r=t.last_name,i=t.email,a=t.password,e.prev=1,e.next=4,N.register(c,r,i,a);case 4:return o=e.sent,console.log(o),n.dispatch(A(o.data.message)),e.abrupt("return",o.data);case 10:return e.prev=10,e.t0=e.catch(1),s=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(A(s)),e.abrupt("return",n.rejectWithValue());case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(x.b)("auth/login",function(){var e=Object(p.a)(Object(m.a)().mark((function e(t,n){var c,r,i,a;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.username,r=t.password,e.prev=1,e.next=4,N.login(c,r);case 4:return i=e.sent,console.log(i),e.abrupt("return",{user:i});case 9:return e.prev=9,e.t0=e.catch(1),a=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(A(a)),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(x.b)("auth/logout",Object(p.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.logout();case 2:case"end":return e.stop()}}),e)})))),T=k?{isLoggedIn:!0,user:k}:{isLoggedIn:!1,user:null},P=Object(x.c)({name:"auth",initialState:T,reducers:{restore:function(e,t){e.isLoggedIn=!0,e.user=t.payload.user}},extraReducers:(c={},Object(O.a)(c,w.fulfilled,(function(e,t){e.isLoggedIn=!1})),Object(O.a)(c,w.rejected,(function(e,t){e.isLoggedIn=!1})),Object(O.a)(c,S.fulfilled,(function(e,t){e.isLoggedIn=!0,e.user=t.payload.user})),Object(O.a)(c,S.rejected,(function(e,t){e.isLoggedIn=!1,e.user=null})),Object(O.a)(c,I.fulfilled,(function(e,t){e.isLoggedIn=!1,e.user=null})),c)}),E=P.reducer,B=(P.actions.restore,E),D=n(411),L=n(194),F=n(777),R={success:"success",verifyUserAndPassword:"verify username and password",username:"username",password:"password",access:"access",auth:"authentication",cashier:"cashier",connect:"connect",connecter:"Login ",reset:"reset",freeTable:"free table",busytables:"busy table",newTable:"new table",nbrCouverts:"number of person",validate:"validate",backToTable:"back to tables",couverts:"person",artice:"article",price:"price",surplace:"Direct ",tiroir:"cash register",cancel:"cancel",added:"added",disconnect:"disconnect",closureHistory:"closure history",selectDate:"select a date",print:"print",latestClosure:"latest closure",TotalInit:"initial cashier total",close:"close",ofCashier:"of cash register",confirm:"Confirm",cashierr:"Cash Register"},H={success:"success",verifyUserAndPassword:"verifier utilisateur et mot de passe",username:"utilisateur",password:"mot de passe",access:"acceder",auth:"authentification",cashier:"caisse",connect:"Connexion",connecter:"Se connecter",reset:"reset",freeTable:"table libre",busytables:"table en cours",newTable:"Nouvelle Table",nbrCouverts:"nombre de couverts",validate:"valider",backToTable:"retour Au Tables",couverts:"couverts",artice:"Nom",price:"prix",surplace:"sur place ",tiroir:"Tiroir",cancel:"Annuler",aded:"ajouter",disconnect:"d\xe9connexion",closureHistory:"historique de cl\xf4tures",selectDate:"s\xe9l\xe9ctionner une date",print:"imprimer",latestClosure:"Derniere Cl\xf4ture",TotalInit:"total de caisse initial",close:"cl\xf4turer",ofCashier:"de caisse",cashierr:"Caisse",confirm:"OK"};D.a.use(L.e).init({resources:{en:{translation:R},fr:{translation:H}},lng:"fr",fallbackLng:"en",interpolation:{escapeValue:!1}});var q=F.a,z=n(28),Q=n.n(z),W=n(0),M=function(e){var t=e.user,n=e.setShowLogin,c=e.setClickable,i=q().t,a=Object(r.useState)(""),u=Object(o.a)(a,2),O=u[0],m=u[1],p=Object(r.useState)("default"),x=Object(o.a)(p,2),v=x[0],f=(x[1],Object(r.useRef)()),g=Object(r.useState)([]),A=Object(o.a)(g,2),y=A[0],C=A[1],_=localStorage.getItem("caisse_open"),N=Object(s.f)(),k=Object(h.c)();return Object(r.useEffect)((function(){!function(){var e=["0","1","2","3","4","5","6","7","8","9"," "," "],t="",n=[],c=0,r=0;do{do{var i=Math.floor(Math.random()*e.length),a=e[i];" "!=a?t=t+a+" ":t+=a,c+=1,e.splice(i,1),console.log("inner")}while(3!=c);n.push(t),t="",c=0,r+=1,console.log("outter")}while(4!=r);console.log(n),C([].concat(n))}()}),[]),Object(W.jsxs)("div",{className:"login_container",children:[Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsxs)("div",{className:"mdp_container",children:[Object(W.jsx)(l.a,{icon:d.K,className:"mdp_icon",color:"white"}),Object(W.jsx)("div",{className:"input",children:O.split("").map((function(e){return Object(W.jsx)("h1",{style:{color:"white"},children:"*"})}))})]}),Object(W.jsx)(l.a,{style:{marginRight:"1.2rem"},icon:d.I,onClick:function(){n(!1),c(!0)},size:"3x"})]}),Object(W.jsx)(j.a,{theme:"hg-theme-default hg-layout-default myTheme",buttonTheme:[{class:"key_btn",buttons:"0 1 2 3 4 5 6 7 8 9  "},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return f.current=e},layoutName:v,layout:{default:y},onChange:function(e){e.length<12&&m(e),console.log("Input changed",e)},onKeyPress:function(e){console.log("Button pressed",e)}}),Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"3rem"},children:[Object(W.jsxs)(b.a,{className:"my_btn x5",onClick:function(){return localStorage.setItem("username",t),void k(S({username:t,password:O})).unwrap().then((function(e){Q.a.fire({icon:"success",title:"Connect\xe9e",showConfirmButton:!1,timer:1e3}),N(1==_?"/main":"/caisse")})).catch((function(e){Q.a.fire({icon:"error",title:"Verifier Mot de passe",showConfirmButton:!1,timer:1e3})}))},children:[Object(W.jsx)(l.a,{icon:d.F,size:"1x",color:"#0dcaf0",style:{marginRight:"0.5rem"}}),i("connecter")]}),Object(W.jsxs)(b.a,{className:"my_btn x5",onClick:function(){m(""),f.current.setInput("")},children:[Object(W.jsx)(l.a,{icon:d.J,size:"1x",color:"#0dcaf0",style:{marginRight:"0.5rem"}}),i("cancel")]})]})]})},G=function(e){var t=e.user,n=(q().t,Object(r.useState)(!1)),c=Object(o.a)(n,2),i=c[0],a=c[1],s=Object(r.useState)(!0),l=Object(o.a)(s,2),d=l[0],u=l[1];return Object(W.jsxs)("div",{className:"auth_card",onClick:function(){1==d&&(a(!i),u(!1))},children:[Object(W.jsx)("span",{children:Object(W.jsx)("img",{src:"http://141.94.77.9/caisse/icons/waiter.png",width:"128px",height:"128px",alt:""})}),Object(W.jsx)("h6",{children:t}),i&&Object(W.jsx)(M,{user:t,setShowLogin:a,setClickable:u})]})},K=function(){q().t;var e,t=(null===(e=localStorage.getItem("staff"))||void 0===e?void 0:e.split(","))||[],n=Object(s.f)();return Object(r.useEffect)((function(){void 0==t[0]&&n("/init")}),[]),Object(W.jsx)("div",{className:"auth_window",children:Object(W.jsx)("div",{style:{display:"flex"},children:t.map((function(e){return Object(W.jsx)(G,{user:e})}))})})},V=function(e){var t=e.title,n=q().t;return Object(W.jsx)("div",{className:"my_navbar",children:Object(W.jsx)("h4",{className:"logo",children:n("".concat(t))})})},Z=(n(249),n(767)),X=n(745),U=n(769),J=function(){return Object(W.jsxs)("div",{className:"my_container",children:[Object(W.jsx)(V,{title:"connect"}),Object(W.jsx)(K,{}),Object(W.jsx)(Z.a,{bg:"light",variant:"light",fixed:"bottom",children:Object(W.jsxs)(X.a,{children:[Object(W.jsxs)(Z.a.Brand,{href:"#home",children:["Tous droits reserv\xe9es ",Object(W.jsx)("b",{children:"CAISSECONNECT.FR"})," \xa9 2022"]}),Object(W.jsx)(U.a,{className:"me-auto",children:Object(W.jsx)(U.a.Link,{href:"#home"})})]})})]})},Y=n(3),$=n(746),ee=(n.p,n.p+"static/media/logo.3c484734.png"),te=n(14),ne=Object(x.c)({name:"data",initialState:{zones:[],tables:[],categories:[],products:[],nSteps:[],orderHistory:[],clients:[],tva_mode:[],coupons:[],dataZ:[],isallowedLivraison:!1,isallowedEmporter:!1,ping:!1},reducers:{storeCoupon:function(e,t){e.coupons=t.payload.coupons,console.log(e.coupons)},storeClients:function(e,t){e.clients=t.payload.clients},storeDataz:function(e,t){e.dataZ=t.payload.dataZ},storeZones:function(e,t){e.zones=t.payload.zones},storeTables:function(e,t){e.tables=t.payload.tables},storeCategories:function(e,t){e.categories=t.payload.categories},storeProducts:function(e,t){e.products=t.payload.products},storeNSteps:function(e,t){e.nSteps=t.payload.nSteps},storeOrderHistory:function(e,t){e.orderHistory=t.payload.orderHistory},storeTvaMode:function(e,t){e.tva_mode=t.payload.tva_mode},updateProduct:function(e,t){var n=e.products.findIndex((function(e){return e.id==t.payload.id})),c=Object(te.a)(e.products),r=0;r=0==c[n].active?1:0,c[n]=Object(Y.a)(Object(Y.a)({},c[n]),{},{active:r}),e.products=c},updateEmporter:function(e,t){e.isallowedEmporter=!e.isallowedEmporter},updateLivraison:function(e,t){e.isallowedLivraison=!e.isallowedLivraison},setPing:function(e,t){e.ping=t.payload}}}),ce=ne.reducer,re=ne.actions,ie=re.storeZones,ae=re.storeTables,oe=re.storeCategories,se=re.storeProducts,le=re.storeNSteps,de=re.storeOrderHistory,ue=re.storeClients,je=re.updateProduct,be=re.storeTvaMode,he=re.storeCoupon,Oe=re.storeDataz,me=re.setPing,pe=ce,xe=function(){var e=Object(h.c)(),t=q().t,n=Object(s.f)(),c=Object(r.useState)({show:!1,variant:"",msg:""}),i=Object(o.a)(c,2),a=i[0],u=i[1],j=Object(r.useState)({username:"",password:""}),O=Object(o.a)(j,2),m=O[0],p=O[1],x=Object(r.useState)(!1),v=Object(o.a)(x,2),f=v[0],g=v[1],A=Object(r.useState)("password"),y=Object(o.a)(A,2),C=y[0],N=y[1];Object(r.useEffect)((function(){var e=localStorage.getItem("session"),t=localStorage.getItem("user_id");e&&t&&n("/main")}),[]);return Object(W.jsx)("div",{className:"authincation h-100 c",children:Object(W.jsx)("div",{className:"container h-100",children:Object(W.jsx)("div",{className:"row justify-content-center h-100 align-items-center",children:Object(W.jsxs)("div",{className:"col-md-6",children:[Object(W.jsx)("div",{className:"authincation-content",children:Object(W.jsx)("div",{className:"row no-gutters",children:Object(W.jsxs)("div",{className:"col-xl-12",style:{position:"relative"},children:[Object(W.jsx)("div",{className:"row",children:Object(W.jsxs)("div",{className:"col-5 mx-auto top",children:[Object(W.jsx)("br",{}),Object(W.jsxs)("div",{className:"text-center ",children:[Object(W.jsx)("img",{className:"logo-compact ",src:ee,width:"100%",alt:""}),Object(W.jsxs)("h1",{style:{color:"red",textAlign:"center",fontSize:"small",marginTop:"1rem",fontWeight:"700",width:"100%"},children:["Assistant:ILAN ",Object(W.jsx)("br",{})," + 33 6 25 25 54 52"]})]})]})}),Object(W.jsxs)("div",{className:"auth-form",children:[Object(W.jsx)("h4",{className:"text-center mb-4",children:"Connectez-vous \xe0 votre compte"}),Object(W.jsxs)("form",{children:[Object(W.jsxs)("div",{className:"form-group",children:[Object(W.jsx)("label",{className:"mb-1 pull-left",children:Object(W.jsx)("strong",{children:t("username")})}),Object(W.jsx)("input",{onChange:function(e){return p(Object(Y.a)(Object(Y.a)({},m),{},{username:e.target.value}))},type:"text",className:"form-control",placeholder:"Nom d'utilisateur",autocomplete:"off"})]}),Object(W.jsxs)("div",{className:"form-group",children:[Object(W.jsx)("label",{className:"mb-1 pull-left",children:Object(W.jsx)("strong",{children:t("password")})}),"password"==C?Object(W.jsx)(l.a,{icon:d.r,onClick:function(){return N("text")},style:{position:"absolute",right:"4%",bottom:"27.5%"}}):Object(W.jsx)(l.a,{icon:d.s,onClick:function(){return N("password")},style:{position:"absolute",right:"4%",bottom:"27.5%"}}),Object(W.jsx)("input",{onChange:function(e){return p(Object(Y.a)(Object(Y.a)({},m),{},{password:e.target.value}))},type:C,className:"form-control",placeholder:"Mot de passe",autocomplete:"new-password","v-model":"User.MotDePasse"})]}),Object(W.jsx)("div",{className:"form-row d-flex justify-content-between mt-4 mb-2",children:Object(W.jsx)("div",{className:"form-group",children:Object(W.jsxs)("div",{className:"custom-control custom-checkbox ml-1",children:[Object(W.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"basic_checkbox_1",onChange:function(e){return g(e.target.checked)}}),Object(W.jsx)("label",{className:"custom-control-label",for:"basic_checkbox_1",children:"Gardez-moi connect\xe9"})]})})}),Object(W.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show hidden",id:"error",children:[Object(W.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",className:"mr-2",children:[Object(W.jsx)("polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"}),Object(W.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),Object(W.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Object(W.jsx)("strong",{id:"errorMessage"})]})]}),Object(W.jsx)("div",{className:"text-center col-12",children:Object(W.jsxs)(b.a,{variant:"warning",size:"lg",onClick:function(){_.a.post("http://192.168.1.166:5000/api/init",Object(Y.a)({},m)).then((function(c){console.log(c.data),localStorage.setItem("staff",c.data.staff),localStorage.setItem("user_id",c.data.user_id),localStorage.setItem("session",f),localStorage.setItem("currency",c.data.currency),e(ue({clients:c.data.clients})),u({show:!0,msg:t("success"),variant:"success"}),_.a.post("http://192.168.1.166:5000/api/getCaisse",{user_id:c.data.user_id}).then((function(e){localStorage.setItem("caisse_id",e.data.id),localStorage.setItem("caisse_open",1==e.data.is_open?1:0)})),setTimeout((function(){n("/")}),1e3)})).catch((function(e){console.log(e),localStorage.removeItem("staff"),u({show:!0,msg:t("verifyUserAndPassword"),variant:"danger"})}))},children:[Object(W.jsx)(l.a,{icon:d.v})," Se connecter"]})})]})]})})}),a.show?Object(W.jsx)($.a,{variant:a.variant,children:a.msg}):""]})})})})},ve=n(407),fe=n(747),ge=n(685),Ae=Object(x.c)({name:"order",initialState:{orders:[],checkoutData:[],currentOrders:[],selectedTable:{},client:{},nbrCouverts:0,remarque:"",orderType:"sur place",ordersPartage:[],partNotPaid:0},reducers:{setRemarque:function(e,t){e.remarque=t.payload.remarque},storeSelectedTable:function(e,t){console.log(t.payload),e.selectedTable=t.payload.selectedTable},setNbrCouverts:function(e,t){e.nbrCouverts=t.payload.nbrCouverts},setNewCurrentOrder:function(e,t){e.currentOrders=[].concat(Object(te.a)(e.currentOrders),[t.payload.order])},setNewOrder:function(e,t){var n=e.orders.findIndex((function(e){return e.id==t.payload.order.id})),c=Object(te.a)(e.orders);-1==n||t.payload.order.is_supp?e.orders=[].concat(Object(te.a)(e.orders),[t.payload.order]):(c[n]=Object(Y.a)(Object(Y.a)({},c[n]),{},{qt:c[n].qt+1}),e.orders=Object(te.a)(c))},setOrderChange:function(e,t){e.orders.findIndex((function(e){return e.id==t.payload.order.id}));var n=Object(te.a)(e.orders);n[t.payload.key]=t.payload.order,e.orders=Object(te.a)(n)},deleteOrder:function(e,t){e.orders=e.orders.filter((function(e,n){return n!=t.payload.key}))},clearOrders:function(e,t){e.orders=[]},clearData:function(e,t){e.checkoutData=[]},addNewcheckoutData:function(e,t){e.checkoutData.some((function(e){return e.order_id==t.payload.order.order_id}))||(e.checkoutData=[].concat(Object(te.a)(e.checkoutData),[t.payload.order]))},addNewcheckoutDataFromDB:function(e,t){if(-1==e.checkoutData.findIndex((function(e){return e.order_id==t.payload.order.order_id}))){var n=t.payload.order.orderItems.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{qt:e.quantity})})),c=t.payload.order.tva*t.payload.order.price/100;e.checkoutData=[].concat(Object(te.a)(e.checkoutData),[Object(Y.a)(Object(Y.a)({},t.payload.order),{},{orderItems:n,orderType:t.payload.order.order_type,taxPrice:c})])}},deletecheckoutData:function(e,t){e.checkoutData=e.checkoutData.filter((function(e){return e.order_id!=t.payload.order_id}))},setCheckoutChange:function(e,t){var n=e.checkoutData.findIndex((function(e){return e.order_id==t.payload.order.order_id})),c=Object(te.a)(e.checkoutData);c[n]=t.payload.order,e.checkoutData=Object(te.a)(c)},initClient:function(e,t){e.client=t.payload.client},deleteClientandTable:function(e,t){e.client={},e.selectedTable={}},cancelOrder:function(e,t){Object(te.a)(e.checkoutData).forEach((function(n){n.order_id==t.payload.order_id&&(n=t.payload,e.checkoutData=[])}))},setType:function(e,t){e.orderType=t.payload},setOrderPartage:function(e,t){e.ordersPartage=t.payload},editordersPartage:function(e,t){t.payload.amount<=0&&(e.partNotPaid=e.partNotPaid-1);var n=e.ordersPartage.findIndex((function(e){return e.partId==t.payload.partId})),c=Object(te.a)(e.ordersPartage);c[n]=t.payload,e.ordersPartage=Object(te.a)(c)},clearOrdersPartage:function(e,t){e.ordersPartage=[]},setPartNotPaid:function(e,t){e.partNotPaid=t.payload},updateReapartirItems:function(e,t){var n=Object(te.a)(e.ordersPartage),c=Number(t.payload.destination.droppableId),r=Number(t.payload.source.droppableId),i=Number(t.payload.draggableId);c!=r&&(n[c]=Object(Y.a)(Object(Y.a)({},n[c]),{},{orderItems:[].concat(Object(te.a)(n[c].orderItems),[n[r].orderItems.filter((function(e){return e.repatirId==i}))[0]]),totalPrice:n[c].totalPrice+n[r].orderItems.filter((function(e){return e.repatirId==i}))[0].price,amount:n[c].totalPrice+n[r].orderItems.filter((function(e){return e.repatirId==i}))[0].price}),n[r]=Object(Y.a)(Object(Y.a)({},n[r]),{},{orderItems:n[r].orderItems.filter((function(e){return e.repatirId!=i})),totalPrice:n[r].totalPrice-n[r].orderItems.filter((function(e){return e.repatirId==i}))[0].price,amount:n[r].totalPrice-n[r].orderItems.filter((function(e){return e.repatirId==i}))[0].price}),e.ordersPartage=Object(te.a)(n))}}}),ye=Ae.reducer,Ce=Ae.actions,_e=Ce.storeSelectedTable,Ne=(Ce.setNbrCouverts,Ce.setNewOrder),ke=Ce.setOrderChange,we=Ce.deleteOrder,Se=Ce.addNewcheckoutData,Ie=Ce.clearOrders,Te=Ce.deletecheckoutData,Pe=Ce.initClient,Ee=Ce.deleteClientandTable,Be=(Ce.setNewCurrentOrder,Ce.setCheckoutChange),De=Ce.addNewcheckoutDataFromDB,Le=Ce.setRemarque,Fe=(Ce.cancelOrder,Ce.clearData),Re=Ce.setType,He=Ce.setOrderPartage,qe=Ce.editordersPartage,ze=Ce.clearOrdersPartage,Qe=Ce.setPartNotPaid,We=Ce.updateReapartirItems,Me=ye,Ge=function(e){var t=e.selectedZone,n=q().t,c=Object(te.a)(Array(12).keys()),i=Object(h.d)((function(e){return e.data.tables})),a=Object(h.d)((function(e){return e.order.checkoutData})),u=Object(r.useState)({}),j=Object(o.a)(u,2),O=j[0],m=j[1],p=Object(r.useState)(!1),x=Object(o.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)(0),A=Object(o.a)(g,2),y=(A[0],A[1],Object(h.c)()),C=Object(s.f)(),_=function(e){return i.filter((function(e){return e.zone_id==t})).find((function(t){return t.position==e}))},N=function(e){if(void 0!=_(e)&&0!=_(e).active)if(m({id:_(e).id,nbr:_(e).numero,ppl:_(e).nbrePersonne,libre:_(e).libre,nbrCouverts:1}),0==_(e).libre){var t=a.filter((function(t){return t.table_number==_(e).id&&"completed"!=t.status}))[0];C("/checkout/".concat(t.order_id))}else f(!0)};return Object(W.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(W.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:Object(W.jsx)(fe.a,{style:{},children:Object(W.jsxs)("tbody",{children:[Object(W.jsx)("tr",{children:c.map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))}),Object(W.jsx)("tr",{children:c.map((function(e){return e+12})).map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))}),Object(W.jsx)("tr",{children:c.map((function(e){return e+24})).map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))}),Object(W.jsx)("tr",{children:c.map((function(e){return e+36})).map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))}),Object(W.jsx)("tr",{children:c.map((function(e){return e+48})).map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))}),Object(W.jsx)("tr",{children:c.map((function(e){return e+60})).map((function(e){var t,n,c,r;return Object(W.jsx)("td",{children:Object(W.jsx)(b.a,{className:"rond"==(null===(t=_(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:_(e)?null!==(n=_(e))&&void 0!==n&&n.active?null!==(c=_(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return N(e)},children:null===(r=_(e))||void 0===r?void 0:r.numero})})}))})]})})}),Object(W.jsx)(ge.a,{show:v,onHide:function(){return f(!1)},children:1==O.libre?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:Object(W.jsxs)("h5",{style:{fontSize:"24px"},children:[Object(W.jsx)(l.a,{icon:d.M,style:{marginRight:"1rem"}}),n("newTable")]})})}),Object(W.jsxs)(ge.a.Body,{children:[n("nbrCouverts"),Array.from({length:O.ppl},(function(e,t){return t+1})).map((function(e){return Object(W.jsx)(b.a,{className:"ml",onClick:function(){m(Object(Y.a)(Object(Y.a)({},O),{},{nbrCouverts:e})),console.log(O)},variant:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"warning":"dark",style:{backgroundColor:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"#ff6b6b":"black",borderColor:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"#ff6b6b":"black"},children:e})}))]}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return f(!1)},children:n("cancel")}),Object(W.jsxs)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return f(!1),console.log(O),y(_e({selectedTable:O})),y(Pe({client:{type:"sur place"}})),y(Re("sur place")),void setTimeout((function(){C("/menu")}),300)},children:[Object(W.jsx)(l.a,{icon:d.l,style:{marginRight:"0.5rem"}}),n("validate")]})]})]}):Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)(b.a,{variant:"danger",onClick:function(){C("/checkout/".concat(O.id))},children:"Checkout !"})})})]})},Ke=(n(480),function(){var e=Object(h.d)((function(e){return e.data.ping})),t=localStorage.getItem("user_id"),n=Object(h.c)(),c=Object(s.f)(),i=Object(r.useState)(""),a=Object(o.a)(i,2),u=a[0],j=a[1],O=Object(h.d)((function(e){return e.data.zones})),m=Object(h.d)((function(e){return e.order.checkoutData})),p=Object(r.useState)(!1),x=Object(o.a)(p,2),v=x[0],f=x[1];return Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getUserZones",{user_id:t}).then((function(e){var t;n(ie({zones:e.data.zones})),n(ae({tables:e.data.tables})),j(null===(t=O[0])||void 0===t?void 0:t.id)}))}),[m,e]),Object(W.jsxs)("div",{children:[Object(W.jsx)(l.a,{icon:d.f,style:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},size:"2x",color:"white",onClick:function(){return f(!0)}}),Object(W.jsxs)("div",{className:"zone",style:{display:"flex",justifyContent:"center",marginTop:"1.5rem",height:"45px"},children:[Object(W.jsx)("h2",{className:"plan-restuarnat",style:{position:"absolute",left:"3.5%"},children:Object(W.jsx)("b",{children:"Plan du Restaurant"})}),O.map((function(e){return Object(W.jsx)(b.a,{className:"zone_button",style:{marginLeft:"1rem"},onClick:function(){return j(e.id)},variant:u==e.id?"dark":"outline-dark",children:e.nom})}))]}),Object(W.jsx)(Ge,{selectedZone:u}),Object(W.jsxs)(ve.a,{placement:"end",show:v,onHide:function(){return f(!1)},children:[Object(W.jsx)(ve.a.Header,{closeButton:!0,children:Object(W.jsx)(ve.a.Title,{children:"menu"})}),Object(W.jsx)(ve.a.Body,{children:Object(W.jsxs)("div",{className:"my_offcanvas",children:[Object(W.jsxs)("div",{className:"offcanvas_item",onClick:function(){return c("/backoffice")},children:[Object(W.jsx)(l.a,{icon:d.p}),Object(W.jsx)("p",{children:"Acc\xe9der aux back-Office"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",onClick:function(){return c("/clients")},children:[Object(W.jsx)(l.a,{icon:d.L}),Object(W.jsx)("p",{children:"Gestion des clients"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",children:[Object(W.jsx)(l.a,{icon:d.z}),Object(W.jsx)("p",{children:"Commandes a livrer"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",children:[Object(W.jsx)(l.a,{icon:d.a}),Object(W.jsx)("p",{children:"Commandes a emporter"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",onClick:function(){return c("/avoires")},children:[Object(W.jsx)(l.a,{icon:d.H}),Object(W.jsx)("p",{children:"Gestion des avoirs"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",onClick:function(){return c("/cloture")},children:[Object(W.jsx)(l.a,{icon:d.k}),Object(W.jsx)("p",{children:"Cloture de caisse"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",children:[Object(W.jsx)(l.a,{icon:d.h}),Object(W.jsx)("p",{children:"Cumuler les tables"})]}),Object(W.jsxs)("div",{className:"offcanvas_item",children:[Object(W.jsx)(l.a,{icon:d.u}),Object(W.jsx)("p",{children:"Rappel ticket"})]})]})})]})]})}),Ve=(n.p,n(62)),Ze=n(748),Xe=n(766),Ue=n(231),Je=n(749),Ye=n(397),$e=(n(250),n(146)),et=n.p+"static/media/loading.30c0aa7c.gif",tt=function(){var e,t,n,c,i,a,u,j,O,x,v=localStorage.getItem("user_id"),f=Object(h.d)((function(e){return e.data.zones})),g=Object(r.useState)(""),A=Object(o.a)(g,2),y=A[0],C=A[1],N=Object(h.d)((function(e){return e.data.tables})),k=Object(h.d)((function(e){return e.data.orderHistory}));console.log("ordersHistory",k);var w=Object(h.d)((function(e){return e.order.checkoutData})),S=Object(h.d)((function(e){return e.data.clients})),I=Object(h.c)(),T=Object(s.f)(),P=null===N||void 0===N||null===(e=N.filter((function(e){return 1==e.libre})))||void 0===e?void 0:e.length,E=(null===N||void 0===N||null===(t=N.filter((function(e){return 0==e.libre})))||void 0===t||t.length,Object(r.useState)(!1)),B=Object(o.a)(E,2),D=B[0],L=B[1],F=Object(r.useState)(!1),R=Object(o.a)(F,2),H=R[0],q=R[1],z=Object(r.useState)(!1),M=Object(o.a)(z,2),G=M[0],K=M[1],V=Object(r.useState)(""),J=Object(o.a)(V,2),$=J[0],ee=J[1],te=window.location.hash,ne=(S.map((function(e){return e.nom_prenom})),Object(h.d)((function(e){return e.data.orderHistory})),new Date),ce=ne.toISOString().substr(0,10),re=ne.getHours()+":"+ne.getMinutes(),ie=(null===w||void 0===w||null===(n=w.filter((function(e){return e.date>ce})))||void 0===n?void 0:n.length)||0,ae=(null===w||void 0===w||null===(c=w.filter((function(e){return("pending"==e.status||"cooking"==e.status||"ready"==e.status)&&e.date==ce})))||void 0===c?void 0:c.length)||0,oe=(null===w||void 0===w||null===(i=w.filter((function(e){return"rejected"==e.status})))||void 0===i?void 0:i.length)||0,se=(null===k||void 0===k||null===(a=k.filter((function(e){return"completed"==e.status})))||void 0===a?void 0:a.length)||0;Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getclients",{user_id:v}).then((function(e){I(ue({clients:e.data.clients}))}))}),[]);var le=Object(r.useState)([]),de=Object(o.a)(le,2),je=de[0],be=de[1],he=Object(r.useState)(!1),Oe=Object(o.a)(he,2),me=Oe[0],pe=Oe[1],xe=Object(r.useState)({}),ve=Object(o.a)(xe,2),fe=(ve[0],ve[1],Object(r.useState)({})),Ae=Object(o.a)(fe,2),ye=(Ae[0],Ae[1],Object(r.useState)(!1)),Ce=Object(o.a)(ye,2),Ne=Ce[0],ke=Ce[1],we=Object(r.useState)(0),Se=Object(o.a)(we,2),Te=Se[0],Be=Se[1],De=Object(r.useState)(!1),Fe=Object(o.a)(De,2),He=Fe[0],qe=Fe[1],ze=Object(r.useState)(""),Qe=Object(o.a)(ze,2),We=Qe[0],Me=Qe[1],Ge=Object(r.useState)({prenom:"",company:"",code1:"",code2:"",etage:"",interphone:"",name:"",phone:"",address:"",post:"",city:"",message:"",email:"",type:"emporter",nbrCouverts:1,id:Number(Math.floor(Math.random()*Date.now()).toString().substring(11)),date:ce,time:re}),Ke=Object(o.a)(Ge,2),Ve=Ke[0],tt=Ke[1],nt=function(e){return N.find((function(t){return t.numero==e}))},ct=function(){L(!1),ke(!1)},rt=function(){I(Ee()),L(!0)},it=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),t=localStorage.getItem("caisse_id"),e.next=4,_.a.post("http://192.168.1.166:5000/api/getallorders",{user_id:v,caisse_id:t,customer_id:Ve.id}).then((function(e){console.log({zboub:e.data}),be(e.data),pe(!1)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(e){K(!0),qe(!0);var t=null===S||void 0===S?void 0:S.filter((function(t){var n,c,r;return(null===(n=t.nom_prenom)||void 0===n?void 0:n.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(c=t.telephone)||void 0===c?void 0:c.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))}))[0];t&&tt(Object(Y.a)(Object(Y.a)({},Ve),{},{id:t.id,prenom:t.nom_prenom,company:t.societe,code1:t.code_1,code2:t.code_2,etage:t.etage,interphone:t.interphone,name:t.nom_prenom,phone:t.telephone,address:t.adresse,post:t.code_postal,city:t.ville,email:t.email}))};return console.log("path",te),Object(W.jsx)("div",{children:Object(W.jsxs)(Z.a,{bg:"light",variant:"light",fixed:"bottom",className:"nav-buttom",children:[Object(W.jsxs)(X.a,{children:[Object(W.jsxs)(U.a,{className:"me-auto",children:[Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{variant:"success",className:"nav-buttom-button",children:["Libres ",Object(W.jsx)(Ze.a,{bg:"success",children:P})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{variant:"danger",onClick:function(){I(Ie()),T("/history/encours")},className:"nav-buttom-button",children:["En cours",Object(W.jsxs)(Ze.a,{bg:"danger",children:[" ",ae]})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{variant:"info",className:"nav-buttom-button",children:["Livr\xe9s ",Object(W.jsx)(Ze.a,{bg:"info",children:"0"})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{variant:"warning",className:"nav-buttom-button",onClick:function(){I(Ie()),T("/history/annules")},children:["Annul\xe9es ",Object(W.jsx)(Ze.a,{bg:"warning",children:oe})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{className:"nav-buttom-button",variant:"dark",onClick:function(){I(Ie()),T("/history/avenir")},children:["Commandes a Venir ",Object(W.jsx)(Ze.a,{bg:"dark",children:ie})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)(b.a,{className:"nav-buttom-button",variant:"primary",onClick:function(){I(Ie()),T("/history/all")},children:["Termin\xe9es ",Object(W.jsx)(Ze.a,{bg:"primary",children:se})]})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsx)(b.a,{variant:"warning",className:"nav-buttom-button",onClick:function(){_.a.post("http://192.168.1.166:5000/api/getorder",{user_id:v,order_id:We}).then((function(e){console.log(e.data),"no data"==e.data?Q.a.fire({icon:"warning",title:"pas de commande avec cet identifiant",showConfirmButton:!1,timer:1500}):"completed"==e.data[0].status?Q.a.fire({icon:"warning",title:"la commande est termin\xe9e ",showConfirmButton:!1,timer:1500}):(console.log(e.data[0].status),T("/checkout/".concat(We)))}))},children:Object(W.jsx)(l.a,{icon:d.B})})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsx)(Xe.a.Control,{className:"order_id_input",type:"text",placeholder:"Order_id",onChange:function(e){console.log(e.target.value),Me(e.target.value)}})})]}),Object(W.jsxs)(b.a,{className:"nav-buttom-button nouvelle-cmd-btn",style:{borderRadius:"50px !important"},variant:"success",size:"lg",onClick:function(){return rt()},children:[Object(W.jsx)(l.a,{icon:d.B,style:{marginRight:"1rem"}}),"Nouvelle Commande"]}),te.includes("menu")?Object(W.jsx)(b.a,{className:"nav_butoons-note",onClick:function(){return q(!0)},style:{borderRadius:"50px !important",display:"flex",alignItems:"center",borderColor:"#d63031",backgroundColor:"transparent",marginLeft:"0.5rem"},variant:"secondary",size:"lg",children:Object(W.jsx)(l.a,{icon:d.H,color:"#d63031"})}):""]}),Object(W.jsxs)(ge.a,{show:H,onHide:function(){return q(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Remarque"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsxs)(Ue.a,{children:[Object(W.jsxs)("h3",{children:[Object(W.jsx)(l.a,{icon:d.H,color:"#d63031",style:{marginRight:"1rem"}}),"Note"]}),Object(W.jsx)(Xe.a.Control,{onChange:function(e){return ee(e.target.value)},as:"textarea",type:"text",placeholder:"Remarque ..."})]})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return q(!1)},children:"Annuler"}),Object(W.jsx)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){I(Le({remarque:$})),q(!1)},children:"Ajouter"})]})]}),Object(W.jsxs)(ge.a,{show:D,onHide:ct,style:{zIndex:1050,left:-120,top:50},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:Object(W.jsxs)("div",{style:{width:"100%"},children:[Object(W.jsx)("h5",{children:"Choix du mode de consommation"}),Object(W.jsx)(b.a,{size:"lg",variant:"emporter"==(null===Ve||void 0===Ve?void 0:Ve.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b",marginRight:"2rem"},onClick:function(){I(Re("emporter")),tt(Object(Y.a)(Object(Y.a)({},Ve),{},{type:"emporter"}))},children:"A emporter"}),Object(W.jsx)(b.a,{size:"lg",variant:"livraison"==(null===Ve||void 0===Ve?void 0:Ve.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b",marginRight:"2rem"},onClick:function(){I(Re("livraison")),tt(Object(Y.a)(Object(Y.a)({},Ve),{},{type:"livraison"}))},children:"Livraison"}),Object(W.jsx)(b.a,{size:"lg",variant:"sur place"==(null===Ve||void 0===Ve?void 0:Ve.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b"},onClick:function(){I(Re("sur place")),tt(Object(Y.a)(Object(Y.a)({},Ve),{},{type:"sur place"}))},children:"sur place"})]})})}),Object(W.jsxs)(ge.a.Body,{children:[Ne&&Object(W.jsxs)("div",{className:"histo",children:[Object(W.jsxs)("h1",{style:{textAlign:"center"},children:[" ",Object(W.jsx)("b",{children:"Historique Client"})," ",Object(W.jsx)(l.a,{onClick:function(){ke(!1),be([])},className:"times",icon:d.I})]}),Object(W.jsxs)("div",{className:"hhead",children:[Object(W.jsx)("h3",{className:"wid",children:"Type"}),Object(W.jsx)("h3",{className:"wid",children:"Date"}),Object(W.jsx)("h3",{className:"wid",children:"Order"}),Object(W.jsx)("h3",{className:"wid",children:"Prix"}),Object(W.jsx)("h3",{className:"wid",children:"Paiement"})]}),Object(W.jsxs)("div",{className:"hbody",children:[0!=je.length||me?me?Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)("h3",{children:"Chargement en cours"}),Object(W.jsx)("img",{src:et,alt:"loading",width:30})]}):"":Object(W.jsx)("h1",{children:"Aucune Commande trouv\xe9e"}),null===je||void 0===je?void 0:je.map((function(e,t){var n;return Object(W.jsxs)("div",{className:"el",children:[Object(W.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.order_type}),Object(W.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.date}),Object(W.jsxs)("h5",{className:"wid",children:["#",null===e||void 0===e?void 0:e.id]}),Object(W.jsxs)("h5",{className:"wid",children:[null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.toFixed(2),"\u20ac"]}),Object(W.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.pay_method}),Object(W.jsx)(l.a,{icon:d.D,onClick:function(){return function(e){var t={table:(null===e||void 0===e?void 0:e.table_number)||"",client_id:(null===e||void 0===e?void 0:e.customer_id)||0,order_id:e.id,message:e.message||"aucune",customer_name:(null===e||void 0===e?void 0:e.customer_name)||"",customer_company:(null===e||void 0===e?void 0:e.customer_company)||"",code1:(null===e||void 0===e?void 0:e.code1)||"",code2:(null===e||void 0===e?void 0:e.code2)||"",interphone:(null===e||void 0===e?void 0:e.interphone)||"",etage:(null===e||void 0===e?void 0:e.etage)||"",table_number:(null===e||void 0===e?void 0:e.table_number)||0,customer_tel:(null===e||void 0===e?void 0:e.customer_tel)||"",customer_adress:null===e||void 0===e?void 0:e.customer_adress,status:null===e||void 0===e?void 0:e.status,orderType:null===e||void 0===e?void 0:e.order_type,paymentType:null===e||void 0===e?void 0:e.pay_method,totalPrice:null===e||void 0===e?void 0:e.price,taxPrice:null===e||void 0===e?void 0:e.tva,tvas:(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.tva)/100,orderItems:null===e||void 0===e?void 0:e.orderItems,date:null===e||void 0===e?void 0:e.date,time:null===e||void 0===e?void 0:e.time};_.a.post("http://192.168.1.166:5000/api/printOrder",{kitchen:!1,user_id:v,order:Object(Y.a)(Object(Y.a)({new:!1},t),{},{nbrCouverts:1})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}(e)},style:{cursor:"pointer"}})]})}))]})]}),Object(W.jsx)("div",{children:"livraison"==(null===Ve||void 0===Ve?void 0:Ve.type)?Object(W.jsx)("div",{children:Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{name:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{children:[(null===(u=Ve.telephone)||void 0===u?void 0:u.length)>0&&(null===(j=Ve.telephone)||void 0===j?void 0:j.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)($e.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},Ve),{},{phone:e}))},onChange:function(e){at(e[0]),console.log(e)},options:S.map((function(e){return e.telephone})),placeholder:"telephone",type:"number",min:"1",max:"5"})]}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.email,type:"email",placeholder:"Email",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{email:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.address,as:"textarea",type:"text",placeholder:"Addresse",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{address:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.company,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{company:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.code1,type:"text",placeholder:"code 1",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{code1:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.code2,type:"text",placeholder:"code 2",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{code2:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:Ve.city,type:"text",placeholder:"Ville",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{city:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.interphone,type:"text",placeholder:"interphone",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{interphone:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.etage,type:"text",placeholder:"etage",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{etage:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:Ve.post,type:"postal",placeholder:"Code postal",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{post:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{message:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.date,type:"date",defaultValue:Ve.date,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{date:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.time,type:"time",defaultValue:Ve.time,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{time:e.target.value}))}})})]})})]})}):"emporter"==(null===Ve||void 0===Ve?void 0:Ve.type)?Object(W.jsx)("div",{children:Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{name:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsxs)(Ye.a,{children:[(null===(O=Ve.telephone)||void 0===O?void 0:O.length)>0&&(null===(x=Ve.telephone)||void 0===x?void 0:x.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)($e.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},Ve),{},{phone:e})),qe(!1),ke(!1)},onChange:function(e){at(e[0]),console.log(e)},options:S.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{message:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.date,type:"date",defaultValue:Ve.date,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{date:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.time,type:"time",defaultValue:Ve.time,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{time:e.target.value}))}})})]})})]})}):Object(W.jsx)("div",{children:Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)($e.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},Ve),{},{name:e})),qe(!1),ke(!1)},onChange:function(e){return at(e[0])},options:S.map((function(e){return e.nom_prenom})),placeholder:"nom/prenom"})})})}),Object(W.jsxs)(Xe.a.Group,{className:"mb-3",children:[Object(W.jsx)(Je.a,{children:Object(W.jsxs)(Ye.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(W.jsx)("h3",{children:"Zones :"}),f.map((function(e){return Object(W.jsx)(b.a,{className:"zone_button",style:{marginLeft:"1rem"},onClick:function(){return C(e.id)},variant:y==e.id?"dark":"outline-dark",children:e.nom})}))]})}),Object(W.jsx)(Je.a,{children:Object(W.jsxs)(Ye.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(W.jsx)("h3",{children:"Tables :"}),N.filter((function(e){return 1==e.active&&1==e.libre&&e.zone_id==y})).map((function(e){return Object(W.jsx)("div",{className:e.numero==Te?"tbl sel":"tbl",onClick:function(){return Be(e.numero)},children:Object(W.jsx)("h6",{children:Object(W.jsx)("b",{children:e.numero})})})}))]})})]}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:Ve.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},Ve),{},{message:e.target.value}))}})})})})]})})})]}),Object(W.jsxs)(ge.a.Footer,{children:[G?Object(W.jsxs)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){ke(!Ne),it()},children:[Object(W.jsx)(l.a,{icon:d.u,style:{marginRight:"5px"}}),"Historiques"]}):"",Object(W.jsx)(b.a,{variant:"outline-secondary",onClick:ct,children:"Annuler"}),Object(W.jsxs)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){return 0==He?_.a.post("http://192.168.1.166:5000//api/createClient",{user_id:v,client:{etage:Ve.etage||0,interphone:Ve.interphone||0,supprimer:0,societe:Ve.company||"",nom_prenom:Ve.name||"",telephone:Ve.phone||"",adresse:Ve.address||"",code_postal:Ve.post||0,ville:Ve.city||"",email:Ve.email||"",code_1:Ve.code1||"",code_2:Ve.code2||""}}).then((function(e){tt(Object(Y.a)(Object(Y.a)({},Ve),{},{id:e.data.id})),I(Pe({client:Object(Y.a)(Object(Y.a)({},Ve),{},{id:e.data.id})}))})).catch((function(e){return console.log(e)})):I(Pe({client:Ve})),"sur place"==Ve.type&&(0==Te?Q.a.fire({title:"Selectioner une table !"}):(I(_e({selectedTable:{id:nt(Te).id,nbr:nt(Te).numero,ppl:nt(Te).nbrePersonne,libre:nt(Te).libre,nbrCouverts:1}})),ct(),T("/menu"))),void("sur place"!=Ve.type&&(ct(),T("/menu")))},children:[Object(W.jsx)(l.a,{icon:d.m,style:{marginRight:"5px"}}),"Cr\xe9er la vente"]})]})]})]})})},nt=n.p+"static/media/serveur.496e23b3.png",ct=(n(112),Ve.a.connect("http://localhost:5002")),rt=function(){var e=q().t,t=(localStorage.getItem("user"),localStorage.getItem("username")||""),n=localStorage.getItem("user_id"),c=Object(h.c)(),i=Object(s.f)();Object(r.useEffect)((function(){ct.on("a",(function(e){console.log(e)}))}),[ct]),Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/categories",{user_id:n}).then((function(e){return c(oe({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),_.a.post("http://192.168.1.166:5000/api/products",{user_id:n,category:0}).then((function(e){c(se({products:e.data.products})),c(le({nSteps:e.data.menuSteps}))}))}),[]),Object(r.useEffect)((function(){var e=localStorage.getItem("caisse_id");_.a.post("http://192.168.1.166:5000/api/getorders",{user_id:n,caisse_id:e}).then((function(e){c(de({orderHistory:e.data})),console.log(e.data);var t=e.data.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{table_number:e.table_number||e.order_id,order_id:e.id})}));console.log("got data",t),t.map((function(e){c(De({order:e}))}))})),_.a.post("http://192.168.1.166:5000/api/gettva").then((function(e){c(be({tva_mode:e.data}))}))}),[]);var a=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),i("/")};return Object(W.jsxs)("div",{className:"main_bg",children:[Object(W.jsx)(Z.a,{variant:"warning",className:"navbar",children:Object(W.jsxs)(X.a,{className:"main-container",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsx)(Z.a.Brand,{}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{className:"nav_link-h6",style:{color:"white",paddingTop:"5px"},children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"},className:"ico2"}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return i("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"5px"},className:"nav_link-h6",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"},className:"ico1"}),e("cashier")]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return a()},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"5px"},className:"nav_link-h6",children:[Object(W.jsx)(l.a,{icon:d.G,style:{marginRight:"5px"},className:"ico"}),e("disconnect")]})})]}),Object(W.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},className:"nav-link",children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"},className:"server-img"}),Object(W.jsx)("b",{children:t}),Object(W.jsx)(l.a,{onClick:function(){return a()},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(W.jsxs)("div",{className:"x2",children:[Object(W.jsx)(Ke,{}),Object(W.jsx)(tt,{})]})]})},it="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAByBSURBVHja7d0LtGV1fR/wc+5jHgwMI8qAUIqOyFupjSuYqLzEqQwWEavCahpr6j2mTSXSik28p11deq4xJpWFptaei8saVwMRS6HRQWEMASVKIjXODA87CBIcwAkjwwzzuHMfp78/cyC8ZubeO+fs8z/nfD5r/e8eH/fuff577/P77v9+lRuNRgkA6C8DugAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAHQBAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAHM3NJ9fGq1W0+/9SrTXRHtZtJdGWxbt76L9tNl+OFarbdTFADA/I5XK4TF5XbQVzXZEtC3RNkd7LNq6aN8br9en5vq3y41GY7ZFfzgml0R7R7S3RDt0P7+S/vDt0f402lcjDGyyKgFgv0V/eUzeFe3d0c6INrifX3ki2rej3RDt6ggDky0JAFH404z/RbT/FO2V8/w8O6P9YbTfjyCw3eoFgBcU/iUx+Q/RPhJt8Tz/zAPRPh7tKxEEpucdAKL4n5qO3qOd1KLP93C0fxch4E+tagB4pvi/NyafiXZUi/7kPdHeEyFg/ZwDQBT/NPTwpWhL2vBZPxXtYxEEGlY7AH1c+Msx+WS032nDn08j7u+PEHDti/2PA3sp/tXmkf+SNn3m9EGvjfkstvoB6NPin2rgtW0q/qVmDf9qzKc6qwAQRfn9MflEAZ89XeBwlU0AgD51VbMWttsnIgS8//n/5XNOAUTxPycm34w2XGAH/PZYrfZZ2wEAfXT0f2lMrixwlunOgLeN1+t//oIAEMV/aUw2RFtecD+khXpzhIA7bBIA9EHxPz0m3yn4YDtJt+O/OkLA1vQfnn0K4GMdKP6lZgd8xiYBQJ/4TAeKf6lZ4z/2nBGAOPpP9/enWwYWdrBD3j5Wq33DdgFADx/9nx+Tr3dwESainTRerz/w9AjAZR0u/smYTQOAHtfpWpdq/YefGgH42OhougfxZ6XWPXzgQJwyVqvdbfsAoAeP/tPD9dZlsCjpPT3HpBGAX82k+CcrbSIA9Ki3ZbIcR0d7QwoA52fUOQIAAL3qvIyW5e0pAByf0QKdMVqtDthGAOglI5VKuur/TRkt0gmp2K7IaIHSYwtfZVMBoMecGG1BRsuzIrcAkLzWdgJAj3lNZsvzVAAY1kkA0FcHt8MpADwmAABAX9W2x1IA2CwlAUBfBYDNKQBsymyhVoxWqwfZVgDoBSOVyrKYHJPZYm1KAeDezBYqLdMpNhkAHP23zb2p2K7LcMGcBgBAAGifdSkArNVZANBXNW1tCgB3RZvRWQDQFrmNaqeaf9fAWK22I/5xvwAAAG1xambLc/94vb7j6efu53Ya4PDRavVI2wwA3WykUjk2JkszW6ynav7TASDHCwGNAgDQ7bK8AFAAAID2yvGutuwDgFsBATAC0OYAcF+0nToNAHq6lu1s1vw9AWCsVnvqloDMFvLk0Wp10LYDQDcaqVQWxOSEzBbrrvF6febZIwDPDAlkZFG0V9uEAOhSJ0UbymyZnqn1OQeAxGkAALpVtuf/nx8APBIYAHq7hq3tlhEAdwIAIAC0cwRgrFbbFJNNOg8AevIgdtN4vb7pxUYAnjM0kIlXjlarB9uGAOgmI5XKS2JydGaL9ZwaP7C3oYFMlEv5vUQBAPYn6+H/bggAuXYiAAgAAgAAPEe27wDYWwBITwOc0YkA0FMHry944u9zAsBYrfbMM4J1IgDM3UilkuP1a/eN1+s79zUC8IIhggwcNlqtHmWTAqBLHBvtkMyW6QW1/cUCQI5PBHQaAIBukWPNWjubAOBCQADorZo1qxEAAQAA+jAA3B9tR2YL7hQAAALA/Oxo1vZ9B4CxWi3dKrA+s4U/cbRaHbJNAZCzkUplYUyOz2yx1o/X6zOzGQF40aGCDsuxQwHg+U6KltsB64vW9G4JAInrAADIXVec/++2AOA6AAAEgLlbO5cAsFanAkBPHKzOfgRgrFZ7LCaPCgAA0NW16tHxev2xuYwA7DUxdNArRqvVpbYtAHI0UqkcFpPcHl2/11q+rwCQ42mAU21iADj6n7W18wkA7gQAgNnrmvP/3RgA3AkAgBGANgeAu6NN61wA6MoaNd2s5XMLAGO12q6YbNC5ALBvI5VKuZTfdWobxuv1XXv7H/f3uMI0dHBiRh9m2Wi1ekyEk4f6fmvbeMVg/Dw4Wtmut4/0e/Rl23QDczVx96Xp4OgQ+9c+pWfLb1t48mcbuuIpr2x+J+dkn6fyZxMA3p3hKEB/BYCNVxwTPy+M9k+ipX8fGe1lpX2fwmFP302U9jzTIrU0FHZDtJsiGOzUOTSLfdqX3h7t/GgrmvvX8lJ+z3PP0WT036bm/nVftD+L9o0IBVv6sC+66vz/bAJArk8EXN0HhSsdefxatA9H+8e+Z+YtvUjq2GY7Pdr7S+nVmBuv+EZMPx5BYL0u6tvCnwL170R7c7RBPTIvw9GObrZfivbeaFPRt7fEtBZB4DYBoKP2WcP3dwTpToDOFP9z4ued0f5Y8W+Lg0p7RrZ+FH39xWhH65K+KvynRftW/POb0c5S/FsuHVi+Ndqt0c83RDuxTz53140A7C8APBDtSZ1cWOEfjvb5+Ne3o73O90jbpe3/N6LdE/1+ge7oi+J/eUz+b7SVeqMQab9aG/3+m33wWXM7OH2yWcP3qtxo7Pv6jdFq9fulPUOnuZiMtmSsVpvsseJ/ePy8NtqZvjM6Iu0Io6WjL/s9XdGThX9RTK6K9s/1Rsf892gfWnjyZyd77YONVCqLmgU3p9GkO8br9TccyAhAktt1AOmcU28NKW28Il2E9D3Fv6PSNRefjHVxpa7oueK/oJQu/FT8O+2D0a6P9dGLp1xOKuV3Kmm/tXs2AcAjgdtb/FOg+V/RXuX7IQuXxjqp6Iae8oXSngv96LxV0f6gBz9X153/FwDy8EfRzvC9kNk62XiF0ZjeOPq/rLTnzg/ycVmsl15bJ131DoBuDwC9cSfAxivOjp+ONvOTRmW+2BydoXuL/yti8ik9kaXPxvpZbgQg8wAwVqttjsnDOrstfDnlK52S+de6oat9PNoC3ZCl9MS8qgDQNg+P1+ubWzECkOMowDGj1eqyLj/6f1f8/GXfA1n7j7GeluqGrjz6T1/ILvrL2wdjPb2y2z/ESKWSLuJ+ebcd/XdzAEhO7fLt5kP2/+ylHfsS3dCVfqvkUdm5S6MzH3T0n38AyPGRwN17HcCe2/7eZP/vCh4Q1H1H/+mWznfoia5woQDQFrOq2bN92YU7AQ7QqltuOqIxNPiRxuDg6w8eOu344cHS4M7yUGnGy8ayX3W7Hr09PeCjJ994dvCGv72r1z7TQYO/fPBRC3ceadPN32C5ccLP7vrKmu3TQ+nV8+mFQundHN+67uJLnuyij9G1IwCzDQD3RJsq5fV2rOwDQBT9RY3hoc9NL1xwwfThL1leKu8p9o/b77vNkh7+bKf32gfaMT1Yum/Hwbba7vGWZnvaxEXXXL2mtOfJqP8zwsCUADAnU82avV+zOgUwVqulV6pu0Omzd953vv2Hk8sOeWL3S5Z+YPqgRc8UfwD2Kb3BM72a+X9EuyvCwD/LdUFHKpX0xZ7b9Wgbxuv1iZYFgKbcrgNYOlqtHpvdUf9f3PyGlXfevnX3YYf++5kFw25BApi/49NIQISA26P9wwyXb0UpvxHCWdfquQQA1wHs76j/tjWX7j5s6e3TixYeYr8FaJlfjfaDCAG5PaGza8//90IAyOZOgPO+++fjcdR/ZWNw0K1HAK2X3pi6JkLA+wSA4gNAjrcCZtH5ceT/kd3LDvmA8/wAbZUuRL8qQsBbHIQeeK2eSwB4MNo2AeC5Vv3FzSsnly39tOIPUFgISNcFHK8GvcC2Zq1ubQAYq9XSfdDrM/uwJ4xWqx270G7VLTcNTS5dcn1jcED1ByjOS6J9NUJAx065jlQqi2JyXGb9sn68Xp/1M0vm2nm5XQeQkuBJnZp5Y3ioPrNwwWL7IkDhTov2Lzs4/5OjDWbWJ3Oq0XMNAK4D+Puj/+WThyz5dfsgQMd84qJrru7UbXhdff6/F0YAOrYSZhYMf6ExNDho/wPomKOifaCfDj47OQLgWQBPB4CFC86x7wF03LsEgAICwFitlh5j/7N+DwCrbrnpxOnFCw+13wF03BsvuubqwwWA0s/G6/U5vWpmPldQ5jYKcPRotXpYkTNsDA99xD4HkIVUx84vcoYjlUoKHLm9cXLdfDqu2wNA4UmsMThwsn0OIBtFPxOg64f/BYD5BoCBgeX2N4BsHCUAFBMAcrwVsNA7ASIALLO/AQgAGZlzbZ5PALg32lQ/jwCUBgYW2d8AslH0Rdm5PQNgqlmb2xsAxmq13TH5cWYf/tTRarW4x/HOzOywvwFk47GiZjRSqaS6eUpmn//H4/X67iJGAJLcTgMcHO0VRc2sPDPzhP0NIBubCpzXimgHZfb551WT5xsA+vqJgOXpmU32N4BsPFzgvHriAsBeCwCFrZTy1PSN9jeAbHynFw82BYAcA8D09BdKjYZdDqDz0rnv24wAFBQAxmq1B2OyNbMOKCyVrT575WODuyYet98BdNx3r7v4kiIvzM4tAGwdr9cfLHIEIMdRgFePVquF3Z43uHOibr8D6Lg/KmpGI5XK4pgc1wtH/70WANKreU8qamblqenqwO7JSfseQMdsiHZDgfM75QDrpgDQRkWeBpga2r7zy/Y/gI4Zu+7iS2YKnF/PnP8/0ACQ4yOBC105N77pnJHBHbt+bh8EKNzXo/gXfRDWE48AbkUAWN/vASAZ2r7j3PL09Ix9EaAw6cl/H+jAfHO8BXDetXjeAWCsVtsSk4cy64jCV87qs1auX/D4tg+WZ2bcFwjQftui/dM4+u/E6GtuIwAPjdfrWzoxApDkdhrgyNFq9WWFh4Azz71q+PGtHyrLAADtlG73Oz+K//eLnvFIpZJeA5/bq+APqAYfaADo6wcCPduNZ5z7Xxf84onfGJiccmcAQOv9JNrZUfy/06H599QFgL0aADp2jmb1med+afjxrccOPbnjJ/ZVgJZJF/u9Lor/X/VjbWlXDR4yAtDiEHD2ykdictyqW9e8b3rxwk9NLVl8pH0XYM7SOdU/i1aLwv/X/V5bcgwA90ZLQ97DAsALRgNSYv3yqltvfsfM8PCHZxYO/9L0woWHlMr2aoC9mI52R7Sbon0tCv9dasteTTZr8LyVGwf4UpvRanVtZh2zPdrSsVotu1vzzrttzaW7X7rsSvs4uTh03QadQE7OiqJ/a24LNVKppNPlT0ZbnNPR/3i9fkCnJVrxSMPcTgMsibYixy273CjtsH8D7NVEpst1XGbFvyW1txUBoO+fCAhAT+upJwD28ghA8lrbKwA9HACyGAFwJwAAAkC/BYCxWi09DniLlQVAj8ptVHnLeL1+wI/ib9V7jXMbBThutFpdbJsF4ECMVCoHlfK7sLwlNbdXA0D6XKfYdAE4QKe0sFYKAAVxGgCAXqwlAoAAAECb9dw7APohALgVEAAjAO0MAGO12taYPGilASAAtNWD4/X61pxGAHIcBVg+Wq0ut+0CMB8jlcoRMTm8F4/+Wx0AcnwksNMAAPRSDWlZre3lEYDEaQAAeqmGZDkCIAAAIAD0YQD4cbTdmXWUUwAA9EoA2N2stXkFgLFabSom92TWWSePVqsDtmEA5mKkUhks5fdE2XvG6/WpHEcAktxOA6T3ARxnUwZgjlLtWJTZMrW0xvZ6AEicBgBgrnr6/H87AsBaKxEAAaAtWlpj+2EEQAAAYK569h0AbQkAY7Xaxpg8biUCYASgpR4fr9c35jwCkOMowIrRanWJbRmA2RipVFLNWNHLR//tCgC5XQdQLuV3KwcA+TqlWTty0vLa2g8jAInTAAB0c83oihEAFwIC0M16/hbApNxoNFr6B0er1UNi8kQpv+GTjtt89MtLG844XUeQjUPXbdAJ5LM9/uDO0tDWrTrihVKhPnS8Xt+W9QjAWK2WFvCn1hcAtMRPW1382xIAmtZZXwCQb00VAABAAGiZtdYXAORbU40AAIARgJb5f9EmrDMAOCATzZraHQFgrFabjsk91hsAHJB7xuv16W4aAUhcBwAAmdbSdgYA1wEAQKa1VAAAAAGgpZwCAIBMa2nbAsBYrfZITDZbdwAwL5vH6/VHunEEIHEaAAAyrKECAAAIAC3nOgAAyLCGGgEAACMALbc+WsM6BIA5aTRraHcGgLFabXtM7rceAWBO7h+v17d38whA4jQAAGRWOwUAABAABAAAEABaw62AAJBZ7SwiANwXbZd1CQCzsqtZO7s7AIzVatMxudv6BIBZuXu8Xp/uhRGA5F7rEwDyqZlFBYBJ6xMA8qmZA/oZAPqPAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAMCuNImYy1Ked+7+jfbromf7i5csviMnv2rYBXmjiiCNGhrZuXd+BWX802jsz6oqyANA+m8Zqte8XPdNVt6451S4O8OJ2HfMP1v/J5ZcX/t08Uqls6sf+dgoAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAyMaQL+lt5anpGL/S1v9MFfe0IXSAA0KfWnHb6oF7oY6edrg/62EXXXN3QC/3LKQAAEAAAAAGgdaYz+9wdWp7G9qx6oWH0D/rc7syWZ6K/akJnl6eoAJDbhUY/71DBvSur9Dc1PeX7D/raw5ktzyN9VRM6XDOLCgCP2uhTACjdndNRd3l6eqfvPxAAMpEOSDbph+JqpgBQoNVnr5yKopvNUFN5euYJ338gAORS9K67+JIZ/dB7AeDuzDp3fadmPDgxmU0YKk9O/dD3H/S172e0LHf0Y03oZM0sJACM1WprY/JAJh37N7E8f9upmQ/snvx6LlvYwOTU53z/QV/7Pxktyw2dmvF4vZ5qwt9k0g8PxPKs7aURgI6u3Oe5vsNH3f+llMFlABFEdq8+6603+/6D/nXdxZdsiMm9GSxKOjW6up9rQydqZZEB4NpMOvdrnZz56rNXbhjcubPjV5wO7tx1q68/IHwlg2VYHWFkcz/Xhk7UysICwFit9pcx+VanOzaWo+O34g3t2PWbnZx/ev7/wMTkr/neA8KVpc7dfpekC/8+1ulOGK/X78rgQPVbsRx/2YsjAMnlzZXdCekWk9Ec9rbVZ771+qEnd2zo1PyHt23/k9Vnr9xUAvpeHHmnB5T95w4uwpdjGXK5CG+0WSs6FYQuL3KGhQaAOPpeF5MvdqhzPx/z35DLTje4c9d7y9PFv4lvcNfu7eXJqX/law94lvS9/NcdmO9j0aq5dEIcfaca8flOrYOY/7qeDQBNvx2t6NvPvhftozntbavPWvnD4S3bPlzkg4HKU9PTQ9uefHMc/ef2+E+gs6MA6SK8C0vF3g8/Ge1dMe/c7sH/aLNmFOmHzdpYqMIDQByF72xuaEUNQT8U7Z0x34ncdrobzzj3cwu2bCvmApwIGjGvkRQ8fN0BLxICUiF+Z7RdBc3yt2Ket+XWD3EUPtHsh4cKmmWqhRfGfAt/MmtH3gbYvA//glL7n3e8Mdr5Mb+f57rT3fimc359eMu2r7Xz1sDy9ExjwS+euHz1med+ydccsI8Q8FcxeXu0x9s4mzTacGnMazzXfohinGrG+c0a0k6pBl7QfA5B4cqNDj6bfrRaPba050EUr23Dn09Plbowiv+j3bDjnXfbmo9OLlv6qcbgQLmlCW/35MTwE0+ev/qst37b1xswGxddc/Vxze/mk1r8p1OweE8U/zXd0A8jlcqRpT3PBzi9DX9+bbP4P9ipzzfQyc6N4pw++Buj/XGp1LJj4JQu/1u0M7ul+D81EnDGuZ+Oo/Szh7bvbM0yR7Ab2rb9R8Nbtr1K8QfmOBJwX0zeEC09LXSyRX82PeDm9d1S/JsjAen7+MxmTWnVe1wazZr3xk4W/46PADxvNOAfxeT3or3tAP5MSqy/G4X/7m7e+VbdtubfTC1Z/PvTixYePJ/fjxDx0OCOXe+Lwn+LrzLgAEcDXhWTT0Z7d6oZ8/gT6X0Dl0fh/24398NIpXJys0ZdcAB/5pupRkXhz+Kxw9kEgGcFgTTU8p7SngsFV8ziV9JtG2mI5qtR+H/QSzveqltvvnBmeOjfzixa+CvTCxcctK+j/cGdE5sHJ3avKU9N/0EU/jt9bQEtDgJHx+Qdze/ms6IN7+P/fmfze/n6jO7xb1UQeP2zatSrZ/Er9z9do6Lw35HTZ8kuADwvDLwmJqkd1WwvLe25aOLhZvtRFP17+mHnW3XLTS8vlcuvaQyUT4hpCka7yjONn0Txvzfa+tVnr9ziKwooKAwsismRz2oLSnteYZvaI1H0t/VDP0QYSNdInPasGnV4tM3PqlHrir63v2cCAADQHgO6AAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAdAEACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAc/f/AYnmS++qhM7oAAAAAElFTkSuQmCC",at=n.p+"static/media/cc.883bea09.png",ot=n.p+"static/media/delivery.c63ca6d5.png",st=n.p+"static/media/takeout.47a36a20.png",lt=n.p+"static/media/cash.99b68bb2.jpg",dt=n.p+"static/media/surplace.2e0aa439.png",ut=n.p+"static/media/hs.dcadad91.png",jt=n(127),bt=function(e){var t=e.product,n=(e.setAlert,e.order_id,e.setconfirmed,e.confirmed,q().t,Object(h.c)()),c=Object(r.useState)(1),a=Object(o.a)(c,2),s=(a[0],a[1],Object(r.useState)(!1)),l=Object(o.a)(s,2),d=(l[0],l[1],Object(r.useState)(void 0)),u=Object(o.a)(d,2),j=(u[0],u[1],Object(r.useState)(!1)),O=Object(o.a)(j,2),m=O[0],p=O[1];Object(r.useEffect)((function(){console.log(t)}),[]);var x,v=localStorage.getItem("currency");return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(jt.a,{}),Object(W.jsxs)("div",{className:"item_container",onClick:function(e){return p(!0)},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:t.name.substring(0,21)})}),1==t.active?Object(W.jsxs)("div",{children:[Object(W.jsx)("img",{src:t.image,className:"prod_img"}),Object(W.jsxs)("div",{className:"price",children:["".concat(t.price.toFixed(2)),(x="<i>".concat(v,"</i>"),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:x}}))]})]}):Object(W.jsx)("img",{src:ut,className:"prod_imgs"})]}),Object(W.jsxs)(ge.a,{show:m,onHide:function(){return p(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Gestion de stock"})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return p(!1)},children:"Retour au tables"}),1==t.active?Object(W.jsx)(b.a,{variant:"danger",onClick:function(){return p(!1),void _.a.post("http://192.168.1.166:5000/api/resetwarehouse",{prod_id:t.id}).then((function(e){console.log(e.data),n(je({id:t.id})),Q.a.fire({icon:"success",title:"produit mis ajours!",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"}):Object(W.jsx)(b.a,{variant:"primary",onClick:function(){return p(!1),void _.a.post("http://192.168.1.166:5000/api/bringwarehouse",{prod_id:t.id}).then((function(e){console.log(e.data),n(je({id:t.id})),Q.a.fire({icon:"success",title:"produit mis \xe0 jours !",showConfirmButton:!1,timer:1500})}))},children:"Disponible"})]})]})]})},ht=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=localStorage.getItem("username")||"",a=localStorage.getItem("user_id"),u=Object(r.useState)((new Date).toLocaleTimeString("fa-IR")),j=Object(o.a)(u,2),b=(j[0],j[1],Object(r.useState)({show:!1,msg:"",type:""})),O=Object(o.a)(b,2),m=(O[0],O[1]),p=(localStorage.getItem("caisse_id"),Object(h.d)((function(e){return e.data.coupons})),Object(h.d)((function(e){return e.data.tables})),Object(r.useState)({})),x=Object(o.a)(p,2),v=(x[0],x[1],Object(r.useState)(!1)),f=Object(o.a)(v,2),g=(f[0],f[1],Object(r.useState)(!1)),A=Object(o.a)(g,2),y=(A[0],A[1],Object(r.useState)("")),C=Object(o.a)(y,2),N=(C[0],C[1],Object(s.g)()),k=Object(s.f)(),w=(N.id,q().t),S=Object(h.c)(),I=Object(h.d)((function(e){return e.data.products})),T=Object(h.d)((function(e){return e.data.categories})),P=Object(r.useState)(""),E=Object(o.a)(P,2),B=E[0],D=E[1];Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/products",{user_id:a,category:0}).then((function(e){S(se({products:e.data.products})),S(le({nSteps:e.data.menuSteps}))})),_.a.post("http://192.168.1.166:5000/api/categories",{user_id:a}).then((function(e){return S(oe({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),console.log(T)}),[]);var L=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),k("/")};localStorage.getItem("currency").replace(/;/g,"").replace(/&/g,"");return Object(W.jsxs)("div",{className:"navbar",children:[Object(W.jsx)(Z.a,{style:{height:"60px"},variant:"warning",children:Object(W.jsxs)(X.a,{className:"history-navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){return k("/main")},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return k("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),w("cashier")]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return L()},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(W.jsx)(l.a,{icon:d.G,style:{marginRight:"5px"}}),w("disconnect")]})})]}),Object(W.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:i}),Object(W.jsx)(l.a,{onClick:function(){return L()},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(W.jsxs)("div",{className:"client-search",children:[Object(W.jsx)("label",{children:Object(W.jsx)(l.a,{icon:d.E})}),Object(W.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return c(e.target.value)},value:n})]})]})}),Object(W.jsxs)("div",{className:"backoffice",children:[Object(W.jsx)("div",{className:"B_header",children:Object(W.jsxs)("select",{name:"",id:"b_office_select",onChange:function(e){D(e.target.value)},children:[Object(W.jsx)("option",{value:"",children:"Voirs tous"}),T.map((function(e,t){return Object(W.jsx)("option",{value:e.id,children:e.name},t)}))]})}),Object(W.jsx)("div",{className:"all-produc-menus",children:0!=I.length?Object(W.jsx)("div",{className:"modal-bodyss",children:I.filter((function(e){return""!=B?e.cat_id==B:e.cat_id})).filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.code.includes(n)})).map((function(e,t){return Object(W.jsx)(bt,{setAlert:m,product:e})}))}):Object(W.jsxs)("div",{className:"loadingProd",children:[Object(W.jsx)("h1",{children:"Chargement des produits..."}),Object(W.jsx)("img",{src:et,alt:"loading"})]})})]}),Object(W.jsx)(tt,{})]})},Ot=n(750),mt=n.p+"static/media/bgg.5f53063d.png",pt=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},xt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.shouldPreventDefault,i=void 0===c||c,a=n.delay,s=void 0===a?300:a,l=Object(r.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(r.useRef)(),h=Object(r.useRef)(),O=Object(r.useCallback)((function(t){i&&t.target&&(t.target.addEventListener("touchend",pt,{passive:!1}),h.current=t.target),b.current=setTimeout((function(){e(t),j(!0)}),s)}),[e,s,i]),m=Object(r.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b.current&&clearTimeout(b.current),n&&!u&&t(),j(!1),i&&h.current&&h.current.removeEventListener("touchend",pt)}),[i,t,u]);return{onMouseDown:function(e){return O(e)},onTouchStart:function(e){return O(e)},onMouseUp:function(e){return m(e)},onMouseLeave:function(e){return m(e,!1)},onTouchEnd:function(e){return m(e)}}},vt=function(e){var t,n,c=e.handleUpdateOrder,i=e.orderTo,a=e.setOrderTo,s=e.setshowRemise,u=e.calcOrder,h=(localStorage.getItem("currency"),Object(r.useState)(!0)),O=Object(o.a)(h,2),m=(O[0],O[1],Object(r.useState)("")),p=Object(o.a)(m,2),x=p[0],v=p[1],f=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 {bksp}"]),g=Object(o.a)(f,2),A=g[0],y=(g[1],Object(r.useRef)()),C=Object(r.useState)(0),_=Object(o.a)(C,2),N=_[0],k=_[1],w=Object(r.useState)(0),S=Object(o.a)(w,2),I=S[0],T=S[1],P=Object(r.useState)(0),E=Object(o.a)(P,2),B=E[0],D=E[1],L=Object(r.useState)(!1),F=Object(o.a)(L,2),R=F[0],H=F[1],q=Object(r.useState)(""),z=Object(o.a)(q,2),M=z[0],G=z[1],K=function(){var e=JSON.parse(JSON.stringify(i.order)||{}),t=0;if(1==R)t=0,console.log("offert",t,e);else if(N>0){var n,c;t=(null===(n=i.order)||void 0===n?void 0:n.price)-(null===(c=i.order)||void 0===c?void 0:c.price)*N/100,console.log("perc",t)}else if(I>0){var r;t=(null===(r=i.order)||void 0===r?void 0:r.price)-I,console.log("remise",t)}else B>0&&(t=B,console.log("libre",t));console.log("nothing"),e=Object(Y.a)(Object(Y.a)({},e),{},{finalPrice:t}),a(Object(Y.a)(Object(Y.a)({},i),{},{order:e}))};Object(r.useEffect)((function(){K()}),[R,I,N,B]);var V=function(e){var t=e.e,n=(e.index,t.target.value);v(n),y.current.setInput(n)};return Object(W.jsxs)("div",{className:"remise_modal",children:[Object(W.jsxs)("div",{className:"uper",children:[Object(W.jsx)("h3",{children:"Remise"}),Object(W.jsx)(l.a,{style:{position:"absolute",top:"5px",right:"8px"},onClick:function(){return s(!1)},icon:d.I,size:"2x"})]}),Object(W.jsxs)("div",{className:"con",children:[Object(W.jsxs)(Ue.a,{style:{display:"flex"},children:[Object(W.jsx)(Xe.a.Label,{className:"remise_input",children:Object(W.jsx)("b",{children:"Remise (%)"})}),Object(W.jsx)(Xe.a.Control,{onChange:function(e){return V({e:e,index:5})},className:"remise_input",value:"".concat(N," %"),onFocus:function(){G("remisePerc"),y.current.setInput("")}})]}),Object(W.jsxs)(Ue.a,{style:{display:"flex"},children:[Object(W.jsx)(Xe.a.Label,{className:"remise_input",children:Object(W.jsx)("b",{children:"Remise (\u20ac)"})}),Object(W.jsx)(Xe.a.Control,{onChange:function(e){return V({e:e,index:5})},className:"remise_input",value:"".concat(null===I||void 0===I?void 0:I.toFixed(2)," \u20ac"),onFocus:function(){G("remise"),y.current.setInput("")}})]}),Object(W.jsxs)(Ue.a,{style:{display:"flex"},children:[Object(W.jsx)(Xe.a.Label,{className:"remise_input",children:Object(W.jsx)("b",{children:"Montant libre (\u20ac)"})}),Object(W.jsx)(Xe.a.Control,{onChange:function(e){return V({e:e,index:5})},value:"".concat(null===B||void 0===B?void 0:B.toFixed(2)," \u20ac"),className:"remise_input",onFocus:function(){G("libre"),y.current.setInput("")}})]}),Object(W.jsx)(Ue.a,{style:{display:"flex",marginTop:"1rem"},children:Object(W.jsxs)(b.a,{variant:R?"success":"danger",onClick:function(){H(!R),k(Number(x)),T(0),D(0),K()},style:{width:"150px"},children:[Object(W.jsx)(l.a,{icon:R?d.l:d.I,style:{marginRight:"2.2rem"}}),"Offert !"]})}),Object(W.jsx)(Ue.a,{style:{display:"flex",marginTop:"0.5rem"},children:Object(W.jsxs)(b.a,{onClick:function(){return c()},variant:"success",style:{width:"150px",height:"80px"},children:[Object(W.jsx)(l.a,{icon:d.B,style:{marginRight:"1rem"}}),"Confirmer"]})})]}),Object(W.jsxs)("div",{className:"off",children:[Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:"Prix initial : "+(null===(t=i.order)||void 0===t?void 0:t.price.toFixed(2))+"\u20ac"})}),Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:"Nouveau Prix : "+(null===(n=i.order.finalPrice)||void 0===n?void 0:n.toFixed(2))||!1})})]}),Object(W.jsx)(j.a,{theme:"hg-theme-default hg-layout-default myTheme3",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn2",buttons:"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return y.current=e},layoutName:"default",layout:{default:A},onChange:function(e){var t;switch(v(e),console.log("Input changed",e),M){case"remisePerc":Number(e)>100?Q.a.fire({icon:"warning",title:"faut etre inferieur a 100%",showConfirmButton:!1,timer:1500}):(k(Number(e)),console.log(N),T(0),D(0),H(!1));break;case"remise":Number(e)>(null===(t=i.order)||void 0===t?void 0:t.price)?Q.a.fire({icon:"warning",title:"faut etre inferieur a ".concat(u(i.order).price," \u20ac"),showConfirmButton:!1,timer:1500}):(k(0),T(Number(e)),console.log(I),D(0),H(!1));break;case"libre":k(0),T(0),D(Number(e)),console.log(B),H(!1)}v("")},onKeyPress:function(e){console.log("Button pressed",e)}})]})},ft=function(e){var t,n,c,a,u,j,O,m,p,x,v,f,g,A,y,C=e.selectedTable,N=e.setconfirmed,k=e.confirmed,w=Object(h.d)((function(e){return e.data.ping})),S=localStorage.getItem("username"),I=Object(s.f)(),T=q().t,P=Object(h.c)(),E=C.nbr,B=C.nbrCouverts,D=Object(r.useState)(0),L=Object(o.a)(D,2),F=(L[0],L[1],Object(r.useState)(1)),R=Object(o.a)(F,2),H=R[0],z=R[1],M=Object(h.d)((function(e){return e.data.nSteps})),G=Object(r.useState)(0),K=Object(o.a)(G,2),V=K[0],Z=K[1],X=Object(h.d)((function(e){return e.order.selectedTable.id})),U=Object(h.d)((function(e){return e.order.client})),J=Object(h.d)((function(e){return e.order.remarque})),$=Object(s.g)().order_id,ee=Object(h.d)((function(e){return e.order.checkoutData||[]})),te=Object(r.useState)(0),ne=Object(o.a)(te,2),ce=ne[0],re=ne[1],ie=Object(h.d)((function(e){return e.order.orders||[]}));console.log("order carte menu",ie);var ae=Object(r.useState)([]),oe=Object(o.a)(ae,2),se=oe[0],le=oe[1],de=Object(r.useState)({order:{},key:0}),ue=Object(o.a)(de,2),je=ue[0],be=ue[1],he=Object(r.useState)(!1),Oe=Object(o.a)(he,2),pe=Oe[0],xe=Oe[1],ve=Object(r.useState)(!1),Ae=Object(o.a)(ve,2),ye=Ae[0],Ce=Ae[1],_e=Object(h.d)((function(e){return e.data.tva_mode})),Te=Object(h.d)((function(e){return e.order.orderType})),Pe=Object(r.useState)(0),Ee=Object(o.a)(Pe,2),De=Ee[0],Le=Ee[1],Fe=Object(h.d)((function(e){return e.data.products})),Re=localStorage.getItem("user_id"),He=localStorage.getItem("username"),qe=Object(r.useState)({}),ze=Object(o.a)(qe,2),Qe=ze[0],We=ze[1],Me=ee.filter((function(e){return e.order_id==$}))[0];Object(r.useEffect)((function(){var e;void 0!=$&&(console.log(Me),null===Me||void 0===Me||null===(e=Me.orderItems)||void 0===e||e.map((function(e){P(Ne({order:e}))})))}),[]);var Ge=function(e){return Fe.find((function(t){return t.id==e}))||{}},Ke=function(e){var t;t=null!==e&&void 0!==e&&e.finalPrice?e.finalPrice:0==(null===e||void 0===e?void 0:e.finalPrice)?0:e.price;var n=e.tva;return"sur place"==Te||"livraison"==Te?n=_e.find((function(e){return"sur place"==e.nom})).valeur:"emporter"==Te&&(n=_e.find((function(e){return"emporter"==e.nom})).valeur),De>0&&(n=De),e.extras&&e.extras.length&&e.extras.map((function(e){console.log(e.price,e.default_quantity),t+=e.price*e.default_quantity})),e.stepItems&&e.stepItems!={}&&Object.keys(e.stepItems).map((function(n){e.stepItems[n].map((function(e){t+=e.price}))})),1==e.offert?0:{dbPrice:t,price:t*e.qt,tva:t*e.qt*n/100,item_tva:n}};Object(r.useEffect)((function(){var e=JSON.parse(JSON.stringify(ie)||[{}]);le(e),ie.map((function(e){if(1==e.is_alcool){var t=_e.find((function(e){return"alcool"==e.nom})).valeur;console.log(t),Le(t)}}))}),[ie]);var Ze,Xe,Ue,Je,Ye,$e,et,tt,nt=function(){var e=0,t=0,n=[];return se.map((function(c){e+=Ke(c).price,t+=Ke(c).tva,n=dt})),{tot:e,tva:t,tvas:n}},ct=function(e){var t=e.key,n=e.order;if("+"==e.sign){var c=Object(Y.a)(Object(Y.a)({},n),{},{qt:n.qt+1});console.log(c),P(ke({key:t,order:c}))}else if(1==n.qt)P(we({key:t}));else{var r=Object(Y.a)(Object(Y.a)({},n),{},{qt:n.qt-1});P(ke({key:t,order:r}))}},rt=function(){return xe(!1)},it=function(e){var t=e.extraKey,n=e.sign,c=JSON.parse(JSON.stringify(je.order)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),be(Object(Y.a)(Object(Y.a)({},je),{},{order:c}))):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),be(Object(Y.a)(Object(Y.a)({},je),{},{order:c})))},at=function(){P(ke({key:je.key,order:je.order})),xe(!1),yt(!1)},ot=new Date,st=ot.toISOString().substr(0,10),lt=ot.getHours()+":"+ot.getMinutes(),dt=[];Ue=0,Xe=0,Ze=0,Je=0,Ye=0,$e=0,null===ie||void 0===ie||ie.map((function(e){e.is_alcool?(Ze=+e.qt+Ze,$e=+e.price,console.log(Ze)):e.is_conserved?(Xe=+e.qt+Xe,Je=+e.price):(Ue=+e.qt+Ue,Ye=+e.price),et=Ue*(Ye/1.1),tt=Ze*($e/1.2);var t={name:"5.5 %",count:Xe,totaltcc:Je,amount:(Xe*(Je/1.055)).toFixed(2)},n={name:"10 %",count:Ue,totaltcc:Ye,amount:et.toFixed(2)},c={name:"20 %",count:Ze,totaltcc:$e,amount:tt.toFixed(2)};dt[0]=t,dt[1]=n,dt[2]=c}));var ut=function(){var e={table:E||"",server:S,from_kiosk:!1,client_id:null===U||void 0===U?void 0:U.id,id:$||"",message:J||(null===U||void 0===U?void 0:U.message)||"aucune",customer_name:(null===U||void 0===U?void 0:U.name)||"",customer_company:(null===U||void 0===U?void 0:U.company)||"",code1:(null===U||void 0===U?void 0:U.code1)||"",code2:(null===U||void 0===U?void 0:U.code2)||"",interphone:(null===U||void 0===U?void 0:U.interphone)||"",etage:(null===U||void 0===U?void 0:U.etage)||"",table_number:X||0,customer_tel:(null===U||void 0===U?void 0:U.phone)||"",customer_adress:null!==U&&void 0!==U&&U.address?"".concat(null===U||void 0===U?void 0:U.address," - ").concat(null===U||void 0===U?void 0:U.city," - ").concat(null===U||void 0===U?void 0:U.post,"\n      code 1 : ").concat((null===U||void 0===U?void 0:U.code1)||""," | code2 : ").concat((null===U||void 0===U?void 0:U.code2)||"","\n       interphone : ").concat((null===U||void 0===U?void 0:U.interphone)||""," | etage : ").concat((null===U||void 0===U?void 0:U.etage)||""):"",status:"pending",orderType:Te||"sur place",paymentType:"Especes",totalPrice:nt().tot,taxPrice:nt().tva,tvas:dt,orderItems:[],date:(null===U||void 0===U?void 0:U.date)||st,time:(null===U||void 0===U?void 0:U.time)||lt};se.map((function(t){e.orderItems.push(Object(Y.a)(Object(Y.a)({},t),{},{price:t.finalPrice||Ke(t).dbPrice}))})),$?(re($),_.a.post("http://192.168.1.166:5000/api/updateorder",{order:e,user_id:Re}).then((function(t){console.log(t.data),_.a.post("http://192.168.1.166:5000/api/printOrder",{kitchen:!0,user_id:Re,order:Object(Y.a)(Object(Y.a)({new:!0},e),{},{table_number:e.table||"",order_id:$,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),P(Be({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:X||Me.table_number||(null===U||void 0===U?void 0:U.id),order_id:$,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})})),console.log({order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:$,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})})}))):Qe.order_id?(re(Qe.order_id),_.a.post("http://192.168.1.166:5000/api/updateorder",{order:e,user_id:Re}).then((function(t){console.log(t.data),_.a.post("http://192.168.1.166:5000/api/printOrder",{kitchen:!0,user_id:Re,order:Object(Y.a)(Object(Y.a)({new:!0},e),{},{table_number:e.table||"",order_id:Qe.order_id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),P(Be({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:X||(null===Me||void 0===Me?void 0:Me.table_number)||(null===U||void 0===U?void 0:U.id),order_id:Qe.order_id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})})),console.log({order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:Qe.order_id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})})}))):_.a.post("http://192.168.1.166:5000/api/orders",{client:U,order:e,how_paid:"tout",user_id:Re}).then((function(t){re(t.data.id),_.a.post("http://192.168.1.166:5000/api/printOrder",{kitchen:!0,user_id:Re,order:Object(Y.a)(Object(Y.a)({new:!1},e),{},{tvas:dt,table_number:E||"",order_id:t.data.id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),P(Se({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:X||(null===U||void 0===U?void 0:U.id),order_id:t.data.id,Date:(new Date).getTime(),nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B})}),We(Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===U||void 0===U?void 0:U.nbrCouverts)||B}))})).catch((function(e){return console.log(e)}))},jt=function(){0!=ce&&(I("/checkout/"+ce),P(Ie()))},bt=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},ht=localStorage.getItem("currency"),pt=xt((function(){console.log("longpress is triggered")}),(function(){console.log("click is triggered")}),{shouldPreventDefault:!1,delay:500}),ft=Object(r.useState)(!1),gt=Object(o.a)(ft,2),At=gt[0],yt=gt[1];return Object(W.jsxs)("div",{className:"cart-menu",children:[C.nbr?Object(W.jsx)("h6",{className:"cart-menu-table-nbr",children:"table ".concat(E," - ").concat(B," ").concat(T("couverts"))}):U.name?Object(W.jsx)("h6",{className:"cart-menu-table-nbr",children:"Client ".concat(U.name," - ").concat(U.type,"\n          ")}):$?Object(W.jsxs)("b",{children:["Commande # ",$]}):Object(W.jsx)("br",{}),Object(W.jsxs)(fe.a,{className:"ttt2",children:[Object(W.jsx)("thead",{className:"tbds2",children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:T("article")}),Object(W.jsx)("th",{children:"Qte"}),Object(W.jsx)("th",{children:T("price")})]})}),Object(W.jsx)("tbody",{className:"scro2 ",children:null===se||void 0===se?void 0:se.map((function(e,t){var n,c,r,i,a,o,s,u,j,b,h,O;return Object(W.jsxs)("tr",{className:"catt",style:{backgroundColor:"true"==e.new||1==k||1==ye?"#55efc4":"transparent",color:"true"==e.new||1==k?"white":"black"},children:[Object(W.jsxs)("td",{className:"mytd",children:[Object(W.jsx)("p",{onClick:function(){be({order:e,key:t}),yt(!0)},className:"mytd_order-name",children:e.name}),e.extras&&e.extras.length?e.extras.filter((function(e){return e.default_quantity>0})).map((function(e){return Object(W.jsxs)("span",{className:"boba",children:[e.title,"-"]})})):"",e.stepItems&&Object.keys(e.stepItems).length?Object(W.jsx)("div",{children:Object.keys(e.stepItems).map((function(t){return e.stepItems[t].map((function(e){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"#ff6b6b"},children:["-",e.name]})}))}))}):e.is_supp?Object(W.jsx)("div",{className:"order_with_supp_item",children:null===e||void 0===e?void 0:e.suppSelected.map((function(t,n){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"#ff6b6b"},children:["- ",null===e||void 0===e?void 0:e.suppSelected.at(n).name]},t)}))}):null!==e&&void 0!==e&&e.slots?Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(n=Object.entries(e.slots)[0])||void 0===n||null===(c=n[1])||void 0===c||null===(r=c.products)||void 0===r||null===(i=r.filter((function(e){return e.checked}))[0])||void 0===i?void 0:i.name}),Object(W.jsx)("br",{}),Object(W.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(a=Object.entries(e.slots)[1])||void 0===a||null===(o=a[1])||void 0===o||null===(s=o.products)||void 0===s||null===(u=s.filter((function(e){return e.checked}))[0])||void 0===u?void 0:u.name}),Object(W.jsx)("br",{}),Object(W.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(j=Object.entries(e.slots)[2])||void 0===j||null===(b=j[1])||void 0===b||null===(h=b.products)||void 0===h||null===(O=h.filter((function(e){return e.checked}))[0])||void 0===O?void 0:O.name})]}):""]}),Object(W.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",height:"30px"},children:[Object(W.jsx)(l.a,{icon:d.x,color:"#ff6b6b",onClick:function(){1==k||1==ye||ct({order:e,key:t,sign:"-"})}}),Object(W.jsx)("p",Object(Y.a)(Object(Y.a)({className:"mytd_order-qty",onClick:function(){be({order:e,key:t}),xe(!0)}},pt),{},{children:Object(W.jsx)("b",{children:e.qt})})),Object(W.jsx)(l.a,{icon:d.C,color:"#ff6b6b",onClick:function(){return ct({order:e,key:t,sign:"+"})},variant:"success"})]}),Object(W.jsx)("td",{style:{height:"30px"},children:Object(W.jsxs)("p",{className:"mytd_order-qty",style:{fontWeight:"bold",display:"flex"},children:[Ke(e).price.toFixed(2)," ",bt("<i>".concat(ht,"</i>"))]})})]})}))})]}),Object(W.jsxs)("div",{style:{width:"25%",height:"200px",backgroundColor:"#f1f1f1",position:"absolute",bottom:"0"},children:[Object(W.jsx)("div",{style:{borderBottom:"1px solid white",display:"flex",alignItems:"center",position:"relative",backgroundImage:"url(".concat(mt,")"),objectFit:"contain",width:"100%",height:"50px",paddingTop:"5px"},children:Object(W.jsxs)("h2",{className:"dig",style:{zIndex:"999",color:"#00b894",display:"flex",paddingLeft:"1rem",fontFamily:"DS-DIGIT !important"},children:["Total : ".concat(nt().tot.toFixed(2))," ",bt("<i >".concat(ht,"</i>"))]})}),Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)(b.a,{className:"cart_btn btn4",variant:1==k?"danger":"warning",onClick:function(){ie&&ie.length>0&&(1==k?(jt(),Ce(!0)):0==nt().tot?Q.a.fire({title:"Attention le montant de la commande est 0 \u20ac !"}):Q.a.fire({title:"confirmer la commande ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"confirmer",denyButtonText:"annuler"}).then((function(e){e.isConfirmed&&(ut(),Q.a.fire({icon:"success",title:"commande confirm\xe9e",showConfirmButton:!1,timer:1500}),N(!0))})),Ce(!0))},children:1==k?Object(W.jsxs)(W.Fragment,{children:[0==ce&&Object(W.jsx)(Ot.a,{animation:"border",variant:"light"})," ","Finir"]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(l.a,{icon:d.l})," Confirmer"]})}),Object(W.jsx)(b.a,{className:"cart_btn",variant:"success",onClick:function(){Q.a.fire({title:"Ouvrir la caisse pour :",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Faire la monnaie",denyButtonText:"Sans motif",cancelButtonText:"Annuler"}).then((function(e){console.log(e),e.isConfirmed?(_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:Re,user:He,faire:"pour Faire la monnaie",title:"Ouverture de tiroir",content:"ouverture de la caisse par le serveur"}),Q.a.fire({icon:"success",title:"Ouvert pour faire la monnaie",showConfirmButton:!1,timer:1e3})):e.isDenied&&(_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:Re,user:He,faire:"sans motif",title:"Ouverture de tiroir",content:"ouverture de la caisse par le serveur"}),Q.a.fire({icon:"success",title:"Ouvert sans motif",showConfirmButton:!1,timer:1e3}))}))},children:T("tiroir")}),Object(W.jsx)(b.a,{className:"cart_btn",variant:"danger",onClick:function(){Q.a.fire({title:"Motif d'annulation ",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Aucun",denyButtonText:"Impay\xe9",cancelButtonText:"Fermer"}).then((function(e){if(e.isConfirmed){if($)_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:Me}).then((function(){return P(me(!w))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)({},Me)}),P(Be({order:Object(Y.a)(Object(Y.a)({},Me),{},{status:"rejected",timeRejection:lt,rejectedFrom:S,rejected:"Aucun"})}));if(Qe.order_id)_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:Qe}).then((function(){return P(me(!w))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)({},Qe)}),P(Be({order:Object(Y.a)(Object(Y.a)({},Me),{},{status:"rejected",timeRejection:lt,rejectedFrom:S,rejected:"Aucun"})}));_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:Re,user:He,faire:"Aucun",title:"Annulation",content:"Annulation de commande par le serveur"}),Q.a.fire({icon:"success",title:"Annul\xe9 (Aucun)",showConfirmButton:!1,timer:1e3}),P(Ie()),I("/main")}else if(e.isDenied){if($)_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:Me}).then((function(){return P(me(!w))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)({},Me)}),P(Be({order:Object(Y.a)(Object(Y.a)({},Me),{},{status:"rejected",timeRejection:lt,rejectedFrom:S,rejected:"Impay\xe9"})}));if(Qe.order_id)_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:Qe}).then((function(){return P(me(!w))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(Re),{order:Object(Y.a)({},Qe)}),P(Be({order:Object(Y.a)(Object(Y.a)({},Me),{},{status:"rejected",timeRejection:lt,rejectedFrom:S,rejected:"Impay\xe9"})}));_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:Re,user:He,faire:"Impay\xe9",title:"Annulation",content:"Annulation de commande par le serveur"}),Q.a.fire({icon:"success",title:"Annul\xe9 (Impay\xe9)",showConfirmButton:!1,timer:1e3}),P(Ie()),I("/main")}}))},children:T("cancel")})]})]}),Object(W.jsxs)(ge.a,{dialogClassName:"modal_body",show:pe,onHide:function(){rt(),z(1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:null===(t=je.order)||void 0===t?void 0:t.name})}),Object(W.jsxs)(ge.a.Body,{children:[Object(W.jsx)("p",{children:null===(n=je.order)||void 0===n?void 0:n.description}),null!==(c=je.order)&&void 0!==c&&c.extras&&null!==(a=je.order)&&void 0!==a&&a.extras.length?null===(u=je.order)||void 0===u?void 0:u.extras.map((function(e,t){return Object(W.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(W.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(W.jsx)(l.a,{onClick:function(){return it({extraKey:t,sign:"-"})},icon:d.x,color:"#ff6b6b"}),Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.default_quantity})}),Object(W.jsx)(l.a,{onClick:function(){return it({extraKey:t,sign:"+"})},icon:d.C,color:"#ff6b6b"})]}),Object(W.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.title})})]}),Object(W.jsxs)("td",{children:[" ",Object(W.jsx)("h5",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",bt("<i>".concat(ht,"</i>"))]})})]})]})})):null!==(j=je.order)&&void 0!==j&&j.isComp?Object(W.jsxs)(fe.a,{striped:!0,bordered:!0,children:[Object(W.jsx)("thead",{children:Object(W.jsx)("tr",{children:Object.keys((null===(O=je.order)||void 0===O?void 0:O.slots)||{}).map((function(e){return Object(W.jsx)("td",{children:e})}))})}),Object(W.jsx)("tbody",{children:Object.keys((null===(m=je.order)||void 0===m?void 0:m.slots)||{}).map((function(e){var t;return Object(W.jsx)("td",{children:null===(t=je.order)||void 0===t?void 0:t.slots[e].products.map((function(t){return Object(W.jsxs)("div",{style:{display:"flex",cursor:"pointer"},className:t.checked?"checked":"not",onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(je.order)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),be(Object(Y.a)(Object(Y.a)({},je),{},{order:c}))}({slotKey:e,id:t.id})},children:[Object(W.jsx)("img",{src:t.image,width:"30px",height:"30px"}),Object(W.jsxs)("div",{children:[Object(W.jsx)("h6",{children:t.name}),Object(W.jsx)("p",{children:t.description})]}),Object(W.jsxs)("p",{children:[t.price," ",bt("<i>".concat(ht,"</i>"))]})]})}))})}))})]}):(null===(p=je.order)||void 0===p?void 0:p.nsteps)>0?Object(W.jsxs)("div",{children:[Object(W.jsx)("h6",{children:Object(W.jsx)("b",{children:null===(x=M.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][H])||void 0===x?void 0:x.nom_etape})}),Object(W.jsx)("div",{className:"steps_cont",children:M.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][H].choice.map((function(e){var t,n;return Object(W.jsxs)("div",{className:null!==(t=je.order)&&void 0!==t&&null!==(n=t.stepItems[H])&&void 0!==n&&n.find((function(t){return t.id==e}))?"prod prod_sel":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log(n),Z(H);var c=JSON.parse(JSON.stringify(je.order)||{}),r=n.max_select;void 0==c.stepItems[H]&&(c.stepItems[H]=[],console.log(c)),c.stepItems[H].length<r&&(c.stepItems[H].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[H].push(Ge(t)))),c.stepItems[H].find((function(e){return e.id==t}))||(c.stepItems[H]=[],c.stepItems[H].push(Ge(t))),be(Object(Y.a)(Object(Y.a)({},je),{},{order:c})),console.log("done"),console.log(c)}({id:e,STP:M.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][H]})},children:[Object(W.jsx)("img",{src:Ge(e).image,alt:"",height:"70px",width:"70px"}),Object(W.jsxs)("h6",{style:{display:"flex"},children:[Object(W.jsxs)("b",{children:[" ",Ge(e).name," "]}),Object(W.jsx)("span",{children:Object(W.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",color:"#ff6b6b"},children:[Ge(e).price," ",bt("<i>".concat(ht,"</i>"))]})})," "]}),Object(W.jsx)("p",{children:Ge(e).description})]})}))}),(null===(v=je.order)||void 0===v?void 0:v.nsteps)>=H&&H>0?Object(W.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){H>1&&z(H-1)},children:"retour"}):"",(null===(f=je.order)||void 0===f?void 0:f.nsteps)>H&&H>0?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){var e;(null===(e=je.order)||void 0===e?void 0:e.nsteps)>H&&V==H&&z(H+1)},children:"suivant"}):"",(null===(g=je.order)||void 0===g?void 0:g.nsteps)==H?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){V==H&&at()},children:"finir"}):""]}):""]}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"danger",onClick:function(){P(we({key:je.key})),rt(),z(1)},children:"Supprimer"}),Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){rt(),z(1)},children:T("cancel")}),0==(null===(A=je.order)||void 0===A?void 0:A.nsteps)||null!==(y=je.order)&&void 0!==y&&y.isComp?Object(W.jsx)(b.a,{variant:"warning",onClick:function(){return at()},children:T("aded")}):""]})]}),At&&Object(W.jsx)(vt,{setshowRemise:yt,orderTo:je,setOrderTo:be,handleUpdateOrder:at,calcOrder:Ke})]})},gt=function(e){var t=e.setSelectedCategory,n=e.categories,c=e.selectedCategory;return Object(W.jsx)("div",{className:"cat_container",children:n.filter((function(e){return 1==e.state})).map((function(e){return Object(W.jsxs)("div",{style:{background:"".concat(e.color)},className:c==e.id?"cat_item cat_item_selected":"cat_item",onClick:function(){t(e.id)},children:[Object(W.jsx)("img",{width:"50px",height:"50px",src:e.picture,className:"category_img"}),Object(W.jsx)("h6",{className:"cat_name",children:e.name.substring(0,13)+"..."})]})}))})},At=n(771),yt=(n(312),function(e){var t=e.orderWithSupp,n=e.handleAddOrderWithSupp,c=e.handleaAddDrink,i=e.drinks,a=e.suppSelected,s=e.order_id,u=e.setShowSupplements,j=e.setSuppSelected,b=e.setDrinks,O=Object(r.useState)("sauces"),m=Object(o.a)(O,2),p=m[0],x=m[1],v=Object(h.c)();return Object(W.jsxs)("div",{className:"product_with_supp",children:[Object(W.jsx)(l.a,{icon:d.I,style:{position:"absolute",right:"3%",top:"6%",fontSize:"1.5rem",cursor:"pointer"},onClick:function(){return u(!1),b(null),void j([])}}),Object(W.jsxs)("div",{className:"supp_header",children:[Object(W.jsxs)("div",{className:"supp_img",children:[Object(W.jsx)("img",{width:"50px",height:"50px",src:t.image}),Object(W.jsxs)("h5",{children:[t.name," +"]})]}),Object(W.jsx)("div",{className:"supp_selected_items",children:t.suppSelected.map((function(e,t){return Object(W.jsxs)("div",{className:"selected_item",children:[Object(W.jsx)("img",{width:"50px",height:"50px",src:e.image}),Object(W.jsx)("h5",{children:e.name})]},t)}))})]}),"sauces"==p?Object(W.jsx)("div",{className:"supp_body",children:t.supplement.sauces.map((function(e,c){return Object(W.jsxs)("div",{className:3==a.length&&-1==a.findIndex((function(t){return t.id==e.id}))?"supp_item item_disabled":"supp_item ",onClick:function(){return n(e)},children:[Object(W.jsx)("img",{width:"60px",height:"60px",src:e.image}),Object(W.jsx)("h5",{children:e.name}),-1!=t.suppSelected.findIndex((function(t){return t.id==e.id}))&&Object(W.jsx)(l.a,{icon:d.y,style:{color:"red",fontSize:"1.5rem",position:"absolute",bottom:"-9%"}})]},c)}))}):Object(W.jsx)("div",{className:"supp_body",children:t.supplement.drinks.map((function(e,t){return Object(W.jsxs)("div",{className:"supp_item",onClick:function(){return c(e)},children:[Object(W.jsx)("img",{width:"60px",height:"60px",src:e.image}),Object(W.jsx)("h5",{children:e.name}),(null===i||void 0===i?void 0:i.id)==(null===e||void 0===e?void 0:e.id)?Object(W.jsx)(l.a,{icon:d.l,style:{color:"red",fontSize:"1.5rem",position:"absolute",bottom:"-15%"}}):""]},t)}))}),Object(W.jsxs)("div",{className:"supp_footer",children:["sauces"==p&&Object(W.jsxs)("button",{style:{right:"0"},onClick:function(){return x("drinks")},children:[0==a.length?"Non merci":"Suivant",Object(W.jsx)(l.a,{icon:d.c})]}),"drinks"==p&&Object(W.jsxs)("button",{style:{right:"0"},onClick:function(){v(Ne({order:Object(Y.a)(Object(Y.a)({},t),{},{qt:1,stepItems:{},remise:0,offert:!1,new:s?"true":"false"})})),u(!1),b(null),j([])},children:["Terminer",Object(W.jsx)(l.a,{icon:d.c})]}),"drinks"==p&&Object(W.jsxs)("button",{style:{left:"0"},onClick:function(){return x("sauces")},children:[Object(W.jsx)(l.a,{icon:d.b}),"Pr\xe9cedent"]})]})]})}),Ct=function(e){var t,n,c=e.product,a=e.setAlert,s=e.order_id,u=e.setconfirmed,j=(e.confirmed,Object(r.useState)(0)),x=Object(o.a)(j,2),v=(x[0],x[1],q().t),f=Object(h.c)(),g=Object(h.d)((function(e){return e.data.nSteps})),A=Object(h.d)((function(e){return e.data.products})),y=Object(r.useState)(1),C=Object(o.a)(y,2),N=C[0],k=C[1],w=Object(r.useState)(1),S=Object(o.a)(w,2),I=S[0],T=S[1],P=Object(r.useState)(!1),E=Object(o.a)(P,2),B=E[0],D=E[1],L=Object(r.useState)(!1),F=Object(o.a)(L,2),R=F[0],H=F[1],z=(Object(h.d)((function(e){return e.order.orderType})),Object(r.useState)(void 0)),M=Object(o.a)(z,2),G=M[0],K=M[1],V=Object(r.useState)(!1),Z=Object(o.a)(V,2),X=Z[0],U=Z[1],J=Object(r.useState)(null),$=Object(o.a)(J,2),ee=($[0],$[1]),ne=Object(h.d)((function(e){return e.order.client})),ce=Object(h.d)((function(e){return e.data.tva_mode})),re=Object(r.useState)(0),ie=Object(o.a)(re,2),ae=ie[0],oe=(ie[1],Object(r.useState)({active:null===c||void 0===c?void 0:c.active,cat_id:null===c||void 0===c?void 0:c.cat_id,description:null===c||void 0===c?void 0:c.description,extras:null===c||void 0===c?void 0:c.extras,id:null===c||void 0===c?void 0:c.id,image:null===c||void 0===c?void 0:c.image,isComp:null===c||void 0===c?void 0:c.isComp,is_alcool:null===c||void 0===c?void 0:c.is_alcool,is_conserved:null===c||void 0===c?void 0:c.is_conserved,is_cold:null===c||void 0===c?void 0:c.is_cold,is_hot:null===c||void 0===c?void 0:c.is_hot,is_supp:null===c||void 0===c?void 0:c.is_supp,name:null===c||void 0===c?void 0:c.name,nsteps:null===c||void 0===c?void 0:c.nsteps,price:null===c||void 0===c?void 0:c.price,tva:null===c||void 0===c?void 0:c.tva,drink_id:"",suaces_ids:[],suppSelected:[],qt:1,supplement:{drinks:[],sauces:[]}})),se=Object(o.a)(oe,2),le=se[0],de=se[1],ue=Object(r.useState)([]),be=Object(o.a)(ue,2),he=be[0],Oe=be[1],me=Object(r.useState)(null),pe=Object(o.a)(me,2),xe=pe[0],ve=pe[1];Object(r.useEffect)((function(){var e;e=null==xe?Object(te.a)(he):[].concat(Object(te.a)(he),[xe]);var t=he.map((function(e){return e.id}));de(Object(Y.a)(Object(Y.a)({},le),{},{suppSelected:e,suaces_ids:t}))}),[he,xe]);var fe=function(){var e=Object(p.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-1!=he.findIndex((function(e){return e.id==t.id}))?(n=he.filter((function(e){return e.id!=t.id})),Oe(n)):he.length<3&&Oe([].concat(Object(te.a)(he),[t]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e;"sur place"==ne.type||"livraison"==ne.type?(e=ce.find((function(e){return"sur place"==e.nom})).valeur,ee(e)):"emporter"==ne.type&&(e=ce.find((function(e){return"emporter"==e.nom})).valeur,ee(e)),ae>0&&ee(e=ae),console.log(e)}),[]);var Ae=function(e){var t=e.extraKey,n=e.sign;console.log("handleExtra",{extraKey:t,sign:n});var c=JSON.parse(JSON.stringify(G)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),K(c)):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),K(c))},ye=function(e){var t=e.show,n=e.msg,c=e.type;a({show:t,msg:n,type:c}),setTimeout((function(){a({show:!1,msg:"",type:""})}),1500)},Ce=function(e){return A.find((function(t){return t.id==e}))||{}},_e=Object(r.useState)(0),ke=Object(o.a)(_e,2),we=(ke[0],ke[1],function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})}),Se=localStorage.getItem("currency");return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:"item_container",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:c.name.substring(0,21)})}),""!=c.image?Object(W.jsx)("img",{src:c.image,onClick:function(){var e;if(u(!1),0==(null===c||void 0===c||null===(e=c.extras)||void 0===e?void 0:e.length)&&0==(null===c||void 0===c?void 0:c.nsteps)&&0==(null===c||void 0===c?void 0:c.isComp)&&0==(null===c||void 0===c?void 0:c.is_supp))Object(jt.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1,new:s?"true":"false"})}));else if(null!==c&&void 0!==c&&c.is_supp){var t,n;H(!0),de({active:null===c||void 0===c?void 0:c.active,cat_id:null===c||void 0===c?void 0:c.cat_id,description:null===c||void 0===c?void 0:c.description,extras:null===c||void 0===c?void 0:c.extras,id:null===c||void 0===c?void 0:c.id,image:null===c||void 0===c?void 0:c.image,isComp:null===c||void 0===c?void 0:c.isComp,is_alcool:null===c||void 0===c?void 0:c.is_alcool,is_conserved:null===c||void 0===c?void 0:c.is_conserved,is_cold:null===c||void 0===c?void 0:c.is_cold,is_hot:null===c||void 0===c?void 0:c.is_hot,is_supp:null===c||void 0===c?void 0:c.is_supp,name:null===c||void 0===c?void 0:c.name,nsteps:null===c||void 0===c?void 0:c.nsteps,price:null===c||void 0===c?void 0:c.price,tva:null===c||void 0===c?void 0:c.tva,drink_id:"",suaces_ids:[],suppSelected:[],qt:1,supplement:{drinks:Object(te.a)(null===c||void 0===c||null===(t=c.supplement)||void 0===t?void 0:t.drinks),sauces:Object(te.a)(null===c||void 0===c||null===(n=c.supplement)||void 0===n?void 0:n.sauces)}})}else D(!0),K(Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1}))},className:"prod_img"}):"",Object(W.jsxs)("div",{className:"price",children:["".concat(c.price.toFixed(2)),we("<i>".concat(Se,"</i>"))]}),Object(W.jsx)(l.a,{onClick:function(e){return U(!0)},icon:d.I,size:"1x",style:{position:"absolute",top:"0px",right:"5px",color:"red",backgroundColor:"white",borderRadius:"25%"}})]}),Object(W.jsx)("div",{className:"supp_modal",children:R?Object(W.jsx)(yt,{setDrinks:ve,setSuppSelected:Oe,setShowSupplements:H,handleaAddDrink:function(e){e==xe?(ve(null),de(Object(Y.a)(Object(Y.a)({},le),{},{drink_id:e.id,price:c.price}))):(ve(e),de(Object(Y.a)(Object(Y.a)({},le),{},{drink_id:e.id,price:c.price+e.price})))},suppSelected:he,drinks:xe,handleAddOrderWithSupp:fe,orderWithSupp:le,order_id:s}):""}),Object(W.jsxs)(ge.a,{dialogClassName:"modal_body",show:B,onHide:function(){D(!1),k(1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsxs)(ge.a.Title,{children:[Object(W.jsx)("img",{width:"30px",height:"30px",src:c.image}),null===G||void 0===G?void 0:G.name]})}),Object(W.jsxs)(ge.a.Body,{children:[Object(W.jsx)("p",{children:null===G||void 0===G?void 0:G.description}),null!==G&&void 0!==G&&G.extras&&null!==G&&void 0!==G&&G.extras.length?null===G||void 0===G?void 0:G.extras.map((function(e,t){return Object(W.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(W.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(W.jsx)(l.a,{onClick:function(){return Ae({extraKey:t,sign:"-"})},icon:d.x,color:"#ff6b6b"}),Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.default_quantity})}),Object(W.jsx)(l.a,{onClick:function(){return Ae({extraKey:t,sign:"+"})},icon:d.C,color:"#ff6b6b"})]}),Object(W.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.title})})]}),Object(W.jsxs)("td",{children:[" ",Object(W.jsx)("h5",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",we("<i>".concat(Se,"</i>"))]})})]})]})})):null!==G&&void 0!==G&&G.isComp?Object(W.jsx)(At.a,{variant:"dark",children:Object.keys((null===G||void 0===G?void 0:G.slots)||{}).map((function(e){var t;return Object(W.jsxs)(At.a.Item,{style:{height:"15rem",width:"100%",textAlign:"center"},className:"chejm",children:[Object(W.jsxs)("h3",{children:[" ",e]}),Object(W.jsxs)("div",{style:(t={display:"flex",justifyContent:"space-around"},Object(O.a)(t,"display","flex"),Object(O.a)(t,"alignItems","center"),Object(O.a)(t,"marginTop","2rem"),t),children:[null===G||void 0===G?void 0:G.slots[e].products.map((function(t){return Object(W.jsxs)("div",{style:{cursor:"pointer",position:"relative"},onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(G)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),K(c)}({slotKey:e,id:t.id})},children:[Object(W.jsx)("h6",{children:Object(W.jsx)("b",{style:{color:t.checked?"#ff6b6b":"black"},children:t.name})}),Object(W.jsx)("img",{src:t.image,width:"50px",height:"50px",style:{borderRadius:"50%",borderColor:t.checked?"#ff6b6b":"black"}}),t.checked?Object(W.jsx)(l.a,{icon:d.l,color:"#ff6b6b",style:{position:"absolute",top:"50px",right:"20px"}}):""]})}))," "]})]})}))}):(null===G||void 0===G?void 0:G.nsteps)>0?Object(W.jsxs)("div",{children:[Object(W.jsx)("h6",{children:Object(W.jsx)("b",{children:null===(t=g.filter((function(e){return(null===e||void 0===e?void 0:e.menu_id)==(null===G||void 0===G?void 0:G.id)}))[0][N])||void 0===t?void 0:t.nom_etape})}),Object(W.jsx)("div",{className:"steps_cont",children:null===(n=g.filter((function(e){return e.menu_id==(null===G||void 0===G?void 0:G.id)}))[0][N])||void 0===n?void 0:n.choice.map((function(e){var t;return Object(W.jsxs)("div",{className:null!==G&&void 0!==G&&null!==(t=G.stepItems[N])&&void 0!==t&&t.find((function(t){return t.id==e}))?"prod_sel prod":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log("stp",n),T(N);var c=JSON.parse(JSON.stringify(G)||{}),r=n.max_select;void 0==c.stepItems[N]&&(c.stepItems[N]=[],console.log(c)),c.stepItems[N].length<r&&(c.stepItems[N].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[N].push(Ce(t)))),c.stepItems[N].find((function(e){return e.id==t}))||(c.stepItems[N]=[],c.stepItems[N].push(Ce(t))),K(c),console.log("done"),console.log(c)}({id:e,STP:g.filter((function(e){return e.menu_id==(null===G||void 0===G?void 0:G.id)}))[0][N]})},children:[Object(W.jsx)("img",{src:Ce(e).image,alt:"",height:"70px",width:"70px"}),Object(W.jsxs)("h6",{style:{display:"flex"},children:[Object(W.jsxs)("b",{children:[Ce(e).name," "]}),Object(W.jsx)("span",{children:Object(W.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",marginRight:"1rem",color:"#ff6b6b"},children:[Ce(e).price," ",we("<i>".concat(Se,"</i>"))]})})," "]}),Object(W.jsx)("p",{children:Ce(e).description})]})}))}),(null===G||void 0===G?void 0:G.nsteps)>=N&&N>0?Object(W.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){N>1&&k(N-1)},children:"Retour"}):"",(null===G||void 0===G?void 0:G.nsteps)>N&&N>0?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){(null===G||void 0===G?void 0:G.nsteps)>N&&I==N&&k(N+1)},children:"Suivant"}):"",(null===G||void 0===G?void 0:G.nsteps)==N?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){I==N&&(Object(jt.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},G),{},{new:s?"true":"false"})})),ye({show:!0,msg:v("added"),type:"success"}),D(!1),k(1))},children:"Finir"}):""]}):""]}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){D(!1),k(1)},children:v("cancel")}),0==(null===G||void 0===G?void 0:G.nsteps)||null!==G&&void 0!==G&&G.isComp?Object(W.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return Object(jt.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},G),{},{new:s?"true":"false"})})),ye({show:!0,msg:v("added"),type:"success"}),void D(!1)},children:v("aded")}):""]})]}),Object(W.jsxs)(ge.a,{show:X,onHide:function(){return U(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Gestion de stock"})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return U(!1)},children:"Retour au tables"}),Object(W.jsx)(b.a,{variant:"danger",onClick:function(){return U(!1),void _.a.post("http://192.168.1.166:5000/api/resetwarehouse",{prod_id:c.id}).then((function(e){console.log(e.data),f(je({id:c.id})),Q.a.fire({icon:"success",title:"produit mis hors stock !",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"})]})]})]})},_t=function(e){var t=e.selectedCategory,n=e.setAlert,c=e.categories,r=e.order_id,i=e.setconfirmed,a=e.confirmed,o=Object(h.d)((function(e){return e.data.products})),s=c.filter((function(e){return e.id==t}))[0];return Object(W.jsxs)("div",{className:"meni-iteams",children:[Object(W.jsx)("h5",{style:{width:"100%"},children:Object(W.jsx)("b",{children:null===s||void 0===s?void 0:s.name})}),o.filter((function(e){return e.cat_id==t&&1==e.active})).sort((function(e,t){return e.position-t.position})).map((function(e){return Object(W.jsx)(Ct,{order_id:r,product:e,setAlert:n,confirmed:a,setconfirmed:i})}))]})},Nt=function(e){var t,n,c=e.product,a=e.setAlert,s=e.order_id,u=e.setconfirmed,j=(e.confirmed,Object(r.useState)(0)),m=Object(o.a)(j,2),p=(m[0],m[1],q().t),x=Object(h.c)(),v=Object(h.d)((function(e){return e.data.nSteps})),f=Object(h.d)((function(e){return e.data.products})),g=Object(r.useState)(1),A=Object(o.a)(g,2),y=A[0],C=A[1],N=Object(r.useState)(1),k=Object(o.a)(N,2),w=k[0],S=k[1],I=Object(r.useState)(!1),T=Object(o.a)(I,2),P=T[0],E=T[1],B=Object(r.useState)(void 0),D=Object(o.a)(B,2),L=D[0],F=D[1],R=Object(r.useState)(!1),H=Object(o.a)(R,2),z=H[0],M=H[1],G=Object(r.useState)(null),K=Object(o.a)(G,2),V=(K[0],K[1]),Z=Object(h.d)((function(e){return e.order.client})),X=Object(h.d)((function(e){return e.data.tva_mode})),U=Object(r.useState)(0),J=Object(o.a)(U,2),$=J[0];J[1];Object(r.useEffect)((function(){var e;"sur place"==Z.type||"livraison"==Z.type?(e=X.find((function(e){return"sur place"==e.nom})).valeur,V(e)):"emporter"==Z.type&&(e=X.find((function(e){return"emporter"==e.nom})).valeur,V(e)),$>0&&V(e=$),console.log(e)}),[]);var ee=function(e){var t=e.extraKey,n=e.sign;console.log("handleExtra",{extraKey:t,sign:n});var c=JSON.parse(JSON.stringify(L)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),F(c)):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),F(c))},te=function(e){var t=e.show,n=e.msg,c=e.type;a({show:t,msg:n,type:c}),setTimeout((function(){a({show:!1,msg:"",type:""})}),1500)},ne=function(e){return f.find((function(t){return t.id==e}))||{}},ce=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},re=localStorage.getItem("currency");return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(jt.a,{}),Object(W.jsxs)("div",{className:"item_container",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:c.name.substring(0,21)})}),""!=c.image?Object(W.jsx)("img",{src:c.image,onClick:function(){var e;u(!1),0==(null===c||void 0===c||null===(e=c.extras)||void 0===e?void 0:e.length)&&0==(null===c||void 0===c?void 0:c.nsteps)&&0==(null===c||void 0===c?void 0:c.isComp)?x(Ne({order:Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1,new:s?"true":"false"})})):(E(!0),F(Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1})))},className:"prod_img"}):"",Object(W.jsxs)("div",{className:"price",children:["".concat(c.price.toFixed(2)),ce("<i>".concat(re,"</i>"))]}),Object(W.jsx)(l.a,{onClick:function(e){return M(!0)},icon:d.I,size:"1x",style:{position:"absolute",top:"0px",right:"5px",color:"red",backgroundColor:"white",borderRadius:"25%"}})]}),Object(W.jsxs)(ge.a,{dialogClassName:"modal_body",show:P,onHide:function(){E(!1),C(1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsxs)(ge.a.Title,{children:[Object(W.jsx)("img",{width:"30px",height:"30px",src:c.image}),null===L||void 0===L?void 0:L.name]})}),Object(W.jsxs)(ge.a.Body,{children:[Object(W.jsx)("p",{children:null===L||void 0===L?void 0:L.description}),null!==L&&void 0!==L&&L.extras&&null!==L&&void 0!==L&&L.extras.length?null===L||void 0===L?void 0:L.extras.map((function(e,t){return Object(W.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(W.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(W.jsx)(l.a,{onClick:function(){return ee({extraKey:t,sign:"-"})},icon:d.x,color:"#ff6b6b"}),Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.default_quantity})}),Object(W.jsx)(l.a,{onClick:function(){return ee({extraKey:t,sign:"+"})},icon:d.C,color:"#ff6b6b"})]}),Object(W.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(W.jsx)("h5",{children:Object(W.jsx)("b",{children:e.title})})]}),Object(W.jsxs)("td",{children:[" ",Object(W.jsx)("h5",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",ce("<i>".concat(re,"</i>"))]})})]})]})})):null!==L&&void 0!==L&&L.isComp?Object(W.jsx)(At.a,{variant:"dark",children:Object.keys((null===L||void 0===L?void 0:L.slots)||{}).map((function(e){var t;return Object(W.jsxs)(At.a.Item,{style:{height:"15rem",width:"100%",textAlign:"center"},children:[Object(W.jsxs)("h3",{children:[" ",e]}),Object(W.jsxs)("div",{style:(t={display:"flex",justifyContent:"space-around"},Object(O.a)(t,"display","flex"),Object(O.a)(t,"alignItems","center"),Object(O.a)(t,"marginTop","2rem"),t),children:[null===L||void 0===L?void 0:L.slots[e].products.map((function(t){return Object(W.jsxs)("div",{style:{cursor:"pointer",position:"relative"},onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(L)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),F(c)}({slotKey:e,id:t.id})},children:[Object(W.jsx)("h6",{children:Object(W.jsx)("b",{style:{color:t.checked?"#ff6b6b":"black"},children:t.name})}),Object(W.jsx)("img",{src:t.image,width:"50px",height:"50px",style:{borderRadius:"50%",borderColor:t.checked?"#ff6b6b":"black"}}),t.checked?Object(W.jsx)(l.a,{icon:d.l,color:"#ff6b6b",style:{position:"absolute",top:"50px",right:"20px"}}):""]})}))," "]})]})}))}):(null===L||void 0===L?void 0:L.nsteps)>0?Object(W.jsxs)("div",{children:[Object(W.jsx)("h6",{children:Object(W.jsx)("b",{children:null===(t=v.filter((function(e){return(null===e||void 0===e?void 0:e.menu_id)==(null===L||void 0===L?void 0:L.id)}))[0][y])||void 0===t?void 0:t.nom_etape})}),Object(W.jsx)("div",{className:"steps_cont",children:null===(n=v.filter((function(e){return e.menu_id==(null===L||void 0===L?void 0:L.id)}))[0][y])||void 0===n?void 0:n.choice.map((function(e){var t;return Object(W.jsxs)("div",{className:null!==L&&void 0!==L&&null!==(t=L.stepItems[y])&&void 0!==t&&t.find((function(t){return t.id==e}))?"prod_sel prod":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log("stp",n),S(y);var c=JSON.parse(JSON.stringify(L)||{}),r=n.max_select;void 0==c.stepItems[y]&&(c.stepItems[y]=[],console.log(c)),c.stepItems[y].length<r&&(c.stepItems[y].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[y].push(ne(t)))),c.stepItems[y].find((function(e){return e.id==t}))||(c.stepItems[y]=[],c.stepItems[y].push(ne(t))),F(c),console.log("done"),console.log(c)}({id:e,STP:v.filter((function(e){return e.menu_id==(null===L||void 0===L?void 0:L.id)}))[0][y]})},children:[Object(W.jsx)("img",{src:ne(e).image,alt:"",height:"70px",width:"70px"}),Object(W.jsxs)("h6",{style:{display:"flex"},children:[Object(W.jsxs)("b",{children:[ne(e).name," "]}),Object(W.jsx)("span",{children:Object(W.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",marginRight:"1rem",color:"#ff6b6b"},children:[ne(e).price," ",ce("<i>".concat(re,"</i>"))]})})," "]}),Object(W.jsx)("p",{children:ne(e).description})]})}))}),(null===L||void 0===L?void 0:L.nsteps)>=y&&y>0?Object(W.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){y>1&&C(y-1)},children:"Retour"}):"",(null===L||void 0===L?void 0:L.nsteps)>y&&y>0?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){(null===L||void 0===L?void 0:L.nsteps)>y&&w==y&&C(y+1)},children:"Suivant"}):"",(null===L||void 0===L?void 0:L.nsteps)==y?Object(W.jsx)(b.a,{variant:"outline-warning",onClick:function(){w==y&&(x(Ne({order:Object(Y.a)(Object(Y.a)({},L),{},{new:s?"true":"false"})})),te({show:!0,msg:p("added"),type:"success"}),E(!1),C(1))},children:"Finir"}):""]}):""]}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){E(!1),C(1)},children:p("cancel")}),0==(null===L||void 0===L?void 0:L.nsteps)||null!==L&&void 0!==L&&L.isComp?Object(W.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return x(Ne({order:Object(Y.a)(Object(Y.a)({},L),{},{new:s?"true":"false"})})),te({show:!0,msg:p("added"),type:"success"}),void E(!1)},children:p("aded")}):""]})]}),Object(W.jsxs)(ge.a,{show:z,onHide:function(){return M(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Gestion de stock"})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return M(!1)},children:"Retour au tables"}),Object(W.jsx)(b.a,{variant:"danger",onClick:function(){return M(!1),void _.a.post("http://192.168.1.166:5000/api/resetwarehouse",{prod_id:c.id}).then((function(e){console.log(e.data),x(je({id:c.id})),Q.a.fire({icon:"success",title:"produit mis hors stock !",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"})]})]})]})},kt=function(){q().t;var e,t=Object(s.f)(),n=Object(r.useState)(!1),c=Object(o.a)(n,2),i=c[0],a=c[1];var u=Object(h.d)((function(e){return e.order.selectedTable})),b=Object(s.g)(),O=localStorage.getItem("user_id"),m=b.order_id,p=Object(h.d)((function(e){return e.data.categories})),x=Object(r.useState)(null===(e=p[0])||void 0===e?void 0:e.id),v=Object(o.a)(x,2),f=v[0],g=v[1],A=Object(r.useState)({show:!1,msg:"",type:""}),y=Object(o.a)(A,2),C=(y[0],y[1]),N=localStorage.getItem("username")||"",k=Object(r.useState)((new Date).toLocaleTimeString("fa-IR")),w=Object(o.a)(k,2),S=(w[0],w[1]),I=Object(r.useState)({level:0,charging:!1}),T=Object(o.a)(I,2),P=(T[0],T[1],Object(r.useState)(!1)),E=Object(o.a)(P,2),B=E[0],D=E[1],L=Object(r.useState)(""),F=Object(o.a)(L,2),R=(F[0],F[1],Object(h.d)((function(e){return e.data.products})));Object(r.useEffect)((function(){var e=setInterval((function(){return H()}),1e3);return function(){clearInterval(e)}}),[]);var H=function(){S((new Date).toLocaleTimeString("fr-fr").replace(/(.*)\D\d+/,"$1"))},z=Object(h.c)();Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/categories",{user_id:O}).then((function(e){return z(oe({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),_.a.post("http://192.168.1.166:5000/api/products",{user_id:O,category:0}).then((function(e){z(se({products:e.data.products})),z(le({nSteps:e.data.menuSteps}))}))}),[]);var Q=Object(r.useState)("default"),M=Object(o.a)(Q,2),G=M[0],K=M[1],V=Object(r.useState)(""),J=Object(o.a)(V,2),Y=J[0],$=J[1];Object(r.useRef)();return Object(W.jsxs)("div",{children:[Object(W.jsx)(Z.a,{style:{backgroundColor:"#0dcaf0",height:"70px"},variant:"warning",children:Object(W.jsxs)(X.a,{children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsx)("div",{onClick:function(){a(!0)},style:{cursor:"pointer"},children:Object(W.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",padding:"5px"},children:[Object(W.jsx)("b",{children:"Rechercher"}),Object(W.jsx)(l.a,{icon:d.E,style:{marginLeft:"0.5rem"}})]})}),Object(W.jsx)(U.a,{className:"ms-auto",children:Object(W.jsx)(U.a.Link,{onClick:function(){t("/main"),z(Ie())},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})})}),Object(W.jsxs)("h6",{className:"menu-server-logout",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:N}),Object(W.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void t("/")},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(W.jsx)("div",{className:"cont_my",children:Object(W.jsxs)(Je.a,{style:{height:"85vh",paddingRight:"0 !important",backgroundColor:"white"},children:[Object(W.jsx)(Ye.a,{xs:2,children:Object(W.jsx)(gt,{selectedCategory:f,setSelectedCategory:g,categories:p})}),Object(W.jsx)(Ye.a,{xs:7,children:Object(W.jsx)(_t,{order_id:m,categories:p,selectedCategory:f,setAlert:C,confirmed:B,setconfirmed:D})}),Object(W.jsx)(Ye.a,{xs:3,children:Object(W.jsx)(ft,{selectedTable:u,confirmed:B,setconfirmed:D})})]})}),i?Object(W.jsxs)("div",{className:"all-produc-menu",children:[Object(W.jsxs)("div",{className:"modal-heade",children:[Object(W.jsxs)("div",{className:"input-search-product",children:[Object(W.jsx)("input",{type:"text",placeholder:"Rehercher un produit...",value:Y}),Object(W.jsx)(l.a,{icon:d.E,className:"Sm"})]}),Object(W.jsx)(l.a,{icon:d.I,className:"xm",onClick:function(){a(!1)}})]}),Object(W.jsx)("div",{className:"modal-bodys",children:R.filter((function(e){return e.name.toLowerCase().includes(Y.toLowerCase())||e.code.includes(Y)})).map((function(e,t){return Object(W.jsx)(Nt,{order_id:m,setAlert:C,setconfirmed:D,product:e})}))}),Object(W.jsx)("div",{className:"keyboard",children:Object(W.jsx)(j.a,{layoutName:G,onChange:function(e){$(e)},onKeyPress:function(e){console.log("Button pressed",e),"{lock}"==e&&"default"==G&&K("shift"),"{lock}"==e&&"shift"==G&&K("default")}})})]}):"",Object(W.jsx)(tt,{})]})},wt=Object(x.c)({name:"caisse",initialState:{monnaies:[],initialValue:0},reducers:{setMonnaies:function(e,t){e.monnaies=t.payload.monnaies},clearcaisse:function(){return{caisse:""}},setInitialValue:function(e,t){e.initialValue=t.payload.montant}}}),St=wt.reducer,It=wt.actions,Tt=It.setMonnaies,Pt=(It.clearcaisse,It.setInitialValue),Et=St,Bt=n(396),Dt=n.p+"static/media/coin.3b947962.png",Lt=n.p+"static/media/billet.8e0c912a.png",Ft=n.p+"static/media/sound.861677ae.mp3",Rt=function(){var e=Object(h.c)(),t=Object(s.f)(),n=Object(r.useState)(new Audio(Ft)),c=Object(o.a)(n,2),a=c[0];c[1];Object(r.useEffect)((function(){a.play()}),[]);var l=localStorage.getItem("caisse_open"),d=localStorage.getItem("caisse_id"),u=localStorage.getItem("user_id"),O=localStorage.getItem("username"),m=(Object(h.d)((function(e){return e.caisse.monnaies})),Object(r.useState)([])),p=Object(o.a)(m,2),x=p[0],v=(p[1],Object(r.useState)(0)),f=Object(o.a)(v,2),g=(f[0],f[1]),A=localStorage.getItem("currency"),y=Object(r.useState)(!0),C=Object(o.a)(y,2),N=C[0],k=C[1],w=Object(r.useState)(""),S=Object(o.a)(w,2),I=(S[0],S[1]),T=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 {bksp}"]),P=Object(o.a)(T,2),E=P[0],B=(P[1],Object(r.useRef)()),D=Object(r.useState)(0),L=Object(o.a)(D,2),F=L[0],R=L[1],H=Object(r.useState)([{value:0,real:.02},{value:0,real:.05},{value:0,real:.1},{value:0,real:.2},{value:0,real:.5},{value:0,real:1},{value:0,real:5},{value:0,real:10},{value:0,real:20},{value:0,real:50},{value:0,real:100},{value:0,real:200},{value:0,real:2},{value:0,real:.2},{value:0,real:.1}]),q=Object(o.a)(H,2),z=q[0],M=q[1],G=function(e){var t=e.e,n=(e.index,t.target.value);I(n);var c=Object(te.a)(z);c[F].value=Number(n),M(c),B.current.setInput(n),g(K())};Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getMonnaie",{user_id:u}).then((function(t){e(Tt({monnaies:t.data}))}))}),[]),Object(r.useEffect)((function(){if(a.play(),console.log(a),1==l){var e=new Date,n=("00"+(e.getMonth()+1)).slice(-2)+"/"+("00"+e.getDate()).slice(-2)+"/"+e.getFullYear()+" "+("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2)+":"+("00"+e.getSeconds()).slice(-2);Q.a.fire({icon:"success",title:"caisse Ouvert !",text:"Date ouverture :"+n,showConfirmButton:!1,timer:1500}),t("/main")}}),[N]);var K=function(){var e=0;return z.map((function(t){e+=t.value*t.real,console.log(e)})),e},J=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})};return Object(W.jsxs)("div",{className:"my_container",children:[Object(W.jsx)(V,{title:"cashierr"}),Object(W.jsx)("div",{className:"toOpenCaisse",children:Object(W.jsxs)("div",{className:"mon_cont",children:[Object(W.jsxs)("div",{className:"piece",children:[Object(W.jsx)("img",{className:"piece-img-coin",src:Dt,width:64,height:64,style:{position:"absolute"}}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["2 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[12].value,onFocus:function(){R(12),B.current.setInput("")},onChange:function(e){G({e:e,index:12})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[12].value*z[12].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["1 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{onFocus:function(){R(5),B.current.setInput("")},value:z[5].value,onChange:function(e){return G({e:e,index:5})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[5].value*z[5].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["0.5 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[4].value,onFocus:function(){R(4),B.current.setInput("")},onChange:function(e){return G({e:e,index:4})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[4].value*z[4].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["0.2 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[13].value,onFocus:function(){R(13),B.current.setInput("")},onChange:function(e){return G({e:e,index:13})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[13].value*z[13].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["0.1 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[14].value,onFocus:function(){R(14),B.current.setInput("")},onChange:function(e){return G({e:e,index:14})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[14].value*z[14].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsx)(j.a,{theme:"hg-theme-default hg-layout-default myTheme2",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn2",buttons:"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return B.current=e},layoutName:"default",layout:{default:E},onChange:function(e){I(e),console.log("Input changed",e);var t=Object(te.a)(z);t[F].value=Number(e),M(t),I("")},onKeyPress:function(e){console.log("Button pressed",e)}})]}),Object(W.jsxs)("div",{className:"billet",children:[Object(W.jsx)("img",{src:Lt,width:64,height:64,style:{position:"absolute"}}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["200 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[11].value,onFocus:function(){R(11),B.current.setInput("")},onChange:function(e){return G({e:e,index:11})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[11].value*z[11].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["100 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[10].value,onFocus:function(){R(10),B.current.setInput("")},onChange:function(e){return G({e:e,index:10})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[10].value*z[10].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["50 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[9].value,onFocus:function(){R(9),B.current.setInput("")},onChange:function(e){return G({e:e,index:9})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[9].value*z[9].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["20 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[8].value,onFocus:function(){R(8),B.current.setInput("")},onChange:function(e){return G({e:e,index:8})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[8].value*z[8].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["10 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[7].value,onFocus:function(){R(7),B.current.setInput("")},onChange:function(e){return G({e:e,index:7})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[7].value*z[7].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"mon",children:[Object(W.jsxs)("span",{className:"flex",children:["5 ",J("<i>".concat(A,"</i>"))]}),Object(W.jsx)(Bt.a,{value:z[6].value,onFocus:function(){R(6),B.current.setInput("")},onChange:function(e){return G({e:e,index:6})},type:"number",className:"moninput"}),Object(W.jsxs)("span",{className:"flex",children:[z[6].value*z[6].real," ",J("<i>".concat(A,"</i>"))]})]}),Object(W.jsxs)("div",{className:"caisse-ovrir-caisse",children:[Object(W.jsx)("h4",{className:"grand-total",children:Object(W.jsxs)("b",{children:["Grand Total : ",Object(W.jsx)("br",{}),Object(W.jsxs)("span",{style:{display:"flex"},children:[K().toFixed(2),J("<i>".concat(A,"</i>"))]})]})}),Object(W.jsx)(b.a,{onClick:function(){return function(){if(K()>0){console.log(x),console.log(K());var t={caisse_id:d,date:Date.now(),montant:K(),type:"open"};console.log(t),_.a.post("http://192.168.1.166:5000/api/OpenCaisse",{user_id:u,user:O,montant:K(),historiquePrint:t,historique_monnaie:x}).then((function(t){var n;console.log(t.data);var c=null===(n=t.data.historiquePrint)||void 0===n?void 0:n.montant;e(Pt({montant:c})),localStorage.setItem("caisse_open",1),k(!N)}))}else Q.a.fire({icon:"error",title:"Fond initial est 0 !",showConfirmButton:!1,timer:1500})}()},variant:"warning",className:"open_btn",size:"lg",children:"Ouvrir Caisse"}),Object(W.jsx)(b.a,{onClick:function(){return function(){var t={caisse_id:d,date:Date.now(),montant:30,type:"open"};_.a.post("http://192.168.1.166:5000/api/OpenCaisse",{user_id:u,user:O,montant:30,historiquePrint:t,historique_monnaie:x}).then((function(t){var n;console.log(t.data);var c=null===(n=t.data.historiquePrint)||void 0===n?void 0:n.montant;e(Pt({montant:c})),localStorage.setItem("caisse_open",1),k(!N)}))}()},variant:"warning",className:"open_btn-30",size:"lg",children:"Ouvrir avec 30\u20ac"})]})]})]})}),Object(W.jsx)(Z.a,{bg:"light",variant:"light",fixed:"bottom",children:Object(W.jsxs)(X.a,{children:[Object(W.jsxs)(Z.a.Brand,{href:"#home",children:["Tous droits reserv\xe9es ",Object(W.jsx)("b",{children:"CAISSECONNECT.FR"})," \xa9 2022"]}),Object(W.jsx)(U.a,{className:"me-auto",children:Object(W.jsx)(U.a.Link,{href:"#home"})})]})})]})},Ht=function(){var e,t,n=localStorage.getItem("username")||"",c=localStorage.getItem("user_id"),i=localStorage.getItem("caisse_id"),a=Object(h.d)((function(e){return e.data.coupons})),u=(Object(h.d)((function(e){return e.data.tables})),Object(r.useState)({})),j=Object(o.a)(u,2),O=j[0],m=j[1],p=Object(r.useState)(!1),x=Object(o.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)(!1),A=Object(o.a)(g,2),y=(A[0],A[1],Object(r.useState)("")),C=Object(o.a)(y,2),N=(C[0],C[1]),k=Object(s.g)(),w=Object(s.f)(),S=k.id,I=q().t,T=Object(h.c)();Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getcoupons",{user_id:c,caisse_id:i}).then((function(e){T(he({coupons:e.data}))}))}),[]);var P=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),w("/")},E=localStorage.getItem("currency").replace(/;/g,"").replace(/&/g,"");return Object(W.jsxs)("div",{className:"navbar",children:[Object(W.jsx)(Z.a,{style:{height:"60px"},variant:"warning",children:Object(W.jsxs)(X.a,{className:"history-navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){return w("/main")},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return w("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),I("cashier")]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return P()},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(W.jsx)(l.a,{icon:d.G,style:{marginRight:"5px"}}),I("disconnect")]})})]}),Object(W.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:n}),Object(W.jsx)(l.a,{onClick:function(){return P()},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(W.jsxs)("div",{className:"client-search",children:[Object(W.jsx)("label",{children:Object(W.jsx)(l.a,{icon:d.E})}),Object(W.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return N(e.target.value)}})]})]})}),Object(W.jsx)(X.a,{style:{backgroundColor:"white"},fluid:!0,children:Object(W.jsxs)(fe.a,{hover:!0,className:"ttt",children:[Object(W.jsx)("thead",{className:"tbds",children:S?Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"#"}),Object(W.jsx)("th",{children:"Type"}),Object(W.jsx)("th",{children:"Table"}),Object(W.jsx)("th",{children:"date"}),Object(W.jsx)("th",{children:"order"}),Object(W.jsx)("th",{children:"Prix"}),Object(W.jsx)("th",{children:"Paiement "})]}):Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"id"}),Object(W.jsx)("th",{children:"Avoir"}),Object(W.jsx)("th",{children:"Cr\xe9e dans"}),Object(W.jsx)("th",{children:"Expir\xe9e dans"})]})}),Object(W.jsx)("tbody",{className:"scro",children:a.map((function(e,t){return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:e.id}),Object(W.jsxs)("td",{children:[e.discount||"N/A",E]}),Object(W.jsx)("td",{children:e.created_at||"N/A"}),Object(W.jsx)("td",{children:e.expires_at||"N/A"})]})}))})]})}),Object(W.jsxs)(ge.a,{show:v,onHide:function(){return f(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Client"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{children:Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.nom_prenom,type:"text",placeholder:"nom/prenom",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{nom_prenom:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{children:[(null===(e=O.telephone)||void 0===e?void 0:e.length)>0&&(null===(t=O.telephone)||void 0===t?void 0:t.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)(Xe.a.Control,{value:O.telephone,type:"tel",placeholder:"telephone",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{telephone:e.target.value}))}})]}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.email,type:"email",placeholder:"Email",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{email:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.adresse,as:"textarea",type:"text",placeholder:"adresse",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{adresse:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.societe,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{societe:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.code_1,type:"text",placeholder:"code 1",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_1:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.code_2,type:"text",placeholder:"code 2",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_2:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:O.ville,type:"text",placeholder:"Ville",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{ville:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.interphone,type:"text",placeholder:"interphone",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{interphone:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:O.etage,type:"text",placeholder:"etage",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{etage:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:O.code_postal,type:"postal",placeholder:"Code postal",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_postal:e.target.value}))}})})]})})]})})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return f(!1)},children:"Annuler"}),Object(W.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"primary",onClick:function(){f(!1)},children:"Terminer"})]})]}),Object(W.jsx)(tt,{})]})},qt=(n(485),n(486),n(763)),zt=n(103),Qt=n.n(zt),Wt=function(e){e.data;var t,n,c,r,i,a,o,s,l,d,u,j,b,h,O,m,p,x,v=e.recap,f=e.selectedDate,g=e.products,A=(e.tvas,e.tvasum,null===v||void 0===v||null===(t=v.lastOuverture)||void 0===t?void 0:t.date.substr(0,10)),y=null===v||void 0===v||null===(n=v.lastOuverture)||void 0===n?void 0:n.date.substr(11,5),C=(new Date).toISOString().substr(11,5),_=A+"  "+y;console.log("recapz",v);var N=null===v||void 0===v||null===(c=v.today)||void 0===c||null===(r=c.logs)||void 0===r?void 0:r.filter((function(e){return"Annulation"==e.title_log}));console.log("annuleshistory",N);var k,w,S,I,T,P,E,B,D,L,F,R,H,q,z,Q,M,G,K,V,Z=[];S=0,w=0,k=0,I=0,T=0,P=0,E=0,L=0,B=0,D=0,F=0,q=0,R=0,H=0,z=0,G=0,Q=0,M=0,null===(i=v.today)||void 0===i||null===(a=i.orderItems)||void 0===a||a.map((function(e){10==e.tva?(S+=e.quantity,B=e.quantity,D=e.price,T=+B*e.price,L+=T,E=B*(D/1.1)+E,console.log("totalprice2",L)):20==e.tva?(k+=e.quantity,R=e.quantity,H=e.price,P=+R*e.price,q+=P,F=R*(H/1.2)+F,console.log("totalprice3",q)):5.5==e.tva&&(w+=e.quantity,Q=e.quantity,M=e.price,I=+Q*e.price,G+=I,z=Q*(M/1.055)+z,console.log("totalprice1",G));var t={name:"5.5",count:w,amount:z.toFixed(2)},n={name:"10",count:S,amount:E.toFixed(2)},c={name:"20",count:k,amount:F.toFixed(2)};Z[0]=t,Z[1]=n,Z[2]=c,console.log(Z)}));var X=[];return 0,K=0,V=0,null===N||void 0===N||N.map((function(e){K=+K,V=e.price;var t={name:"Les commandes anuul\xe9es : ",count:K,totaltcc:G+=V};X[0]=t})),Object(W.jsxs)("div",{className:"ticketz",children:[Object(W.jsxs)("div",{className:"z-head",children:[Object(W.jsx)("h3",{children:null===v||void 0===v||null===(o=v.Restaurant)||void 0===o?void 0:o.name}),Object(W.jsx)("h1",{children:"Ticket Z"}),Object(W.jsx)("p",{children:null===v||void 0===v||null===(s=v.Restaurant)||void 0===s?void 0:s.address}),Object(W.jsxs)("p",{children:["Tel : ",null===v||void 0===v||null===(l=v.Restaurant)||void 0===l?void 0:l.telephone]})]}),Object(W.jsxs)("div",{className:"z-body",children:[Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Impression :"})}),Object(W.jsx)("p",{children:f+" "+C})]}),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Ouverture :"})}),Object(W.jsx)("p",{children:_})]}),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fermeture :"})}),Object(W.jsx)("p",{children:f+" "+C})]}),Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Commandes :"})," ",null===v||void 0===v||null===(d=v.today)||void 0===d?void 0:d.nbr]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Clients :"})," ",Object.keys((null===v||void 0===v||null===(u=v.today)||void 0===u?void 0:u.clientGroups)||{}).length]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Ticket moyen :"})," ",Number(((null===v||void 0===v||null===(j=v.today)||void 0===j?void 0:j.total)/(null===v||void 0===v||null===(b=v.today)||void 0===b?void 0:b.nbr)).toFixed(2))||0,"\u20ac"]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Annules :"})," ",null===N||void 0===N?void 0:N.map((function(e){return e})).length]}),X.map((function(e){return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{children:Object(W.jsxs)("li",{children:["   ",e.name," ",e.totaltcc," \u20ac"]})})})})),Object(W.jsx)("p",{children:"---------------------------------"}),null===g||void 0===g?void 0:g.map((function(e){return Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:e.quantity+" X "+e.name})}),Object(W.jsxs)("p",{children:[e.totalPrice.toFixed(2),"\u20ac"]})]})})),Object(W.jsx)("p",{children:"---------------------------------"}),Object.keys((null===(h=v.today)||void 0===h?void 0:h.groups)||{}).map((function(e){var t,n;return Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsxs)("p",{children:[Object(W.jsxs)("b",{children:[null===(t=v.today)||void 0===t?void 0:t.groups[e].length," X "]}),Object(W.jsx)("b",{children:1==e?"Carte Bancaire":2==e?"Esp\xe9ces":e})]}),Object(W.jsx)("p",{children:(null===(n=v.today)||void 0===n?void 0:n.groups[e].reduce((function(e,t){return e+(t.price+t.price*t.tva/100)}),0).toFixed(2))+"\u20ac"})]})})),Object(W.jsx)("p",{children:"---------------------------------"}),Z.map((function(e){return Object(W.jsxs)("div",{className:"tva",style:{display:"flex",justifyContent:"space-between",marginRight:"20px"},children:[Object(W.jsxs)("p",{children:["TVA(",e.name,")% :"]}),Object(W.jsx)("p",{children:e.count}),Object(W.jsxs)("p",{children:["Total HT : ",e.amount]})]})})),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Total TTC"})}),Object(W.jsxs)("p",{children:[(null===(O=v.today)||void 0===O?void 0:O.total).toFixed(2),"\u20ac"]})]}),Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fond de caisse initial"})}),Object(W.jsxs)("p",{children:[null===(m=v.lastOuverture)||void 0===m?void 0:m.montant.toFixed(2),"\u20ac"]})]}),Object(W.jsxs)("div",{className:"b_el",style:{marginRight:"20px"},children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fond de caisse final"})}),Object(W.jsxs)("p",{children:[((null===(p=v.lastOuverture)||void 0===p?void 0:p.montant)+(null===(x=v.today)||void 0===x?void 0:x.total)).toFixed(2),"\u20ac"]})]})]})]})},Mt=n(195),Gt=n.n(Mt),Kt=function(e){var t,n,c,r,i=e.zHistory;return Object(W.jsxs)("div",{className:"ticketz",children:[Object(W.jsxs)("div",{className:"z-head",children:[Object(W.jsx)("h3",{children:null===(t=i.restaurant)||void 0===t?void 0:t.name}),Object(W.jsx)("h1",{children:"Ticket Z"}),Object(W.jsx)("p",{children:null===(n=i.restaurant)||void 0===n?void 0:n.address}),Object(W.jsxs)("p",{children:["Tel : ",null===(c=i.restaurant)||void 0===c?void 0:c.telephone]})]}),Object(W.jsxs)("div",{className:"z-body",children:[Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Impression :"})}),Object(W.jsx)("p",{children:i.impression})]}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Ouverture :"})}),Object(W.jsx)("p",{children:i.ouverture})]}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fermeture :"})}),Object(W.jsx)("p",{children:i.fermeture})]}),Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Commandes :"})," ",i.commandes]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Clients :"})," ",i.clients]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Ticket moyen :"})," ",i.ticket_moyen,"\u20ac"]}),Object(W.jsxs)("h6",{children:[Object(W.jsx)("b",{children:"Annules :"})," ",i.cancledOrders.length||0]}),Object(W.jsx)("p",{children:"---------------------------------"}),null===(r=i.products)||void 0===r?void 0:r.map((function(e){return Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:e.quantity+" X "+e.name})}),Object(W.jsxs)("p",{children:[e.totalPrice.toFixed(2),"\u20ac"]})]})})),Object(W.jsx)("p",{children:"---------------------------------"}),Object.keys(i.pay_method||{}).map((function(e){var t,n,c;return Object(W.jsx)("div",{className:"b_el",children:Object(W.jsxs)("p",{children:[null===(t=i.pay_method[e])||void 0===t?void 0:t.qt," ",null===(n=i.pay_method[e])||void 0===n?void 0:n.name," : ",null===(c=i.pay_method[e])||void 0===c?void 0:c.prix]})})})),Object(W.jsx)("p",{children:"---------------------------------"}),Object.keys(i.tvas||{}).map((function(e){return Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsxs)("b",{children:["TVA(",Number(e).toFixed(2),"%)"]})}),Object(W.jsxs)("p",{children:[i.tvas[e].toFixed(2),"\u20ac"]})]})})),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Total HT"})}),Object(W.jsxs)("p",{children:[i.ht,"\u20ac"]})]}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Total TTC"})}),Object(W.jsxs)("p",{children:[i.ttc,"\u20ac"]})]}),Object(W.jsx)("p",{children:"---------------------------------"}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fond de caisse initial"})}),Object(W.jsxs)("p",{children:[i.fond_initial,"\u20ac"]})]}),Object(W.jsxs)("div",{className:"b_el",children:[Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"Fond de caisse final"})}),Object(W.jsxs)("p",{children:[i.fond_final,"\u20ac"]})]})]})]})},Vt=function(){var e,t,n,c,i,a,u,j,O,x,v,f,g,A,y,C,N=q().t,k=Object(h.c)(),w=Object(s.f)(),S=localStorage.getItem("username")||"",I=localStorage.getItem("user_id")||"",T=localStorage.getItem("username")||"",P=localStorage.getItem("caisse_id"),E=Object(r.useState)(""),B=Object(o.a)(E,2),D=(B[0],B[1],Object(r.useRef)(null),new Date),L=D.toISOString().substr(0,10),F=Object(r.useState)(L),R=Object(o.a)(F,2),H=R[0],z=(R[1],Object(h.d)((function(e){return e.caisse.initialValue}))),M=Object(h.d)((function(e){return e.data.products})),G=Object(h.d)((function(e){return e.order.checkoutData}));console.log(G);var K=(null===G||void 0===G||null===(e=G.filter((function(e){return"pending"==e.status&&e.date==L})))||void 0===e?void 0:e.length)||0,V=null===G||void 0===G?void 0:G.filter((function(e){return"rejected"==e.status}));console.log("annules",V);var J=Object(h.d)((function(e){return e.data.orderHistory}))||[],$=null===J||void 0===J||null===(t=J.slice())||void 0===t?void 0:t.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.paymentsInDb&&e.paymentsInDb.length>0})),te=Object(r.useState)(z),ne=Object(o.a)(te,2),ce=ne[0],re=(ne[1],Object(r.useState)({})),ie=Object(o.a)(re,2),ae=ie[0],oe=ie[1];console.log("recap",ae);var se=Object(r.useState)(!1),le=Object(o.a)(se,2),de=le[0],ue=(le[1],Object(r.useState)(1)),je=Object(o.a)(ue,2),be=je[0],he=je[1],Oe=Object(r.useState)({}),me=Object(o.a)(Oe,2),pe=me[0],xe=me[1],ve=Object(r.useState)({}),fe=Object(o.a)(ve,2),Ae=fe[0],ye=fe[1],Ce=Object(r.useState)(!1),_e=Object(o.a)(Ce,2),Ne=_e[0],ke=_e[1],we=Object(r.useState)(!1),Se=Object(o.a)(we,2),Te=Se[0],Pe=Se[1],Ee=Object(r.useState)(!1),Be=Object(o.a)(Ee,2),De=Be[0],Le=Be[1],Re=Object(r.useState)([]),He=Object(o.a)(Re,2),qe=He[0],ze=He[1],Qe=null===ae||void 0===ae||null===(n=ae.lastOuverture)||void 0===n?void 0:n.date.substr(0,10),We=null===ae||void 0===ae||null===(c=ae.lastOuverture)||void 0===c?void 0:c.date.substr(11,5),Me=D.toISOString().substr(11,5),Ge=Qe+"  "+We,Ke=function(e){var t=e.id;return null===M||void 0===M?void 0:M.find((function(e){return e.id==t}))};Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getHistoriqueZcaisse",{user_id:I}).then((function(e){return ze(e.data.allHistorique)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)(Object(p.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("http://192.168.1.166:5000/api/clotureData",{user_id:I,caisse_id:P,TODAY:H}).then((function(e){oe(e.data);var t=new FormData;t.append("rest_id",I),t.append("page",be),t.append("date",H),_()({method:"post",url:"http://141.94.77.9/menu_premium_v2/index.php/api/order/venteCaisse",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data.data.data),xe(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[de]);var Ve=null===(i=ae.today)||void 0===i||null===(a=i.orderItems)||void 0===a?void 0:a.map((function(e,t){var n,c;return{id:t,col1:null===(n=Ke({id:e.item_id}))||void 0===n?void 0:n.name,col2:e.quantity,col3:(null===(c=e.price)||void 0===c?void 0:c.toFixed(2))+"\u20ac",col4:(e.price*e.quantity).toFixed(2)+"\u20ac"}})),Ze=0;Object.keys((null===(u=ae.today)||void 0===u?void 0:u.tvas)||{}).map((function(e){var t;Ze+=null===(t=ae.today)||void 0===t?void 0:t.tvas[e]}));return Object(W.jsxs)("div",{children:[Object(W.jsx)(Z.a,{variant:"warning",className:"colture_nav",children:Object(W.jsxs)(X.a,{className:"colture_navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)("h6",{className:"zcaisse_history",onClick:function(){return Le(!0)},children:[Object(W.jsx)(l.a,{size:"1x",icon:d.u,style:{marginRight:"0.5rem"}}),"Historique"]}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{children:" "}),Object(W.jsx)(U.a.Link,{onClick:function(){w("/main"),k(Ie())},children:Object(W.jsx)("img",{width:"45px",src:it,className:"colture-table-icon"})})]}),Object(W.jsxs)("h6",{className:"cloture-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{className:"cloture_server_img",src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:T}),Object(W.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void w("/")},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),ae.today?Object(W.jsxs)("div",{style:{padding:"1rem",display:"flex",width:"100%",height:"93vh",overflow:"hidden",paddingTop:"1rem",backgroundColor:"white"},children:[Object(W.jsx)("div",{style:{width:"30%",height:"100vh"},children:Object(W.jsx)(Wt,{tvas:null===(j=ae.today)||void 0===j?void 0:j.todaytva,products:null===(O=ae.today)||void 0===O||null===(x=O.orderItems)||void 0===x?void 0:x.map((function(e){var t;return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:null===(t=Ke({id:e.item_id}))||void 0===t?void 0:t.name})})),data:pe,recap:ae,selectedDate:H,tvasum:Ze})}),Object(W.jsxs)("div",{style:{width:"70%",height:"100vh"},children:[Object(W.jsxs)("div",{className:"stats",style:{width:"100%",display:"flex",justifyContent:"space-around"},children:[Object(W.jsxs)("div",{className:"rec",children:[Object(W.jsx)("h1",{children:Object(W.jsx)("b",{children:Object(W.jsx)(Gt.a,{value:ae.commandesTotal,formatValue:function(e){return e.toFixed(0)}})})}),Object(W.jsx)("h5",{children:"Total des commandes"})]}),Object(W.jsxs)("div",{className:"rec",children:[Object(W.jsx)("h1",{children:Object(W.jsx)("b",{children:Object(W.jsx)(Gt.a,{value:null===(v=ae.today)||void 0===v?void 0:v.clients,formatValue:function(e){return e.toFixed(0)}})})}),Object(W.jsx)("h5",{children:"Clients total"})]}),Object(W.jsxs)("div",{className:"rec",children:[Object(W.jsx)("h1",{children:Object(W.jsxs)("b",{children:[Object(W.jsx)(Gt.a,{value:ae.chiffre,formatValue:function(e){return e.toFixed(2)}})," ",Object(W.jsx)("br",{}),"\u20ac"]})}),Object(W.jsx)("h5",{children:"Chiffre d'affaire"})]}),Object(W.jsxs)("div",{className:"rec",children:[Object(W.jsx)("h1",{children:Object(W.jsxs)("b",{children:[Object(W.jsx)(Gt.a,{value:ae.chiffre/ae.commandesTotal,formatValue:function(e){return e.toFixed(2)}}),Object(W.jsx)("br",{}),"\u20ac"]})}),Object(W.jsx)("h5",{children:"Panier moyen"})]})]}),Object(W.jsxs)("div",{style:{width:"100%",height:"300px",marginTop:"1rem"},children:[Object(W.jsx)(qt.a,{className:"colture-datagrid",loading:0==(null===Ve||void 0===Ve?void 0:Ve.length),pageSize:10,paginationMode:"client",onPageChange:function(e){he(e+1)},rowCount:null===pe||void 0===pe||null===(f=pe.data)||void 0===f?void 0:f.total,rows:void 0==Ve?[]:Ve,columns:[{field:"id",headerName:"#",width:50},{field:"col1",headerName:"Nom",width:180},{field:"col2",headerName:"Quantit\xe9s",width:150},{field:"col3",headerName:"Prix",width:150},{field:"col4",headerName:"Sous-Total",width:150}]}),Object(W.jsxs)("div",{className:"colture_buttons",children:[Object(W.jsxs)("div",{style:{width:"100%",marginTop:"1rem",display:"flex",justifyContent:"center"},children:[Object(W.jsx)(b.a,{className:"colture_buton",onClick:function(){return function(){var e,t,n,c,r,i,a,o,s,l,d,u,j=[],b={surPlace:0,livraison:0,emporter:0,borne:0};$.map((function(e){return"sur place"==e.order_type?b.surPlace+=1:"emporter"==e.order_type?b.livraison+=1:"livraison"==e.order_type?b.emporter+=1:1==e.from_kiosk?b.borne+=1:void 0}));var h=function(e){var t,n=null===(t=ae.today)||void 0===t?void 0:t.groups[e],c=0;null===n||void 0===n||n.forEach((function(e){c=c+e.price+e.price*e.tva/100})),j.push({qt:n.length,name:e,prix:c})};for(var O in null===(m=ae.today)||void 0===m?void 0:m.groups){var m;h(O)}var p={5.5:0,10:0,20:0};for(var x in null===(v=ae.today)||void 0===v?void 0:v.tvas){var v,f,g=null===(f=ae.today)||void 0===f?void 0:f.tvas[x];for(var A in p)A==x&&(p[A]=g)}var y={restaurant:{name:ae.Restaurant.name,address:ae.Restaurant.address,telephone:ae.Restaurant.telephone},cancledOrders:V,ordersType:b,products:null===(e=ae.today)||void 0===e||null===(t=e.orderItems)||void 0===t?void 0:t.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:Ke({id:e.item_id}).name})})),impression:H+" "+Me,ouverture:Ge,fermeture:H+" "+Me,commandes:ae.today.nbr,logs:null===(n=ae.today.logs)||void 0===n?void 0:n.filter((function(e){return"Annulation"==e.title_log})),clients:Object.keys((null===(c=ae.today)||void 0===c?void 0:c.clientGroups)||{}).length,ticket_moyen:(((null===(r=ae.today)||void 0===r?void 0:r.total)+Ze)/(null===(i=ae.today)||void 0===i?void 0:i.nbr)).toFixed(2),pay_method:j,sometva:null===(a=ae.today)||void 0===a?void 0:a.todaytva,ht:null===(o=ae.today)||void 0===o?void 0:o.total.toFixed(2),ttc:((null===(s=ae.today)||void 0===s?void 0:s.total)+Ze).toFixed(2),fond_initial:null===(l=ae.lastOuverture)||void 0===l?void 0:l.montant.toFixed(2),fond_final:((null===(d=ae.lastOuverture)||void 0===d?void 0:d.montant)+(null===(u=ae.today)||void 0===u?void 0:u.total)+Ze).toFixed(2)};_.a.post("http://192.168.1.166:5000/api/printzcaisse",{PrintData:y,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}()},style:{marginRight:"1rem"},variant:"outline-info",children:"".concat(N("print")," X ").concat(N("ofCashier"))}),Object(W.jsx)(b.a,{className:"colture_buton",variant:"outline-danger",onClick:function(){return ke(!Ne)},children:"Visualiser Ticket"})]}),Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem",height:"100px"},children:[Object(W.jsx)("h3",{style:{color:"#ff6b6b",fontWeight:"bold",marginRight:"1rem",width:"max-content"},children:((null===(g=ae.lastOuverture)||void 0===g?void 0:g.montant)+(null===(A=ae.today)||void 0===A?void 0:A.total)).toFixed(2)+" \u20ac"}),Object(W.jsx)(b.a,{variant:"danger",className:"clot_btn ",onClick:function(){return function(){var e,t,n,c,r,i,a,o,s,l,d,u,j=[],b={surPlace:0,livraison:0,emporter:0,borne:0};$.map((function(e){return"sur place"==e.order_type?b.surPlace+=1:"emporter"==e.order_type?b.livraison+=1:"livraison"==e.order_type?b.emporter+=1:1==e.from_kiosk?b.borne+=1:void 0}));var h=function(e){var t,n=null===(t=ae.today)||void 0===t?void 0:t.groups[e],c=0;null===n||void 0===n||n.forEach((function(e){c=c+e.price+e.price*e.tva/100})),j.push({qt:n.length,name:e,prix:c})};for(var O in null===(m=ae.today)||void 0===m?void 0:m.groups){var m;h(O)}var p={restaurant:{name:ae.Restaurant.name,address:ae.Restaurant.address,telephone:ae.Restaurant.telephone},cancledOrders:V,ordersType:b,products:null===(e=ae.today)||void 0===e||null===(t=e.orderItems)||void 0===t?void 0:t.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:Ke({id:e.item_id}).name})})),impression:H+" "+Me,ouverture:Ge,fermeture:H+" "+Me,commandes:ae.today.nbr,logs:null===(n=ae.today.logs)||void 0===n?void 0:n.filter((function(e){return"Annulation"==e.title_log})),clients:Object.keys((null===(c=ae.today)||void 0===c?void 0:c.clientGroups)||{}).length,ticket_moyen:(((null===(r=ae.today)||void 0===r?void 0:r.total)+Ze)/(null===(i=ae.today)||void 0===i?void 0:i.nbr)).toFixed(2),pay_method:j,sometva:null===(a=ae.today)||void 0===a?void 0:a.todaytva,ht:null===(o=ae.today)||void 0===o?void 0:o.total.toFixed(2),ttc:((null===(s=ae.today)||void 0===s?void 0:s.total)+Ze).toFixed(2),fond_initial:null===(l=ae.lastOuverture)||void 0===l?void 0:l.montant.toFixed(2),fond_final:((null===(d=ae.lastOuverture)||void 0===d?void 0:d.montant)+(null===(u=ae.today)||void 0===u?void 0:u.total)+Ze).toFixed(2)},x={caisse_id:P,date:Date.now(),montant:ce,type:"close"};0==K?_.a.post("http://192.168.1.166:5000/api/CloseCaisse",{user_id:I,user:S,montant:ce,historiquePrint:x}).then((function(e){localStorage.clear(),k(Fe()),Q.a.fire({position:"center",icon:"success",title:"Caisse ferm\xe9e",showConfirmButton:!1,timer:1500}),_.a.post("http://192.168.1.166:5000/api/historiqueZcaisse",{PrintData:p,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),setTimeout((function(){w("/init")}),1500)})):1==K?Q.a.fire({position:"center",icon:"error",title:"Il ya ".concat(K," commande en cours"),showConfirmButton:!1,timer:2500}):Q.a.fire({position:"center",icon:"error",title:"Il ya ".concat(K," commandes en cours"),showConfirmButton:!1,timer:2500})}()},children:N("close")})]})]})]})]})]}):Object(W.jsxs)("div",{className:"loading-z-caisse",children:[Object(W.jsx)("h1",{children:"Chargement de caisse..."}),Object(W.jsx)("img",{src:et,alt:"loading"})]}),Object(W.jsxs)(ge.a,{show:Ne,onHide:function(){return ke(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0}),";",Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{className:"z-cais_show_ticket",children:Object(W.jsx)(Wt,{products:null===(y=ae.today)||void 0===y||null===(C=y.orderItems)||void 0===C?void 0:C.map((function(e){var t;return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:null===(t=Ke({id:e.item_id}))||void 0===t?void 0:t.name})})),data:pe,recap:ae,selectedDate:H,tvasum:Ze})})}),Object(W.jsx)(ge.a.Footer,{children:Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return ke(!1)},children:"Fermer"})})]}),Object(W.jsxs)(ge.a,{show:De,onHide:function(){return Le(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)("h4",{children:"Historique Z-Caisse"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{className:"z-cais_history",children:0==qe.length?"Il n'y a pas d'historique encore ... ":qe.map((function(e,t){return Object(W.jsxs)("div",{className:"z-history",children:[Object(W.jsxs)("h6",{children:[" Du ",e.data.ouverture,"  au ",e.data.fermeture]}),Object(W.jsxs)("div",{children:[Object(W.jsx)(b.a,{variant:"info",onClick:function(){return t=e.data,void _.a.post("http://192.168.1.166:5000/api/printzcaisse",{PrintData:t,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var t},children:"Imprimer"}),Object(W.jsx)(b.a,{variant:"success",onClick:function(){return function(e){Pe(!0),ye(e),console.log(e)}(e.data)},style:{marginLeft:"1rem"},children:"Afficher"})]})]},t)}))})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)("div",{children:Object(W.jsx)(b.a,{variant:"success",onClick:function(){return w("/data/zcaisse")},children:"Zcaisse"})}),Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return Le(!1)},children:"Fermer"})]})]}),Object(W.jsxs)(ge.a,{show:Te,onHide:function(){return Pe(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0}),";",Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{className:"z-cais_show_ticket",children:Object(W.jsx)(Kt,{zHistory:Ae})})}),Object(W.jsx)(ge.a.Footer,{children:Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return Pe(!1)},children:"Fermer"})})]})]})},Zt=(n(488),n(489),function(){var e=Object(h.d)((function(e){return e.data})),t=Object(r.useState)({products:e.products,categories:e.categories,nsteps:e.nSteps}),n=Object(o.a)(t,2),c=n[0];n[1];console.log(c);var i=Object(r.useState)(0),a=Object(o.a)(i,2),s=a[0],l=a[1],d=Object(r.useState)(0),u=Object(o.a)(d,2),j=u[0],m=u[1],p=Object(r.useState)(0),x=Object(o.a)(p,2),v=x[0],f=x[1],g=function(e){return c.products.find((function(t){return t.id==e}))||{}};return Object(r.useEffect)((function(){console.log("cat",s),console.log("prod",j),console.log("step",v),console.log(c.nsteps.filter((function(e){return e.product_id==j}))[0])}),[j,s,v]),Object(W.jsxs)("div",{className:"all",children:[Object(W.jsx)("div",{className:"cats",children:c.categories.filter((function(e){return 746==e.id})).map((function(e){return Object(W.jsxs)("div",{className:"cat",onClick:function(){l(e.id),f(0)},children:[Object(W.jsx)("img",Object(O.a)({src:e.picture,alt:"",height:"70px"},"height","70px")),Object(W.jsx)("h6",{children:e.name})]})}))}),Object(W.jsxs)("div",{className:"prods",children:[0==v?c.products.filter((function(e){return e.cat_id==s})).map((function(e){return Object(W.jsxs)("div",{className:"prod",onClick:function(){m(e.id),e.nsteps>v&&f(v+1)},children:[Object(W.jsx)("img",Object(O.a)({src:e.image,alt:"",height:"70px"},"height","70px")),Object(W.jsxs)("h6",{children:[e.name," ",Object(W.jsxs)("span",{children:["- ",e.price," $"]})," "]}),Object(W.jsx)("p",{children:e.description})]})})):c.nsteps.filter((function(e){return e.menu_id==j}))[0][v].choice.map((function(e){return Object(W.jsxs)("div",{className:"prod",children:[Object(W.jsx)("img",Object(O.a)({src:g(e).image,alt:"",height:"70px"},"height","70px")),Object(W.jsxs)("h6",{children:[g(e).name," ",Object(W.jsxs)("span",{children:["- ",g(e).price," $"]})," "]}),Object(W.jsx)("p",{children:g(e).description})]})})),g(j).nsteps>=v&&v>0?Object(W.jsx)(b.a,{onClick:function(){return f(v-1)},children:"retour"}):"",g(j).nsteps>v&&v>0?Object(W.jsx)(b.a,{onClick:function(){console.log(g(j)),g(j).nsteps>v&&f(v+1)},children:"suivant"}):"",g(j).nsteps==v?Object(W.jsx)(b.a,{children:"finir"}):""]}),Object(W.jsx)("div",{className:"cart"})]})}),Xt=(n(313),n.p,function(e){var t,n,c,a,l,d,u,j,b=e.order,h=e.thisDate,O=(e.ping,localStorage.getItem("address")),m=localStorage.getItem("user_id"),p=[],x=(Object(s.g)().table_id,localStorage.getItem("telephone")),v=Object(r.useState)(b),f=Object(o.a)(v,2),g=f[0],A=f[1];console.log("toShowOrder",g);var y=localStorage.getItem("currency"),C=Object(r.useState)(!0),N=Object(o.a)(C,2),k=(N[0],N[1],Object(r.useState)({})),w=Object(o.a)(k,2),S=w[0],I=w[1];Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getRestaurantData",{user_id:m}).then((function(e){I(e.data)})).catch((function(e){console.log(e)}))}),[g]),Object(r.useEffect)((function(){A(b)}),[b]);T=(null===g||void 0===g?void 0:g.tvas)||[],P="perc",T.reduce((function(e,t){return(e[t[P]]=e[t[P]]||[]).push(t.value),e}),{});var T,P,E=0;console.log(E);var B,D,L,F,R,H,q,z,Q,M,G,K,V,Z,U,J,Y,$,ee,te,ne,ce=!1,re=!1;b.orderItems;null===(t=b.orderItems)||void 0===t||t.forEach((function(e){1==e.is_alcool?ce=!0:1==e.is_conserved&&(re=!0)})),E=1==ce?20:1==re?5.5:10,console.log(E),L=0,D=0,B=0,F=0,R=0,H=0,M=0,V=0,G=0,K=0,Z=0,Y=0,U=0,J=0,$=0,ne=0,ee=0,te=0,null===b||void 0===b||null===(n=b.orderItems)||void 0===n||n.map((function(e){1==e.is_alcool?(B+=e.qt,G=e.qt,K=e.price,H=+G*e.price,V+=H,M=(Q=G*(K/1.2))+M):1==e.is_conserved?(D+=e.qt,U=e.qt,J=e.price,F=+U*e.price,Y+=F,Z=(q=U*(J/1.055))+Z,console.log("totalprice1",Y)):0==e.is_alcool&&0==e.is_conserved&&(L+=e.qt,ee=e.qt,te=e.price,R=+ee*e.price,ne+=R,$=(z=ee*(te/1.1))+$,console.log("totalprice2",ne)),q+z+Q,console.log("ht",Q);var t={name:"TVA 5.5",count:D,totaltcc:Y,amount:Z.toFixed(2)},n={name:"TVA 10%",count:L,totaltcc:ne,amount:$.toFixed(2)},c={name:"TVA  20%",count:B,totaltcc:V,amount:M.toFixed(2)};p[0]=t,p[1]=n,p[2]=c}));var ie=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})};return Object(W.jsx)(X.a,{fluid:!0,children:Object(W.jsx)("div",{className:"ticket",children:Object(W.jsxs)("div",{className:"ticket_container",children:[Object(W.jsx)("h3",{style:{marginTop:"0.5rem"},children:Object(W.jsx)("b",{children:"Ticket d'encaissement"})}),Object(W.jsxs)("p",{children:[S.name," ",Object(W.jsx)("br",{}),O||"-"+x||""," ",Object(W.jsx)("br",{}),"tel: ",S.telephone]}),Object(W.jsx)("h1",{children:Object(W.jsx)("b",{style:{fontSize:"56px"},children:null===g||void 0===g?void 0:g.order_id})}),Object(W.jsxs)("div",{className:"ticket_item",style:{flexWrap:"wrap"},children:[Object(W.jsxs)("p",{children:["Client :",g.customer_name]}),Object(W.jsxs)("p",{children:["Type :",g.orderType]}),Object(W.jsxs)("p",{children:["Numero :",g.customer_tel]}),Object(W.jsxs)("p",{children:["Adresse:",g.customer_adress]})]}),Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),g.orderItems&&g.orderItems.map((function(e,t){var n,c;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:"ticket_item",children:[Object(W.jsx)("p",{children:t+1+"-"+(null===e||void 0===e?void 0:e.name)}),Object(W.jsxs)("div",{style:{display:"flex",width:"50%",justifyContent:"space-evenly"},children:[Object(W.jsx)("p",{children:void 0==(null===e||void 0===e?void 0:e.qt)?e.quantity:e.qt+"x"}),Object(W.jsxs)("p",{children:["  ".concat(null===e||void 0===e?void 0:e.price.toFixed(2)," ")," ",ie("<i>".concat(y,"</i>"))]})]})]}),e.stepItems&&Object.keys(e.stepItems).length?Object(W.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:Object.keys(e.stepItems).map((function(t){return e.stepItems[t].map((function(e){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}))}):(null===e||void 0===e?void 0:e.steps)!=[]?Object(W.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:null===(n=e.steps)||void 0===n?void 0:n.map((function(e){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}):"",(null===e||void 0===e?void 0:e.extras)!=[]?null===e||void 0===e||null===(c=e.extras)||void 0===c?void 0:c.map((function(e){return e.default_quantity>0?Object(W.jsxs)("div",{className:"ticket_extra",children:[Object(W.jsxs)("p",{children:["+ ",e.title]}),Object(W.jsxs)("div",{style:{display:"flex",width:"30%",justifyContent:"space-evenly"},children:[" ",Object(W.jsx)("p",{children:e.default_quantity+"x"}),Object(W.jsxs)("p",{children:["  ".concat(e.price.toFixed(2)," "),ie("<i>".concat(y,"</i>"))]})]})]}):""})):""]})})),Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),Object(W.jsx)("div",{className:"ticket_item ticket_last",style:{width:"200px"},children:p.map((function(e){return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexwrap:"wrap",width:"100px",marginTop:"30px",alignItems:"center",height:"60px"},children:[Object(W.jsx)("li",{style:{marginBottom:"-5px"},children:e.name}),Object(W.jsxs)("p",{style:{marginBottom:"-5px"},children:[e.count," "]}),Object(W.jsx)("p",{style:{marginBottom:"-5px"},children:e.amount})]})})}))}),Object(W.jsx)("div",{style:{marginTop:"20px"},children:" -------------------------------------"}),Object(W.jsxs)("div",{className:"ticket_item ticket_last",style:{marginTop:"20px"},children:[Object(W.jsx)("p",{children:"Total TTC : "}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[null===g||void 0===g?void 0:g.totalPrice,ie("<i>".concat(y,"</i>"))]})})]}),(null===(c=g.paymentsInDb)||void 0===c?void 0:c.length)>0&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),null===(a=g.paymentsInDb)||void 0===a?void 0:a.map((function(e){return Object(W.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(W.jsxs)("p",{children:["Pay\xe9(",e.pay_method,")"]}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[e.amount.toFixed(2),ie("<i>".concat(y,"</i>"))]})})]})})),Object(W.jsx)("div",{className:"ticket_item ticket_last",children:(null===(l=g.paymentsInDb)||void 0===l?void 0:l.reduce((function(e,t){return e+t.amount}),0))-(null===g||void 0===g?void 0:g.totalPrice)>0?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{children:"Rendre monnaie"}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[null===(d=(null===(u=g.paymentsInDb)||void 0===u?void 0:u.reduce((function(e,t){return e+t.amount}),0))-(null===g||void 0===g?void 0:g.totalPrice))||void 0===d?void 0:d.toFixed(2),ie("<i>".concat(y,"</i>"))]})})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{children:"Reste a payer"}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[Math.abs(((null===(j=g.paymentsInDb)||void 0===j?void 0:j.reduce((function(e,t){return e+t.amount}),0))-(null===g||void 0===g?void 0:g.totalPrice)).toFixed(2)),ie("<i>".concat(y,"</i>"))]})})]})})]}),Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:null!==g&&void 0!==g&&g.part&&"partager"==(null===g||void 0===g?void 0:g.type)?Object(W.jsxs)("p",{style:{display:"flex"},children:["Votre part pour 1/".concat(null===g||void 0===g?void 0:g.part," personnes est : ").concat(((null===g||void 0===g?void 0:g.totalPrice)/g.part).toFixed(2),"\n              "),ie("<i>".concat(y,"</i>"))]}):""})}),Object(W.jsx)("p",{children:h}),Object(W.jsx)("img",{src:"https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=".concat(null===g||void 0===g?void 0:g.order_id,"&choe=UTF-8+"),width:"40%"}),Object(W.jsxs)("p",{children:["Scanner le numero de Commande ",null===g||void 0===g?void 0:g.order_id]})]})})})}),Ut=(n(497),function(){var e,t,n,c,a,u,O,m,p,x,v,f,g,A=new Date,y=A.getHours()+":"+A.getMinutes(),C=A.toISOString().substr(0,10),N=Object(r.useState)(0),k=Object(o.a)(N,2),w=(k[0],k[1],Object(r.useState)({prenom:"",company:"",code1:"",code2:"",etage:"",interphone:"",name:"",phone:"",address:"",post:"",city:"",message:"",email:"",type:"emporter",nbrCouverts:1,date:C,time:y,id:0})),S=Object(o.a)(w,2),I=S[0],T=S[1],P=(Object(h.d)((function(e){return e.order.checkoutData||[]})),Object(r.useState)(!1)),E=Object(o.a)(P,2),B=E[0],D=E[1],L=Object(r.useState)(!1),F=Object(o.a)(L,2),R=F[0],H=F[1],z=Object(r.useState)(!1),M=Object(o.a)(z,2),G=M[0],K=M[1],V=localStorage.getItem("username")||"",J=Object(s.g)(),$=Object(h.c)(),ne=Object(s.f)(),ce=J.table_id,re=localStorage.getItem("username"),ie=Object(h.d)((function(e){return e.order.checkoutData})),ae=Object(h.d)((function(e){return e.order.selectedTable})),oe=Object(h.d)((function(e){return e.order.client})),se=Object(h.d)((function(e){return e.data.ping})),le=Object(h.d)((function(e){return e.data.clients})),de=ie.filter((function(e){return e.order_id==ce}))[0]||{};console.log("thisOrder",de);var ue=[];void 0==de.totalPrice&&(de=Object(Y.a)(Object(Y.a)({},de),{},{totalPrice:de.price,tvas:[{perc:de.tva}]}));var je,be,he,Oe,pe,xe,ve,Ae,ye,Ce,_e,Ne,ke,we,Se,Ee,De,Le,Fe=new Date(void 0==de.Date?de.date:de.Date),Re=null===Fe||void 0===Fe?void 0:Fe.getDate(),He=null===Fe||void 0===Fe?void 0:Fe.getMonth(),qe=null===Fe||void 0===Fe?void 0:Fe.getFullYear(),ze=null===Fe||void 0===Fe?void 0:Fe.getHours(),We=null===Fe||void 0===Fe?void 0:Fe.getMinutes(),Me=Object(r.useState)(!1),Ge=Object(o.a)(Me,2),Ke=Ge[0],Ue=Ge[1],et=Object(r.useState)(!1),ct=Object(o.a)(et,2),rt=ct[0],at=ct[1],ot=Object(r.useState)(!1),st=Object(o.a)(ot,2),lt=st[0],dt=st[1],ut=Object(r.useState)(!1),jt=Object(o.a)(ut,2),bt=(jt[0],jt[1],Object(r.useState)(!1)),ht=Object(o.a)(bt,2),mt=ht[0],pt=ht[1],xt=Object(r.useState)(!1),vt=Object(o.a)(xt,2),ft=vt[0],gt=(vt[1],Object(r.useState)(1)),At=Object(o.a)(gt,2),yt=At[0],Ct=At[1],_t=Object(r.useState)("partager"),Nt=Object(o.a)(_t,2),kt=Nt[0],wt=Nt[1],St=Object(r.useState)("Especes"),It=Object(o.a)(St,2),Tt=It[0],Pt=It[1],Et=Object(r.useState)(0),Bt=Object(o.a)(Et,2),Dt=Bt[0],Lt=Bt[1],Ft=Object(r.useState)(0),Rt=Object(o.a)(Ft,2),Ht=Rt[0],qt=Rt[1],zt=Object(r.useState)(""),Qt=Object(o.a)(zt,2),Wt=Qt[0],Mt=(Qt[1],Object(r.useState)(!1)),Gt=Object(o.a)(Mt,2),Kt=Gt[0],Vt=Gt[1],Zt=Object(r.useState)(""),Ut=Object(o.a)(Zt,2),Jt=(Ut[0],Ut[1]),Yt=Object(r.useState)(1),$t=Object(o.a)(Yt,2),en=$t[0],tn=$t[1],nn=Object(r.useState)("pay"),cn=Object(o.a)(nn,2),rn=cn[0],an=cn[1],on=Object(r.useState)(!1),sn=Object(o.a)(on,2),ln=(sn[0],sn[1],Object(r.useState)("")),dn=Object(o.a)(ln,2),un=dn[0],jn=dn[1],bn=Object(r.useState)([]),hn=Object(o.a)(bn,2),On=hn[0],mn=hn[1],pn=localStorage.getItem("user_id"),xn=function(e){D(!0),de=Object(Y.a)(Object(Y.a)({},de),{},{client_id:e,customer_name:I.name,customer_tel:oe.phone}),_.a.post("http://192.168.1.166:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},de),{},{nbrCouverts:en,message:Wt,pay_method:Tt,amount:Dt,amountPaid:Ht})}).then((function(e){console.log(e.data),console.log(Dt),console.log(Ht),mn([].concat(Object(te.a)(On),[{type:Tt,value:Dt}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(Tt);setTimeout((function(){var e;Ht+Dt>=(null===(e=de)||void 0===e?void 0:e.totalPrice).toFixed(2)&&Nn()}),1),Lt(0)})).catch((function(e){console.log(e)}))},vn=function(){0==lt?_.a.post("http://192.168.1.166:5000/api/createClient",{user_id:pn,client:{etage:I.etage||0,interphone:I.interphone||0,supprimer:0,societe:I.company||"",nom_prenom:I.name||"",telephone:I.phone||"",adresse:I.address||"",code_postal:I.post||0,ville:I.city||"",email:I.email||"",code_1:I.code1||"",code_2:I.code2||""}}).then((function(e){xn(e.data.id)})).catch((function(e){return console.log(e)})):($(Pe({clientone:I})),xn())},fn=function(e){dt(!0);var t=null===le||void 0===le?void 0:le.filter((function(t){var n,c,r;return(null===(n=t.nom_prenom)||void 0===n?void 0:n.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(c=t.telephone)||void 0===c?void 0:c.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))}))[0];t&&T(Object(Y.a)(Object(Y.a)({},I),{},{id:t.id,prenom:t.nom_prenom,company:t.societe,code1:t.code_1,code2:t.code_2,etage:t.etage,interphone:t.interphone,name:t.nom_prenom,phone:t.telephone,address:t.adresse,post:t.code_postal,city:t.ville,email:t.email}))};he=0,be=0,je=0,Oe=0,pe=0,xe=0,ve=0,Ce=0,Ae=0,ye=0,_e=0,we=0,Ne=0,ke=0,Se=0,Le=0,Ee=0,De=0,null===(e=de)||void 0===e||null===(t=e.orderItems)||void 0===t||t.map((function(e){e.is_alcool?(je+=e.qt,Ae=e.qt,ye=e.price,xe=+Ae*e.price,Ce+=xe,ve=Ae*(ye/1.2)+ve,console.log("totalprice3",Ce)):e.is_conserved?(be+=e.qt,Ne=e.qt,ke=e.price,Oe=+Ne*e.price,we+=Oe,_e=Ne*(ke/1.055)+_e,console.log("totalprice1",we)):0==e.is_alcool&&0==e.is_conserved&&(he+=e.qt,Ee=e.qt,De=e.price,pe=+Ee*e.price,Le+=pe,Se=Ee*(De/1.1)+Se,console.log("totalprice2",Le));var t={name:"5.5 %",count:be,totaltcc:we,amount:_e.toFixed(2)},n={name:"10 %",count:he,totaltcc:Le,amount:Se.toFixed(2)},c={name:"20 %",count:je,totaltcc:Ce,amount:ve.toFixed(2)};ue[0]=t,ue[1]=n,ue[2]=c,console.log("tvass2",ue[2])}));var gn=function(){var e,t;_.a.post("http://192.168.1.166:5000/api/verifyCoupon",{code:un,user_id:pn,paidamount:null===(e=de)||void 0===e||null===(t=e.totalPrice)||void 0===t?void 0:t.toFixed(2)}).then((function(e){var t=e.data.couponInDb.discount,n=(new Date).toISOString().slice(0,10);e.data.couponInDb.expires_at>n?(Lt(Number(e.data.couponInDb.discount+Dt)),Pt("ticket restaurant"),Q.a.fire({icon:"success",title:"Coupon valid\xe9 pour ".concat(t," euro"),showConfirmButton:!1,timer:1500})):Q.a.fire({icon:"warning",title:"Validit\xe9 epuis\xe9",showConfirmButton:!1,timer:1500})})).catch((function(e){return Q.a.fire({icon:"warning",title:"Coupon non valide",showConfirmButton:!1,timer:1500})}))},An=function(){return Ue(!1)},yn=Re+"-"+He+"-"+qe+"-"+ze+":"+We,Cn=function(){var e,t=(Dt-(null===(e=de)||void 0===e?void 0:e.totalPrice)).toFixed(2);t>0?Q.a.fire({title:"Comment voulez-vous rendre <b style='color:red'>"+t+wn+"</b> ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Avoir",denyButtonText:"Rendre monnaies directement"}).then((function(e){e.isDenied?_.a.post("http://192.168.1.166:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},de),{},{nbrCouverts:en,message:Wt,pay_method:Tt,amount:Dt,amountPaid:Ht})}).then((function(e){console.log(e.data),console.log(Dt),console.log(Ht),mn([].concat(Object(te.a)(On),[{type:Tt,value:Dt}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(Tt);setTimeout((function(){var e;Ht+Dt>=(null===(e=de)||void 0===e?void 0:e.totalPrice).toFixed(2)&&Nn()}),1),Lt(0)})).catch((function(e){console.log(e)})):e.isConfirmed?Q.a.fire({title:"Client existant ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then((function(e){e.isDenied?(D(!0),H(!0)):e.isConfirmed&&(at(!0),D(!0))})):e.isConfirmed&&""!=de.customer_tel||e.isConfirmed&&""==de.customer_tel?(D(!0),H(!0)):e.isConfirmed&&D(!0)})):_.a.post("http://192.168.1.166:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},de),{},{nbrCouverts:en,message:Wt,pay_method:Tt,amount:Dt,amountPaid:Ht})}).then((function(e){mn([].concat(Object(te.a)(On),[{type:Tt,value:Dt}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(Tt);setTimeout((function(){var e;Ht+Dt>=(null===(e=de)||void 0===e?void 0:e.totalPrice).toFixed(2)&&Nn()}),1),Lt(0)})).catch((function(e){console.log(e)}))},_n=function(){$(Qe(yt)),An(),yt>1?_.a.post("http://192.168.1.166:5000/api/updatehow_paid",{type:kt,order:de}).then((function(e){console.log(e.data),e.data&&ne("/checkout2/".concat(ce,"/").concat(kt,"/").concat(yt))})).catch((function(e){console.log(e)})):pt(!0)},Nn=function(){var e,t,n,c,r,i,a;de.orderItems;(de.orderItems.forEach((function(e){20==e.tva&&!0})),_.a.post("http://192.168.1.166:5000/api/printFinalOrder",{isavoir:B,user_id:pn,order:Object(Y.a)(Object(Y.a)({},de),{},{nbrCouverts:en,table_number:de.table||"",order_id:de.order_id,Date:new Date,amount:Dt>=(null===(e=de)||void 0===e?void 0:e.totalPrice)-(0/(null===(t=de)||void 0===t?void 0:t.totalPrice)).toFixed(2)?((null===(n=de)||void 0===n?void 0:n.totalPrice)-0/(null===(c=de)||void 0===c?void 0:c.totalPrice)).toFixed(2)-Ht:Dt-Ht,amountPaid:Dt,paymentType:Tt}),type:"payertout"}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),1==Kt)&&_.a.post("http://192.168.1.166:5000/api/printnotefrais",{user_id:pn,order:Object(Y.a)(Object(Y.a)({},de),{},{tvas:ue,nbrCouverts:en,table_number:de.table||"",order_id:de.order_id,Date:new Date,amount:Dt>=(null===(i=de)||void 0===i?void 0:i.totalPrice)?(null===(a=de)||void 0===a?void 0:a.totalPrice).toFixed(2)-Ht:Dt-Ht,amountPaid:Dt,paymentType:Tt})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var o,s=(Ht+Dt-(null===(r=de)||void 0===r?void 0:r.totalPrice)).toFixed(2),l=(Ht+Dt).toFixed(2);"ticket restaurant"==Tt||1==B?(Q.a.fire({icon:"success",title:"<h5 >"+"le paiement effectu\xe9 avec succ\xe8s avec montant: <span style='color:red'>".concat(Dt,"\u20ac</span> D'avoir:<span style='color:green'>").concat((Ht-(null===(o=de)||void 0===o?void 0:o.totalPrice)).toFixed(2),"\u20ac</span> ")+"</h5>",showConfirmButton:!1,timer:3e3}),K(!1),ne("/main"),$(Te({order_id:ce}))):(Q.a.fire({icon:"success",title:"<h5 >"+"le paiement effectu\xe9 avec succ\xe8s avec montant: <span style='color:red'>".concat(l,"\u20ac</span> du reste:<span style='color:green'>").concat(s,"\u20ac</span> ")+"</h5>",showConfirmButton:!1,timer:3e3}),K(!1),ne("/main"),$(Te({order_id:ce})))},kn=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},wn=localStorage.getItem("currency"),Sn=q().t,In=Object(r.useRef)(),Tn=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 , {bksp}"]),Pn=Object(o.a)(Tn,2),En=Pn[0];Pn[1];return Object(W.jsxs)("div",{style:{backgroundColor:"white"},children:[Object(W.jsx)(Z.a,{variant:"warning",className:"navbar",children:Object(W.jsxs)(X.a,{className:"history-navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){return ne("/main")},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return ne("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-cassier",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),Sn("cashier")]})})]}),Object(W.jsxs)("h6",{className:"chekout-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:V}),Object(W.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void ne("/")},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(W.jsxs)(X.a,{fluid:!0,children:[Object(W.jsxs)(Je.a,{className:"row_h",children:[Object(W.jsx)(Ye.a,{xs:8,className:"col_h",children:Object(W.jsxs)("div",{style:{marginTop:"1rem",height:"max-content",padding:"1rem",boxShadow:"rgba(17, 12, 46, 0.15) 0px 48px 100px 0px",overflow:"auto"},children:[Object(W.jsxs)("div",{style:{justifyContent:"space-between",display:"flex"},children:[Object(W.jsxs)("div",{className:"leftt",children:[Object(W.jsx)("h6",{className:"checkout-tbd",children:Object(W.jsx)("b",{children:"Commande"})}),Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.M,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsxs)("b",{children:["#",de.order_id]})]}),Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.u,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsx)("b",{children:yn})]}),"sur place"==de.orderType&&Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.M,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsxs)("b",{children:["Table ",ae.nbr]})]})]}),Object.keys(I).length>0?Object(W.jsxs)("div",{className:"rightt",children:[Object(W.jsx)("h6",{className:"checkout-tbd",children:Object(W.jsx)("b",{children:I.name})}),Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.A,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsx)("b",{children:I.phone})]}),Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.w,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsx)("b",{children:I.address})]}),Object(W.jsxs)("h6",{className:"checkout-tbd",children:[Object(W.jsx)(l.a,{icon:d.n,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(W.jsx)("b",{children:de.orderType})]})]}):""]}),Object(W.jsxs)(fe.a,{hover:!0,children:[Object(W.jsx)("thead",{className:"tbd",children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"#"}),Object(W.jsx)("th",{children:"Article"}),Object(W.jsx)("th",{children:"Prix"}),Object(W.jsx)("th",{children:"Qt"}),Object(W.jsx)("th",{children:"Total"})]})}),Object(W.jsx)("tbody",{className:"ccc",children:null===(n=de)||void 0===n||null===(c=n.orderItems)||void 0===c?void 0:c.map((function(e,t){var n,c;return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:t}),Object(W.jsxs)("td",{children:[e.name,Object(W.jsx)("br",{})]}),Object(W.jsxs)("td",{style:{display:"flex"},children:[null===(n=e.price)||void 0===n?void 0:n.toFixed(2)," ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsx)("td",{children:e.qt}),Object(W.jsxs)("td",{style:{display:"flex"},children:[null===(c=e.qt*e.price)||void 0===c?void 0:c.toFixed(2)," ",kn("<i>".concat(wn,"</i>"))]})]})}))})]}),Object(W.jsxs)(Ye.a,{children:[Object(W.jsx)(fe.a,{children:Object(W.jsxs)("tbody",{className:"checkout-tbd",style:{width:"100%",height:"auto",align:"right"},children:[Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{}),Object(W.jsx)("td",{children:Object(W.jsx)("span",{children:Object(W.jsxs)("table",{style:{width:"300px",display:"flex",justifyContent:"space-between",flexDirection:"column",marginLeft:"-450px",marginBottom:"-50px"},children:[Object(W.jsxs)("tr",{className:"tbdtva",children:[Object(W.jsx)("th",{style:{width:"100px"},children:"TVA"}),Object(W.jsx)("th",{style:{width:"100px"},children:"Nbre"}),Object(W.jsx)("th",{style:{width:"100px"},children:"HT"})]}),ue.map((function(e,t){return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{style:{width:"100px"},children:e.name}),Object(W.jsx)("td",{style:{width:"100px"},children:e.count}),Object(W.jsxs)("td",{style:{width:"100px"},children:[e.amount," \u20ac"]})]})}))]})})})]}),Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:Object(W.jsx)("h6",{className:"checkout-tbd",style:{display:"flex",fontWeight:"bold"}})}),Object(W.jsx)("td",{})]})]})}),Object(W.jsx)(fe.a,{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:Object(W.jsxs)("h6",{className:"checkout-tbd",style:{display:"flex",justifyContent:"flexStart",fontWeight:"bold",marginTop:"0px",marginBottom:"50px",fontSize:"1.1rem"},children:["TOTAL TTC :"," "]})}),Object(W.jsx)("td",{children:Object(W.jsxs)("span",{style:{color:"#ff6b6b",display:"flex",marginLeft:"-45rem",fontWeight:"bold",marginTop:"0px",marginBottom:"50px"},children:[" ",null===(a=de)||void 0===a||null===(u=a.totalPrice)||void 0===u?void 0:u.toFixed(2)," ",kn("<i>".concat(wn,"</i>")),"\u20ac"]})})]})})]}),Object(W.jsxs)("div",{className:"regler-addition-btns",style:{marginTop:"550px !important"},children:[Object(W.jsx)(b.a,{variant:"outline-info",onClick:function(){return Ue(!0)},className:"btn_chee",children:"R\xe9gler addition"}),"cooking"!=(null===(O=de)||void 0===O?void 0:O.status)&&"ready"!=(null===(m=de)||void 0===m?void 0:m.status)?Object(W.jsxs)(b.a,{variant:"outline-info",onClick:function(){var e;return ne("/menu/"+(null===(e=de)||void 0===e?void 0:e.order_id))},className:"btn_chee",children:[Object(W.jsx)(l.a,{icon:d.q,style:{marginRight:"0.5rem"}}),"Modifier la commande"]}):""]})]})}),Object(W.jsx)(Ye.a,{xs:4,className:"col_h",children:Object(W.jsx)(Xt,{order:de,thisDate:yn})})]}),Object(W.jsx)(tt,{}),Object(W.jsxs)(ge.a,{show:Ke,onHide:An,children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Addition"})}),Object(W.jsxs)(ge.a.Body,{children:[Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{xs:4,style:{borderRight:"1px solid black"},children:[Object(W.jsxs)("h5",{children:[Object(W.jsx)(l.a,{icon:d.L,style:{color:"#ff6b6b",marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:"Nombre de parts :"})]}),Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",marginTop:"15%"},children:[Object(W.jsx)(l.a,{color:"#ff6b6b",icon:d.d,size:"2x",onClick:function(){yt>1&&Ct(yt-1)}}),Object(W.jsx)("h3",{children:yt}),Object(W.jsx)(l.a,{color:"#ff6b6b",icon:d.e,size:"2x",onClick:function(){yt<de.nbrCouverts&&Ct(yt+1)}})]})]}),Object(W.jsx)(Ye.a,{xs:8,children:Object(W.jsxs)("div",{style:{display:"block",width:"80%",textAlign:"center"},children:[Object(W.jsx)("h5",{children:"Choix de l'addition"}),Object(W.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[Object(W.jsxs)("div",{onClick:function(){return wt("partager")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(W.jsx)(l.a,{icon:d.h,size:"6x",color:"partager"==kt?"#ff6b6b":"grey",className:"faborder"}),Object(W.jsx)("h6",{children:"partager"})]}),Object(W.jsxs)("div",{onClick:function(){return wt("repartir")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(W.jsx)(l.a,{icon:d.i,size:"6x",color:"repartir"==kt?"#ff6b6b":"grey",className:"faborder"}),Object(W.jsx)("h6",{children:"Repartir"})]}),Object(W.jsx)(b.a,{variant:"info",onClick:function(){return _n()},className:"btn_che",style:{marginLeft:"2rem",backgroundColor:"#ff6b6b"},children:Object(W.jsx)("b",{children:"Payer tout"})})]})]})})]}),";"]}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"warning",onClick:function(){Q.a.fire({title:"Motif d'annulation ",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Aucun",denyButtonText:"Impay\xe9",cancelButtonText:"Fermer"}).then((function(e){if(e.isConfirmed)_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:de}).then((function(){return $(me(!se))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(pn),{order:Object(Y.a)({},de)}),$(Be({order:Object(Y.a)(Object(Y.a)({},undefined),{},{status:"rejected",timeRejection:y,rejectedFrom:V,rejected:"Aucun"})})),_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:pn,user:re,faire:"Aucun",title:"Annulation",content:"Annulation de commande par le serveur",price:de.totalPrice}),Q.a.fire({icon:"success",title:"Annul\xe9 (Aucun)",showConfirmButton:!1,timer:1e3}),$(Ie()),ne("/main");else if(e.isDenied){_.a.post("http://192.168.1.166:5000/api/cancelorder",{order:de}).then((function(){return $(me(!se))})),Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET).emit("accept".concat(pn),{order:Object(Y.a)({},de)}),$(Be({order:Object(Y.a)(Object(Y.a)({},de),{},{status:"rejected",timeRejection:y,rejectedFrom:V,rejected:"Impay\xe9"})})),_.a.post("http://192.168.1.166:5000/api/pushlog",{user_id:pn,user:re,faire:"Impay\xe9",title:"Annulation",content:"Annulation de commande par le serveur",price:de.totalPrice}),Q.a.fire({icon:"success",title:"Annul\xe9 (Impay\xe9)",showConfirmButton:!1,timer:1e3}),$(Ie()),ne("/main")}}))},children:Sn("cancel")}),Object(W.jsx)(b.a,{variant:"secondary",onClick:An,children:"Fermer"}),Object(W.jsx)(b.a,{className:"bgcolor",variant:"warning",onClick:function(){return _n()},children:"Payer"})]})]}),Object(W.jsxs)(ge.a,{show:mt,onHide:function(){return pt(!1)},children:[R?Object(W.jsx)("div",{className:"trans_client",children:Object(W.jsxs)("div",{className:"client_forms",children:[Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:I.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return T(Object(Y.a)(Object(Y.a)({},I),{},{name:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsxs)(Ye.a,{children:[(null===(p=I.telephone)||void 0===p?void 0:p.length)>0&&(null===(x=I.telephone)||void 0===x?void 0:x.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)($e.a,{onInputChange:function(e){T(Object(Y.a)(Object(Y.a)({},I),{},{phone:e})),dt(!1)},onChange:function(e){fn(e[0]),console.log(e)},options:le.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:I.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return T(Object(Y.a)(Object(Y.a)({},I),{},{message:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:I.date,type:"date",defaultValue:I.date,onChange:function(e){return T(Object(Y.a)(Object(Y.a)({},I),{},{date:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:I.time,type:"time",defaultValue:I.time,onChange:function(e){return T(Object(Y.a)(Object(Y.a)({},I),{},{time:e.target.value}))}})})]})})]}),Object(W.jsxs)("div",{className:"cli_buttons",children:[Object(W.jsx)(b.a,{onClick:function(){return vn()},children:"Valider"}),Object(W.jsx)(b.a,{variant:"danger",style:{marginLeft:"1rem"},onClick:function(){return H(!1)},children:"annuler"})]})]})}):"",rt?Object(W.jsx)("div",{className:"trans_client",children:Object(W.jsxs)("div",{className:"client_forms",children:[Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsxs)(Ye.a,{children:[(null===(v=I.telephone)||void 0===v?void 0:v.length)>0&&(null===(f=I.telephone)||void 0===f?void 0:f.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)($e.a,{onInputChange:function(e){T(Object(Y.a)(Object(Y.a)({},I),{},{phone:e})),dt(!1)},onChange:function(e){fn(e[0]),console.log(e)},options:le.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:I.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return T(Object(Y.a)(Object(Y.a)({},I),{},{name:e.target.value}))}})})})})]}),Object(W.jsxs)("div",{className:"cli_buttons",children:[Object(W.jsx)(b.a,{onClick:function(){return vn()},children:"Valider"}),Object(W.jsx)(b.a,{variant:"danger",style:{marginLeft:"1rem"},onClick:function(){return at(!1)},children:"annuler"})]})]})}):"",Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"finaliser Commande"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{xs:"5",children:[Object(W.jsxs)(Xe.a,{onSubmit:function(e){e.preventDefault(),gn()},children:[Object(W.jsxs)(Xe.a.Label,{children:[" ",Object(W.jsx)("b",{children:"Paiement Re\xe7u"})," "]}),Object(W.jsx)(Xe.a.Control,{onFocus:function(e){an("pay"),In.current.setInput("")},placeholder:"0.00",value:Ht,onChange:function(e){Lt(e.target.value)},readOnly:!0})]}),Object(W.jsxs)("h6",{style:{marginTop:"1rem"},children:[" ",Object(W.jsx)("b",{children:"Reste \xe0 devoir"})," "]}),Object(W.jsx)("h4",{style:{color:"red"},children:Object(W.jsxs)("b",{style:{display:"flex"},children:[" ",((null===(g=de)||void 0===g?void 0:g.totalPrice)-Ht).toFixed(2),kn("<i>".concat(wn,"</i>"))]})}),Object(W.jsxs)(Xe.a,{onSubmit:function(e){e.preventDefault(),gn()},children:[Object(W.jsxs)(Xe.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(W.jsxs)(Xe.a.Label,{children:[" ",Object(W.jsx)("b",{children:"Details de paiement"})," "]}),Object(W.jsx)("div",{style:{height:"150px",overflow:"auto"},children:On.map((function(e){return Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)("h5",{children:e.type}),Object(W.jsxs)("h5",{children:[e.value,"\u20ac"]})]})}))})]}),Object(W.jsxs)(Xe.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(W.jsxs)(Xe.a.Label,{children:[" ",Object(W.jsx)("b",{children:"Scanner code remise"})," "]}),Object(W.jsx)(Xe.a.Control,{rows:1,placeholder:"*11111111111111*",onChange:function(e){return jn(e.target.value)}})]})]})]}),Object(W.jsxs)(Ye.a,{xs:"5",children:[Object(W.jsxs)(Xe.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsx)(Xe.a.Label,{children:Object(W.jsx)("b",{children:"Addition Total"})}),Object(W.jsx)(Xe.a.Control,{readOnly:!0,type:"number",placeholder:"0.00",value:de.totalPrice.toFixed(2)})]}),Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsxs)(Xe.a.Label,{children:[" ",Object(W.jsx)("b",{children:"Methode de paiement"})," "]}),Object(W.jsxs)(Xe.a.Select,{"aria-label":"Default select example",onChange:function(e){return Pt(e.target.value)},children:[Object(W.jsx)("option",{value:"espece",children:"Especes"}),Object(W.jsx)("option",{value:"carte bleu",children:"Carte bleu"}),Object(W.jsx)("option",{value:"ticket restaurant",children:"Ticket restaurant"}),Object(W.jsx)("option",{value:"cheque",children:"Cheque"}),Object(W.jsx)("option",{value:"Glovo",children:"Glovo"}),Object(W.jsx)("option",{value:"Just-Eat",children:"Just-Eat"}),Object(W.jsx)("option",{value:"Deliveroo",children:"Deliveroo"}),Object(W.jsx)("option",{value:"Uber Eats",children:"Uber Eats"})]})]})]}),Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsx)(Xe.a.Label,{children:Object(W.jsx)("b",{children:"Total"})}),Object(W.jsx)(Xe.a.Control,{type:"number",placeholder:"0.00",value:Dt,onChange:function(e){return Lt(Number(e.target.value))}})]}),Object(W.jsx)(j.a,{theme:"hg-theme-default hg-layout-default myTheme5",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn3",buttons:"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){console.log(e),In.current=e},layoutName:"default",layout:{default:En},onChange:function(e){for(var t=0,n=0;n<e.length;n++){var c=e[n];if(","==c){if(++t>=2)break}else if(0==n&&","==c){t=2;break}}if(t<2){if(Jt(e),console.log("Input changed",e),"pay"==rn){var r=function(e,t){var n=Number(1111.11).toLocaleString(t).replace(/\d+/g,"").split("");return null===e?null:(1==n.length&&n.unshift(""),Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")))}(e,"fr");console.log(r),Lt(r),Jt("")}else tn(e),Jt("");Jt("")}else Jt(""),console.log("Input changed",e),"pay"==rn?(Lt(0),In.current.setInput("0"),Jt("")):(tn(e),Jt("")),Jt("")},onKeyPress:function(e){console.log("Button pressed",e)}})]}),Object(W.jsxs)(Ye.a,{xs:"2",className:"show-pay-modal",children:[Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+.5),In.current.setInput(String(Dt+.5))},children:["0.5 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+1),In.current.setInput(String(Dt+1))},children:["1 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+2),In.current.setInput(String(Dt+2))},children:["2 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+5),In.current.setInput(String(Dt+5))},children:["5 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+10),In.current.setInput(String(Dt+10))},children:["10 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+20),In.current.setInput(String(Dt+20))},children:["20 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+50),In.current.setInput(String(Dt+50))},children:["50 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(Dt+100),In.current.setInput(String(Dt+100))},children:["100 ",kn("<i>".concat(wn,"</i>"))]}),Object(W.jsx)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){var e,t;Lt((null===(e=de)||void 0===e?void 0:e.totalPrice).toFixed(2)-Ht),In.current.setInput(String((null===(t=de)||void 0===t?void 0:t.totalPrice)-Ht))},children:"Payer Tout"}),Object(W.jsx)(b.a,{variant:"warning",style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){Lt(0),In.current.setInput(String(0))},children:"Effacer"})]})]})}),Object(W.jsxs)(ge.a.Footer,{children:[Kt?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Xe.a.Label,{style:{fontSize:"24px",fontWeight:"bold"},children:"Nbr couverts"}),Object(W.jsx)(Xe.a.Control,{onFocus:function(e){an("couverts"),In.current.setInput("")},style:{width:"120px"},placeholder:"1 Couverts",type:"number",value:en,onChange:function(e){return tn(e.target.value)}})]}):"",Object(W.jsx)(Xe.a.Check,{size:"3x",type:"checkbox",label:"Note de frais",style:{fontSize:"24px",marginRight:"2rem",fontWeight:"bold"},onClick:function(){return Vt(!Kt)}}),Object(W.jsx)(b.a,{variant:"danger",onClick:function(){return pt(!1)},children:Sn("cancel")}),ft||G?G?Object(W.jsx)(b.a,{variant:"success",children:Object(W.jsx)(Ot.a,{animation:"border",variant:"light"})}):Object(W.jsx)(b.a,{variant:"outline-danger",onClick:function(){pt(!1),Cn()},children:"Accompte"}):Object(W.jsx)(b.a,{variant:"success",onClick:function(){Dt>0?(qt(Ht+Dt),Cn(),In.current.setInput("")):console.log("null")},children:"Valider"})]})]})]})]})}),Jt=n(239),Yt=function(){var e,t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],a=n[1],u=localStorage.getItem("username")||[],O=Object(s.g)(),m=Object(s.f)(),p=Object(h.c)(),x=O.type,v=O.part,f=O.table_id,g=Object(h.d)((function(e){return e.order.checkoutData})),A=Object(h.d)((function(e){return e.order.ordersPartage})),y=Object(h.d)((function(e){return e.order.partNotPaid})),C=g.filter((function(e){return e.order_id==f}))[0]||{},N=(null===A||void 0===A?void 0:A.map((function(e){return Number(e.amountPaid)})).reduce((function(e,t){return e+t}),0))>0,k=Object(r.useState)([]),w=Object(o.a)(k,2),S=(w[0],w[1],Object(r.useState)([])),I=Object(o.a)(S,2),T=(I[0],I[1],Object(r.useState)(!0)),P=Object(o.a)(T,2),E=P[0],B=(P[1],Object(r.useState)("repartir"==x&&!N)),D=Object(o.a)(B,2),L=D[0],F=D[1],R=Object(r.useState)(0),H=Object(o.a)(R,2),z=H[0],M=H[1],G=Object(r.useState)(0),K=Object(o.a)(G,2),V=K[0],J=K[1],$=Object(r.useState)(""),ne=Object(o.a)($,2),ce=ne[0],re=(ne[1],Object(r.useState)("espece")),ie=Object(o.a)(re,2),ae=ie[0],oe=ie[1],se=Object(r.useState)(!1),le=Object(o.a)(se,2),de=le[0],ue=le[1],je=Object(r.useState)(""),be=Object(o.a)(je,2),he=be[0],Oe=be[1],me=Object(r.useState)(""),pe=Object(o.a)(me,2),xe=(pe[0],pe[1]),ve=Object(r.useState)("pay"),fe=Object(o.a)(ve,2),Ae=fe[0],ye=(fe[1],Object(r.useState)(1)),Ce=Object(o.a)(ye,2),_e=Ce[0],Ne=Ce[1],ke=Object(r.useState)(!1),we=Object(o.a)(ke,2),Se=we[0],Ie=(we[1],Object(r.useState)({})),Pe=Object(o.a)(Ie,2),Ee=Pe[0],Be=Pe[1],De=Object(r.useState)([]),Le=Object(o.a)(De,2),Fe=(Le[0],Le[1],Object(r.useState)([])),Re=Object(o.a)(Fe,2),Me=(Re[0],Re[1],Object(r.useState)(0)),Ge=Object(o.a)(Me,2),Ke=(Ge[0],Ge[1],Object(r.useRef)()),Ve=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 , {bksp}"]),Ze=Object(o.a)(Ve,2),Ue=Ze[0],$e=(Ze[1],!1);C.orderItems;if(C.orderItems.forEach((function(e){20==e.tva&&($e=!0)})),1==$e)20;else switch(C.orderType){case"sur place":default:10;break;case"emporter":case"livraison":5.5}Object(r.useEffect)((function(){if("partager"==x){for(var e=[],t=1;t<=v;t++){var n=Math.floor(65536*(1+Math.random()));e=[].concat(Object(te.a)(e),[Object(Y.a)(Object(Y.a)({},C),{},{totalPrice:(C.totalPrice/v).toFixed(2),partId:n,amount:(C.totalPrice/v).toFixed(2),amountPaid:0,payments:[]})])}0==A.length&&p(He(e))}else if("repartir"==x){var c=[];C.orderItems.map((function(e){for(var t=1;t<=e.qt;t++){var n=Math.floor(65536*(1+Math.random()));c=[].concat(Object(te.a)(c),[Object(Y.a)(Object(Y.a)({},e),{},{repatirId:n})])}}));for(var r=[],i=1;i<=v;i++){var a=Math.floor(65536*(1+Math.random()));r=[].concat(Object(te.a)(r),[Object(Y.a)(Object(Y.a)({},C),{},{totalPrice:0,partId:a,amount:0,amountPaid:0,payments:[],orderItems:[]})])}0==A.length&&(r[0]=Object(Y.a)(Object(Y.a)({},r[0]),{},{orderItems:Object(te.a)(c),totalPrice:C.totalPrice,amount:C.totalPrice}),p(He(r)))}}),[]);Object(r.useEffect)((function(){var e=null===A||void 0===A?void 0:A.map((function(e){return Number(e.amount)})).reduce((function(e,t){return e+t}),0),t=null===A||void 0===A?void 0:A.map((function(e){return Number(e.amountPaid)})).reduce((function(e,t){return e+t}),0);0==y&&_.a.post("http://192.168.1.166:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},C),{},{message:ce,pay_method:ae,amount:t,amountPaid:e})}).then((function(e){Q.a.fire({icon:"success",title:"Le paiement effectu\xe9 avec succ\xe8s",showConfirmButton:!1,timer:1e3}),tt(),p(ze())}))}),[y]);var et=localStorage.getItem("user_id"),tt=function(){m("/main"),p(Te({order_id:f}))},ct=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},rt=localStorage.getItem("currency"),at=q().t;return Object(W.jsxs)("div",{style:{backgroundColor:"white",width:"100%"},children:[Object(W.jsx)(Z.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",height:"70px"},children:Object(W.jsxs)(X.a,{children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){m("/main"),p(ze())},children:Object(W.jsx)("img",{width:"45px",src:it})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-2-agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),N||"repartir"!=x?"":Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-2-agenda",onClick:function(){return F(!0)},children:[Object(W.jsx)(l.a,{icon:d.q,style:{marginRight:"5px"}}),"Repartir"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return m("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-2-chasier",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),at("cashier")]})})]}),Object(W.jsxs)("h6",{className:"checkout-2-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:u})]})]})}),Object(W.jsxs)(ge.a,{show:L,onHide:function(){return F(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Repartir"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{style:{display:"flex"},children:Object(W.jsx)(Jt.a,{onDragEnd:function(e){p(We(e))},children:null===A||void 0===A?void 0:A.map((function(e,t){return Object(W.jsx)(Jt.c,{droppableId:null===t||void 0===t?void 0:t.toString(),children:function(n,c){return Object(W.jsxs)("div",Object(Y.a)(Object(Y.a)({ref:n.innerRef,style:(r=c.isDraggingOver,{background:r?"lightblue":"lightgrey",padding:8,width:250})},n.droppableProps),{},{children:[Object(W.jsx)("h6",{children:"personne ".concat(t+1)}),e.orderItems.map((function(e,t){var n;return Object(W.jsx)(Jt.b,{draggableId:null===(n=e.repatirId)||void 0===n?void 0:n.toString(),index:t,children:function(t,n){return Object(W.jsx)("div",Object(Y.a)(Object(Y.a)(Object(Y.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:(c=n.isDragging,r=t.draggableProps.style,Object(Y.a)({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:c?"lightgreen":"grey"},r)),children:Object(W.jsx)("div",{style:{display:"flex",justifyContent:"space-around"},children:e.name})}));var c,r}},e.repatirId)})),n.placeholder]}));var r}},t)}))})})}),Object(W.jsx)(ge.a.Footer,{children:Object(W.jsx)(b.a,{variant:"primary",onClick:function(){return function(){F(!1);var e=A.filter((function(e){return 0==e.amount})).length;p(Qe(y-e))}()},children:"Terminer"})})]}),Object(W.jsx)("div",{className:"co2",children:null===A||void 0===A?void 0:A.map((function(e){return Object(W.jsxs)("div",{className:"checkout2",children:[Object(W.jsx)(Xt,{order:e,ping:E}),e.amount>e.amountPaid?Object(W.jsx)(b.a,{variant:"success",className:"c2btn",onClick:function(){Be(e),ue(!0)},children:"Impay\xe9"}):Object(W.jsx)(b.a,{variant:"disabled",className:"c2btn",children:"Pay\xe9e"}),Object(W.jsx)(b.a,{onClick:function(){return function(e){_.a.post("http://192.168.1.166:5000/api/printorder",{order:Object(Y.a)(Object(Y.a)({},e),{},{message:ce}),user_id:et})}(e)},variant:"primary",className:"c2btn",children:"imprimer"})]})}))}),Object(W.jsxs)(ge.a,{show:de,onHide:function(){return ue(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"finaliser Commande"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{xs:"5",children:[Object(W.jsxs)(Xe.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(W.jsx)(Xe.a.Label,{children:"Paiement Re\xe7u"}),Object(W.jsx)(Xe.a.Control,{type:"number",placeholder:"0.00",value:Ee.amountPaid})]}),Object(W.jsx)("h6",{style:{marginTop:"1rem"},children:"Monnaie"}),Object(W.jsx)("h4",{style:{color:"red"},children:Object(W.jsx)("b",{children:Ee.amount})}),Object(W.jsxs)(Xe.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(W.jsxs)(Xe.a.Label,{children:[" ",Object(W.jsx)("b",{children:"Details de paiement"})," "]}),Object(W.jsx)("div",{style:{height:"150px",overflow:"auto"},children:null===Ee||void 0===Ee||null===(e=Ee.payments)||void 0===e?void 0:e.map((function(e){return Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)("h5",{children:e.type}),Object(W.jsxs)("h5",{children:[e.value,"\u20ac"]})]})}))})]})]}),Object(W.jsxs)(Ye.a,{xs:"5",children:[Object(W.jsxs)(Xe.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsx)(Xe.a.Label,{children:"Paiement total"}),Object(W.jsx)(Xe.a.Control,{type:"number",placeholder:"0.00",value:Ee.totalPrice})]}),Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsx)(Xe.a.Label,{children:"Methode de paiement"}),Object(W.jsxs)(Xe.a.Select,{"aria-label":"Default select example",onChange:function(e){return oe(e.target.value)},children:[Object(W.jsx)("option",{value:"espece",children:"Especes"}),Object(W.jsx)("option",{value:"carte bleu",children:"Carte bleu"}),Object(W.jsx)("option",{value:"ticket restaurant",children:"Ticket restaurant"}),Object(W.jsx)("option",{value:"cheque",children:"Cheque"}),Object(W.jsx)("option",{value:"Glovo",children:"Glovo"}),Object(W.jsx)("option",{value:"Just-Eat",children:"Just-Eat"}),Object(W.jsx)("option",{value:"Deliveroo",children:"Deliveroo"}),Object(W.jsx)("option",{value:"Uber Eats",children:"Uber Eats"})]})]})]}),Object(W.jsxs)(Xe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(W.jsx)(Xe.a.Label,{children:Object(W.jsx)("b",{children:"Total"})}),Object(W.jsx)(Xe.a.Control,{type:"number",placeholder:"0.00",value:z,onChange:function(e){return M(Number(e.target.value))}})]}),Object(W.jsx)(j.a,{theme:"hg-theme-default hg-layout-default myTheme5",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn3",buttons:"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return Ke.current=e},layoutName:"default",layout:{default:Ue},onChange:function(e){for(var t=0,n=0;n<e.length;n++){var c=e[n];if(","==c){if(++t>=2)break}else if(0==n&&","==c){t=2;break}}if(xe(e),t<2){if(xe(e),"pay"==Ae){var r=function(e,t){var n=Number(1111.11).toLocaleString(t).replace(/\d+/g,"").split("");return null===e?null:(1==n.length&&n.unshift(""),Oe(Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")).toString()),Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")))}(e,"fr");M(r),xe("")}else Ne(e),xe("");xe("")}else xe(""),"pay"==Ae?(M(0),Ke.current.setInput("0"),xe("")):(Ne(e),xe("")),xe("")},onKeyPress:function(e){"{bksp}"==e&&(Oe(he.slice(0,-1)),M(Number(z.toString().slice(0,-1))))}})]}),Object(W.jsxs)(Ye.a,{xs:"2",children:[Object(W.jsx)("h4",{children:"Cash"}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+.5),Oe((z+.5).toString())},children:["0.5 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+1),Oe((z+1).toString())},children:["1 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+2),Oe((z+2).toString())},children:["2 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+5),Oe((z+5).toString())},children:["5 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+10),Oe((z+10).toString())},children:["10 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+20),Oe((z+20).toString())},children:["20 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+50),Oe((z+50).toString())},children:["50 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(z+100),Oe((z+100).toString())},children:["100 ",ct("<i>".concat(rt,"</i>"))]}),Object(W.jsx)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem"},onClick:function(){M(Number(null===Ee||void 0===Ee?void 0:Ee.amount).toFixed(2))},children:"Payer Tout"}),Object(W.jsx)(b.a,{variant:"danger",style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(0),Oe((0).toString())},children:"Effacer"})]})]})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return ue(!1)},children:at("cancel")}),Se?Object(W.jsx)(b.a,{variant:"outline-danger",onClick:function(){var e,t;ue(!1),_.a.post("http://192.168.1.166:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},C),{},{message:ce,pay_method:ae,amount:z,amountPaid:V})}).then((function(n){_.a.post("http://192.168.1.166:5000/api/printFinalOrder",{user_id:et,order:Object(Y.a)(Object(Y.a)({},C),{},{nbrCouverts:_e,message:ce,pay_method:ae,amount:z/v,amountPaid:V,totalPrice:C.totalPrice/v}),type:x,part:v,pricepart:C.totalPrice/v}).then((function(e){})).catch((function(e){return console.log(e)})),J(0),ue(!0);for(var r=0;r<=v-1;r++)if(0==c.length){for(var i=[],o=0;o<=v-1;o++)i.push([]);r==Ee.client-1&&(i[r]=[{type:ae,value:z}],a(i))}else{var s=c;r==Ee.client-1&&(s[r]=[].concat(Object(te.a)(s[r]),[{type:ae,value:z}]),a(s))}var l=e.every((function(e){return 0===e}));0==e[t]?ue(!1):console.log("not paid yet"),l&&tt()})).catch((function(e){console.log(e)}))},children:"Accompte"}):Object(W.jsx)(b.a,{variant:"success",onClick:function(){return function(){Be(Object(Y.a)(Object(Y.a)({},Ee),{},{amountPaid:Ee.amountPaid+z,amount:(Ee.amount-z).toFixed(2),payments:[].concat(Object(te.a)(Ee.payments),[{type:ae,value:z}])})),p(qe(Object(Y.a)(Object(Y.a)({},Ee),{},{amountPaid:Ee.amountPaid+z,amount:(Ee.amount-z).toFixed(2),payments:[].concat(Object(te.a)(Ee.payments),[{type:ae,value:z}])}))),M(0);var e=Object(Y.a)(Object(Y.a)({},Ee),{},{amountPaid:Ee.amountPaid+z,amount:Ee.amount-z,payments:[].concat(Object(te.a)(Ee.payments),[{type:ae,value:z}]),nbrCouverts:_e,message:ce,pay_method:ae});if(e.amount<=e.amountPaid){var t=e.payments.map((function(e){return{amount:e.value,pay_method:e.type}}));ue(!1),_.a.post("http://192.168.1.166:5000/api/printFinalOrder",{user_id:et,order:Object(Y.a)(Object(Y.a)({},e),{},{payments:t}),type:"payertout"}).catch((function(e){return console.log(e)}))}}()},children:"Valider"})]})]})]})},$t=n.p+"static/media/borne.aac446c5.png",en=function(e){var t,n,c,a,l,d,u,j=e.order,b=e.thisDate,O=(e.ping,localStorage.getItem("address")),m=localStorage.getItem("user_id"),p=(Object(s.g)().table_id,localStorage.getItem("telephone")),x=Object(r.useState)(j),v=Object(o.a)(x,2),f=v[0],g=v[1];console.log("toShowOrder",f);Object(h.d)((function(e){return e.order.checkoutData}));var A=localStorage.getItem("currency"),y=Object(r.useState)(!0),C=Object(o.a)(y,2),N=(C[0],C[1],Object(r.useState)({})),k=Object(o.a)(N,2),w=k[0],S=k[1],I=Object(h.d)((function(e){return e.data.orderHistory})),T=null===I||void 0===I?void 0:I.filter((function(e){return"rejected"==e.status}));console.log("annuleshistory",T),Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getRestaurantData",{user_id:m}).then((function(e){S(e.data)})).catch((function(e){console.log(e)}))}),[f]),Object(r.useEffect)((function(){g(j)}),[j]);P=(null===f||void 0===f?void 0:f.tvas)||[],E="perc",P.reduce((function(e,t){return(e[t[E]]=e[t[E]]||[]).push(t.value),e}),{});var P,E,B=!1;j.orderItems;if(null===(t=j.orderItems)||void 0===t||t.forEach((function(e){1==e.is_alcool&&(B=!0)})),1==B)20;else switch(void 0==j.orderType?j.order_type:j.orderType){case"sur place":default:10;break;case"emporter":case"livraison":5.5}var D=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})};return Object(W.jsx)(X.a,{fluid:!0,children:Object(W.jsx)("div",{className:"ticket",children:Object(W.jsxs)("div",{className:"ticket_container",children:[Object(W.jsx)("h3",{style:{marginTop:"0.5rem"},children:Object(W.jsx)("b",{children:"Ticket d'annulation"})}),Object(W.jsxs)("p",{children:[w.name," ",Object(W.jsx)("br",{}),O||"-"+p||""," ",Object(W.jsx)("br",{}),"tel: ",w.telephone]}),Object(W.jsx)("h1",{children:Object(W.jsx)("b",{style:{fontSize:"56px"},children:null===f||void 0===f?void 0:f.order_id})}),Object(W.jsxs)("div",{className:"ticket_item",style:{flexWrap:"wrap"},children:[Object(W.jsxs)("p",{children:["Client :",f.customer_name]}),Object(W.jsxs)("p",{children:["Type :",f.orderType]}),Object(W.jsxs)("p",{children:["Numero :",f.customer_tel]}),Object(W.jsxs)("p",{children:["Adresse:",f.customer_adress]})]}),Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),f.orderItems&&f.orderItems.map((function(e,t){var n,c;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:"ticket_item",children:[Object(W.jsx)("p",{children:t+1+"-"+(null===e||void 0===e?void 0:e.name)}),Object(W.jsxs)("div",{style:{display:"flex",width:"30%",justifyContent:"space-evenly"},children:[Object(W.jsx)("p",{}),Object(W.jsxs)("p",{children:[" ",void 0==(null===e||void 0===e?void 0:e.qt)?e.quantity:e.qt+"x","  ".concat(null===e||void 0===e?void 0:e.price.toFixed(2)," ")," ",D("<i>".concat(A,"</i>"))]})]})]}),null!==e&&void 0!==e&&e.stepItems&&Object.keys(e.stepItems).length?Object(W.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:Object.keys(e.stepItems).map((function(t){return e.stepItems[t].map((function(e){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}))}):(null===e||void 0===e?void 0:e.steps)!=[]?Object(W.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:null===(n=e.steps)||void 0===n?void 0:n.map((function(e){return Object(W.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}):"",(null===e||void 0===e?void 0:e.extras)!=[]?null===e||void 0===e||null===(c=e.extras)||void 0===c?void 0:c.map((function(e){return e.default_quantity>0?Object(W.jsxs)("div",{className:"ticket_extra",children:[Object(W.jsxs)("p",{children:["+ ",e.title]}),Object(W.jsxs)("div",{style:{display:"flex",width:"30%",justifyContent:"space-evenly"},children:[" ",Object(W.jsx)("p",{children:e.default_quantity+"x"}),Object(W.jsxs)("p",{children:["  ".concat(e.price.toFixed(2)," "),D("<i>".concat(A,"</i>"))]})]})]}):""})):""]})})),Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),Object(W.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(W.jsx)("p",{children:"Total HT : "}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsx)("p",{})})]}),Object(W.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(W.jsx)("p",{children:"Total TTC : "}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[null===f||void 0===f?void 0:f.totalPrice,D("<i>".concat(A,"</i>"))]})})]}),(null===f||void 0===f||null===(n=f.paymentsInDb)||void 0===n?void 0:n.length)>0&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),null===f||void 0===f||null===(c=f.paymentsInDb)||void 0===c?void 0:c.map((function(e){return Object(W.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(W.jsxs)("p",{children:["Pay\xe9(",e.pay_method,")"]}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[e.amount.toFixed(2),D("<i>".concat(A,"</i>"))]})})]})})),Object(W.jsx)("div",{className:"ticket_item ticket_last",children:(null===f||void 0===f||null===(a=f.paymentsInDb)||void 0===a?void 0:a.reduce((function(e,t){return e+t.amount}),0))-(null===f||void 0===f?void 0:f.totalPrice)>0?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{children:"Rendre monnaie"}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[null===(l=(null===f||void 0===f||null===(d=f.paymentsInDb)||void 0===d?void 0:d.reduce((function(e,t){return e+t.amount}),0))-(null===f||void 0===f?void 0:f.totalPrice))||void 0===l?void 0:l.toFixed(2),D("<i>".concat(A,"</i>"))]})})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{children:"Reste a payer"}),Object(W.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(W.jsxs)("p",{children:[Math.abs(((null===f||void 0===f||null===(u=f.paymentsInDb)||void 0===u?void 0:u.reduce((function(e,t){return e+t.amount}),0))-(null===f||void 0===f?void 0:f.totalPrice)).toFixed(2)),D("<i>".concat(A,"</i>"))]})})]})})]}),Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:null!==f&&void 0!==f&&f.part&&"partager"==(null===f||void 0===f?void 0:f.type)?Object(W.jsxs)("p",{style:{display:"flex"},children:["Votre part pour 1/".concat(null===f||void 0===f?void 0:f.part," personnes est : ").concat(((null===f||void 0===f?void 0:f.totalPrice)/f.part).toFixed(2),"\n              "),D("<i>".concat(A,"</i>"))]}):""})}),Object(W.jsx)("p",{children:b}),Object(W.jsx)("img",{src:"https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=".concat(null===f||void 0===f?void 0:f.order_id,"&choe=UTF-8+"),width:"40%"}),Object(W.jsxs)("p",{children:["Scanner le numero de Commande ",null===f||void 0===f?void 0:f.order_id]})]})})})},tn=(n(661),n.p+"static/media/updateorder.37f478bf.wav"),nn=n.p+"static/media/born-sound.8be7451a.mp3",cn=(Ve.b.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET),function(){var e,t,n,c,a,u=Object(r.useState)(new Audio(nn)),j=Object(o.a)(u,2),O=(j[0],j[1],localStorage.getItem("username")||""),m=Object(h.d)((function(e){return e.data.tables})),p=Object(r.useState)(!1),x=Object(o.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)({}),A=Object(o.a)(g,2),y=A[0],C=A[1];console.log("selectedOrder",y);var N=Object(h.d)((function(e){return e.data.tva_mode})),k=Object(r.useState)(0),w=Object(o.a)(k,2),S=w[0],I=w[1];console.log("tichetannu",S);var T=Object(r.useState)(0),P=Object(o.a)(T,2),E=(P[0],P[1]),B=Object(r.useState)([]),D=Object(o.a)(B,2),L=D[0],F=D[1],R=localStorage.getItem("user_id"),H=new Date,z=H.toISOString().substring(0,10),Q=H.getHours()+":"+H.getMinutes();console.log(z,Q);Object(h.c)();var M=H.getTime();console.log(M);var G=Object(s.g)().type,K=q().t,V=Object(s.f)(),J=Object(h.d)((function(e){return e.data.orderHistory}))||[],$=Object(h.d)((function(e){return e.order.checkoutData}));console.log("za",$);var ne=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},ce=localStorage.getItem("currency"),re=function(e){var t=e.e;return console.log(t),m.find((function(e){return e.id==t}))},ie=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),V("/")},ae=function(e){V("/menu/"+e)},oe=function(e){var t=e.order,n=Qt.a.clone(t);(n=Object(Y.a)(Object(Y.a)({},n),{},{order_id:n.id,taxPrice:n.tva,totalPrice:n.price})).orderItems=n.orderItems.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{qt:e.quantity})})),C(n),f(!0)};Object(r.useEffect)((function(){var e,t=Qt.a.clone((null===y||void 0===y?void 0:y.orderItems)||[{}]);console.log("salaaam",t),F(t),null===(e=y.orderItems)||void 0===e||e.map((function(e){if(1==e.is_alcool){var t=N.find((function(e){return"alcool"==e.nom})).valeur;console.log(t),E(t)}}))}),[y]);var se=function(){var e=0,t=0,n=[];return L.map((function(c){e+=c.price,t+=c.tva,n.push({value:c.tva,perc:c.tva/c.price*100})})),{tot:e,tva:t,tvas:n}},le=Object(r.useState)(new Audio(tn)),de=Object(o.a)(le,2);de[0],de[1];return Object(W.jsxs)("div",{className:"main_bg",children:[Object(W.jsx)(Z.a,{variant:"warning",className:"navbar",children:Object(W.jsxs)(X.a,{className:"history-navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){return V("/main")},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return V("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),K("cashier")]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return ie()},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(W.jsx)(l.a,{icon:d.G,style:{marginRight:"5px"}}),K("disconnect")]})})]}),Object(W.jsxs)("h6",{className:"server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:O}),Object(W.jsx)(l.a,{onClick:function(){return ie()},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(W.jsxs)(Ye.a,{style:{backgroundColor:"white"},fluid:!0,children:[Object(W.jsxs)(fe.a,{hover:!0,className:"ttt",children:[Object(W.jsx)("thead",{className:"tbds",children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"#"}),Object(W.jsx)("th",{children:"Type"}),Object(W.jsx)("th",{children:"Table"}),Object(W.jsx)("th",{children:"date"}),Object(W.jsx)("th",{children:"order"}),Object(W.jsx)("th",{children:"Prix"}),"all"==G?Object(W.jsx)("th",{children:"Reglement"}):"","encours"==G?Object(W.jsx)("th",{children:"statut"}):"",Object(W.jsx)("th",{children:"Paiements "})]})}),Object(W.jsx)("tbody",{className:"scro",children:"encours"==G?null===$||void 0===$||null===(e=$.slice())||void 0===e||null===(t=e.sort((function(e,t){return t.id-e.id})))||void 0===t?void 0:t.filter((function(e){return("pending"==e.status||"cooking"==e.status||"ready"==e.status)&&e.date==z})).map((function(e,t){var n,c,r=!1;e.orderItems;if(null===e||void 0===e||null===(n=e.orderItems)||void 0===n||n.forEach((function(e){1==e.is_alcool&&(r=!0)})),1==r)20;else switch(e.orderType){case"sur place":case"sur place":default:10;break;case"emporter":case"livraison":5.5}return Object(W.jsxs)("tr",{onClick:function(){oe({order:e}),I(0)},children:[Object(W.jsx)("td",{children:"pending"==e.status?Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.q,color:"#42d4cb",onClick:function(){return ae(void 0==e.order_id?e.id:e.order_id)}}),Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return V("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):"cooking"==e.status?Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.M,color:"#42d4cb"}),Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return V("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):"ready"==e.status?Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(W.jsx)(l.a,{icon:d.m,color:"green "}),Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return V("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):Object(W.jsx)(l.a,{icon:d.m,color:"green "})}),Object(W.jsxs)("td",{children:[void 0==(null===e||void 0===e?void 0:e.orderType)?"de borne":e.orderType,"sur place"==e.orderType?Object(W.jsx)("img",{src:dt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.orderType?Object(W.jsx)("img",{src:st,width:32,height:32,style:{marginLeft:"0.5rem"}}):"livraison"==e.orderType?Object(W.jsx)("img",{src:ot,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(W.jsx)("img",{src:$t,width:40,height:40,style:{marginLeft:"0.5rem"}})]}),Object(W.jsxs)("td",{children:["Table : ",null===(c=re({e:e.table_number}))||void 0===c?void 0:c.numero]}),Object(W.jsx)("td",{children:e.date+"-"+e.time}),Object(W.jsx)("td",{children:"#"+(void 0==e.order_id?e.id:e.order_id)}),Object(W.jsx)("td",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"red"},children:[void 0==e.totalPrice?e.price:e.totalPrice," ",ne("<i>".concat(ce,"</i>"))]})}),Object(W.jsx)("td",{children:"pending"==e.status?Object(W.jsx)("b",{children:"En attente"}):"cooking"==e.status?Object(W.jsx)("b",{style:{color:"orange"},children:" En pr\xe9paration"}):Object(W.jsx)("b",{style:{color:"green"},children:" Pr\xeate"})}),Object(W.jsx)("td",{children:Object(W.jsx)("b",{children:"En cours"})})]})})):"annules"==G?null===$||void 0===$||null===(n=$.slice())||void 0===n||null===(c=n.sort((function(e,t){return t.id-e.id})))||void 0===c?void 0:c.filter((function(e){return"avenir"==G?e.date>z:"rejected"==e.status&&e.date==z})).map((function(e,t){var n,c=!1;e.orderItems;if(e.orderItems.forEach((function(e){1==e.is_alcool&&(c=!0)})),1==c)20;else if("sur place"===e.orderType)10;else 5.5;return Object(W.jsxs)("tr",{onClick:function(){!function(e){var t=e.order,n=Qt.a.clone(t);(n=Object(Y.a)({},n)).orderItems=n.orderItems.map((function(e){return Object(Y.a)({},e)})),C(n),f(!0)}({order:e}),I(1)},children:[Object(W.jsx)("td",{children:"pending"==e.status?Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.q,color:"#42d4cb",onClick:function(){return ae(void 0==e.order_id?e.id:e.order_id)}}),Object(W.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return V("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):Object(W.jsx)(l.a,{icon:d.I,color:"red"})}),Object(W.jsxs)("td",{children:[e.orderType,"sur place"==e.orderType?Object(W.jsx)("img",{src:dt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.orderType?Object(W.jsx)("img",{src:st,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(W.jsx)("img",{src:ot,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(W.jsxs)("td",{children:["Table : ",null===(n=re({e:e.table_number}))||void 0===n?void 0:n.numero]}),Object(W.jsx)("td",{children:e.date+"-"+e.time}),Object(W.jsx)("td",{children:"#"+(void 0==e.order_id?e.id:e.order_id)}),Object(W.jsx)("td",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"red"},children:[void 0==e.totalPrice?e.price:e.totalPrice," ",ne("<i>".concat(ce,"</i>"))]})}),Object(W.jsx)("td",{children:Object(W.jsx)("b",{children:"Annuler"})})]})})):"avenir"==G?"":null===J||void 0===J||null===(a=J.slice())||void 0===a?void 0:a.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.paymentsInDb&&e.paymentsInDb.length>0})).map((function(e,t){var n,c=!1;e.orderItems;if(e.orderItems.forEach((function(e){1==e.is_alcool&&(c=!0)})),1==c)20;else switch(void 0==e.orderType?e.order_type:e.orderType){case"sur place":default:10;break;case"emporter":case"livraison":5.5}return Object(W.jsxs)("tr",{onClick:function(){oe({order:e}),I(0)},children:[Object(W.jsx)("td",{children:1==e.source?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(l.a,{icon:d.t,color:"blue",style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:"Enligne"})]}):Object(W.jsx)(l.a,{icon:d.m,color:"green"})}),Object(W.jsxs)("td",{style:{display:"flex"},children:[e.order_type,"sur place"==e.order_type?Object(W.jsx)("img",{src:dt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.order_type?Object(W.jsx)("img",{src:st,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(W.jsx)("img",{src:ot,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(W.jsxs)("td",{children:["Table :"," ",(null===(n=re({e:e.table_number}))||void 0===n?void 0:n.numero)||"N/A"]}),Object(W.jsx)("td",{children:e.date+"-"+e.time}),Object(W.jsx)("td",{children:"#"+e.id}),Object(W.jsx)("td",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[3!=e.source?e.price.toFixed(2):e.price," ",ne("<i>".concat(ce,"</i>"))]})}),Object(W.jsx)("td",{children:Object(W.jsx)("b",{style:{display:"flex",color:"#ff6b6b"},children:e.how_paid})}),Object(W.jsx)("td",{children:Object(te.a)(new Set(e.paymentsInDb.map((function(e){return e.pay_method})))).map((function(e){return Object(W.jsxs)("b",{children:[e,"-"]})}))})]})}))})]}),v&&Object(W.jsxs)("div",{className:"preview",children:[Object(W.jsx)(l.a,{onClick:function(){return f(!1)},icon:d.I,size:"2x",style:{position:"absolute",right:"5px"}}),Object(W.jsx)("div",{className:"scr",children:0==S?Object(W.jsx)(Xt,{order:y}):Object(W.jsx)(en,{order:y})}),Object(W.jsx)(b.a,{onClick:function(){f(!1);var e,t,n={from_kiosk:!1,table:(null===y||void 0===y?void 0:y.table_number)||"",client_id:(null===y||void 0===y?void 0:y.customer_id)||0,order_id:y.id,message:y.message||"aucune",customer_name:(null===y||void 0===y?void 0:y.customer_name)||"",customer_company:(null===y||void 0===y?void 0:y.customer_company)||"",code1:(null===y||void 0===y?void 0:y.code1)||"",code2:(null===y||void 0===y?void 0:y.code2)||"",interphone:(null===y||void 0===y?void 0:y.interphone)||"",etage:(null===y||void 0===y?void 0:y.etage)||"",table_number:(null===y||void 0===y?void 0:y.table_number)||0,customer_tel:(null===y||void 0===y?void 0:y.customer_tel)||"",customer_adress:null===y||void 0===y?void 0:y.customer_adress,status:null===y||void 0===y?void 0:y.status,orderType:null===y||void 0===y?void 0:y.order_type,paymentType:null===y||void 0===y?void 0:y.pay_method,totalPrice:null===y||void 0===y?void 0:y.price,taxPrice:null===y||void 0===y?void 0:y.tva,tvas:se().tvas,orderItems:[],date:null===y||void 0===y?void 0:y.date,time:null===y||void 0===y?void 0:y.time};console.log(se().tvas),L.map((function(e){n.orderItems.push(Object(Y.a)(Object(Y.a)({},e),{},{price:e.price,tva:e.tva}))})),_.a.post("http://192.168.1.166:5000/api/printOrder",{kitchen:!1,user_id:R,order:Object(Y.a)(Object(Y.a)({new:!1},n),{},{tvas:(e=se().tvas,t="perc",null===e||void 0===e?void 0:e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n.value),e}),{})),Date:new Date,nbrCouverts:1})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},variant:"danger",style:{height:"50px",width:"100%",bottom:"0",position:"absolute"},children:"Imprimer"})]})]}),Object(W.jsx)(tt,{})]})}),rn=function(){var e,t,n,c=localStorage.getItem("username")||"",a=localStorage.getItem("user_id"),u=Object(h.d)((function(e){return e.data.clients})),j=Object(h.d)((function(e){return e.data.orderHistory}))||[],O=Object(h.d)((function(e){return e.data.tables})),m=Object(r.useState)({}),p=Object(o.a)(m,2),x=p[0],v=p[1],f=Object(r.useState)(!1),g=Object(o.a)(f,2),A=g[0],y=g[1],C=Object(r.useState)(!1),N=Object(o.a)(C,2),k=N[0],w=N[1],S=Object(r.useState)(""),I=Object(o.a)(S,2),T=I[0],P=I[1],E=Object(s.g)(),B=Object(s.f)(),D=E.id,L=q().t,F=Object(h.c)();Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getclients",{user_id:a}).then((function(e){F(ue({clients:e.data.clients}))}))}),[k]);var R=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),B("/")},H=localStorage.getItem("currency"),z=function(e){var t=e.e;return console.log(t),O.find((function(e){return e.id==t}))};return Object(W.jsxs)("div",{className:"navbar",children:[Object(W.jsx)(Z.a,{style:{height:"60px"},variant:"warning",children:Object(W.jsxs)(X.a,{className:"history-navbar",children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsxs)(U.a,{className:"ms-auto",children:[Object(W.jsx)(U.a.Link,{onClick:function(){return B("/main")},children:Object(W.jsx)("img",{width:"45px",src:it,className:"table-icon"})}),Object(W.jsx)(U.a.Link,{children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(W.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return B("/cloture")},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(W.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),L("cashier")]})}),Object(W.jsx)(U.a.Link,{onClick:function(){return R()},children:Object(W.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(W.jsx)(l.a,{icon:d.G,style:{marginRight:"5px"}}),L("disconnect")]})})]}),Object(W.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:c}),Object(W.jsx)(l.a,{onClick:function(){return R()},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(W.jsxs)("div",{className:"client-search",children:[Object(W.jsx)("label",{children:Object(W.jsx)(l.a,{icon:d.E})}),Object(W.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return P(e.target.value)}})]})]})}),Object(W.jsx)(X.a,{style:{backgroundColor:"white"},fluid:!0,children:Object(W.jsxs)(fe.a,{hover:!0,className:"ttt",children:[Object(W.jsx)("thead",{className:"tbds",children:D?Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"#"}),Object(W.jsx)("th",{children:"Type"}),Object(W.jsx)("th",{children:"Table"}),Object(W.jsx)("th",{children:"date"}),Object(W.jsx)("th",{children:"order"}),Object(W.jsx)("th",{children:"Prix"}),Object(W.jsx)("th",{children:"Paiement "})]}):Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"#"}),Object(W.jsx)("th",{children:"Nom/Prenom"}),Object(W.jsx)("th",{children:"Telephone"}),Object(W.jsx)("th",{children:"Email"}),Object(W.jsx)("th",{children:"Adresse"}),Object(W.jsx)("th",{children:"Ville"}),Object(W.jsx)("th",{children:"Code postal"})]})}),Object(W.jsx)("tbody",{className:"scro",children:D?null===j||void 0===j||null===(e=j.slice())||void 0===e?void 0:e.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.customer_id==D})).map((function(e,t){var n,c;return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:Object(W.jsx)(l.a,{icon:d.m,color:"green"})}),Object(W.jsxs)("td",{style:{display:"flex"},children:[e.order_type,"sur place"==e.order_type?Object(W.jsx)("img",{src:dt,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(W.jsx)("img",{src:ot,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(W.jsxs)("td",{children:["Table :"," ",(null===(n=z({e:e.table_number}))||void 0===n?void 0:n.numero)||"N/A"]}),Object(W.jsx)("td",{children:e.date+"-"+e.time}),Object(W.jsx)("td",{children:"#"+e.id}),Object(W.jsx)("td",{children:Object(W.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price," ",(c="<i>".concat(H,"</i>"),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))]})}),Object(W.jsxs)("td",{children:[Object(W.jsx)("b",{children:"espece"==e.pay_method?"Especes":"Carte Bancaire"==e.pay_method||1==e.pay_method?"Carte Bancaire":"Especes"}),"espece"==e.pay_method||2==e.pay_method?Object(W.jsx)("img",{src:lt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"Carte Bancaire"==e.pay_method||1==e.pay_method?Object(W.jsx)("img",{src:at,width:32,height:32,style:{marginLeft:"0.5rem"}}):""]})]})})):u.filter((function(e){return e.nom_prenom.toLowerCase().includes(T.toLowerCase())||e.telephone.includes(T)})).map((function(e,t){return Object(W.jsxs)("tr",{className:"client-tr",children:[Object(W.jsx)("td",{children:Object(W.jsx)(l.a,{icon:d.q,color:"#ff6b6b",size:"2x",onClick:function(){v(e),console.log(e),y(!0)}})}),Object(W.jsx)("td",{onClick:function(){return B("/clients/"+e.id)},children:e.nom_prenom||"N/A"}),Object(W.jsx)("td",{children:e.telephone||"N/A"}),Object(W.jsx)("td",{children:e.email||"N/A"}),Object(W.jsx)("td",{children:e.adresse||"N/A"}),Object(W.jsx)("td",{children:e.ville||"N/A"}),Object(W.jsx)("td",{children:e.code_postal||"N/A"})]})}))})]})}),Object(W.jsxs)(ge.a,{show:A,onHide:function(){return y(!1)},children:[Object(W.jsx)(ge.a.Header,{closeButton:!0,children:Object(W.jsx)(ge.a.Title,{children:"Client"})}),Object(W.jsx)(ge.a.Body,{children:Object(W.jsx)("div",{children:Object(W.jsxs)(Xe.a,{auto:!0,children:[Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsx)(Je.a,{children:Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.nom_prenom,type:"text",placeholder:"nom/prenom",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{nom_prenom:e.target.value}))}})})})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsxs)(Ye.a,{children:[(null===(t=x.telephone)||void 0===t?void 0:t.length)>0&&(null===(n=x.telephone)||void 0===n?void 0:n.length)<10?Object(W.jsx)(Ze.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(W.jsx)(Xe.a.Control,{value:x.telephone,type:"tel",placeholder:"telephone",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{telephone:e.target.value}))}})]}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.email,type:"email",placeholder:"Email",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{email:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.adresse,as:"textarea",type:"text",placeholder:"adresse",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{adresse:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.societe,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{societe:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.code_1,type:"text",placeholder:"code 1",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_1:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.code_2,type:"text",placeholder:"code 2",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_2:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:x.ville,type:"text",placeholder:"Ville",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{ville:e.target.value}))}})})]})}),Object(W.jsx)(Xe.a.Group,{className:"mb-3",children:Object(W.jsxs)(Je.a,{children:[Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.interphone,type:"text",placeholder:"interphone",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{interphone:e.target.value}))}})}),Object(W.jsx)(Ye.a,{children:Object(W.jsx)(Xe.a.Control,{value:x.etage,type:"text",placeholder:"etage",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{etage:e.target.value}))}})}),Object(W.jsx)(Ye.a,{xs:"6",children:Object(W.jsx)(Xe.a.Control,{value:x.code_postal,type:"postal",placeholder:"Code postal",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_postal:e.target.value}))}})})]})})]})})}),Object(W.jsxs)(ge.a.Footer,{children:[Object(W.jsx)(b.a,{variant:"secondary",onClick:function(){return y(!1)},children:"Annuler"}),Object(W.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"primary",onClick:function(){y(!1),_.a.post("http://192.168.1.166:5000/api/updateClient",{client_id:x.id,client:x}).then((function(e){return w(!k)})).catch((function(e){return console.log(e)}))},children:"Terminer"})]})]}),Object(W.jsx)(tt,{})]})},an=function(){var e=Object(h.c)(),t=Object(s.f)(),n=localStorage.getItem("username")||"";return Object(W.jsxs)("div",{children:[Object(W.jsx)(Z.a,{style:{backgroundColor:"#ff6b6b",height:"70px"},variant:"warning",children:Object(W.jsxs)(X.a,{children:[Object(W.jsx)(Z.a.Brand,{children:Object(W.jsx)("div",{class:"logo-container",children:Object(W.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(W.jsx)(U.a,{className:"ms-auto",children:Object(W.jsx)(U.a.Link,{onClick:function(){t("/main"),e(Ie())},children:Object(W.jsx)("img",{width:"45px",src:it})})}),Object(W.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(W.jsx)("img",{src:nt,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(W.jsx)("b",{children:n}),Object(W.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void t("/")},size:"2x",icon:d.G,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(W.jsx)("div",{id:"calendar",style:{height:"800px"}})]})},on=n(286),sn=n.n(on),ln=n(400),dn=n(145),un=n.n(dn),jn=n(410),bn=n(408),hn=n(764),On=n(772),mn=n(404),pn=n.n(mn),xn=function(){var e,t,n,c,a,s,l,d,u,j,O=Object(h.d)((function(e){return e.data.dataZ})),x=Object(r.useState)(""),v=Object(o.a)(x,2),f=v[0],g=v[1],A=Object(r.useState)(0),y=Object(o.a)(A,2),C=(y[0],y[1],Object(r.useState)({})),N=Object(o.a)(C,2),k=N[0],w=N[1],S=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t,n,c,r,i,a;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ln.a("portrait","pt","a4"),e.next=3,sn()(document.querySelector("#pdf"));case 3:n=e.sent,c=n.toDataURL("image/png"),r=t.getImageProperties(c),i=t.internal.pageSize.getWidth(),a=r.height*i/r.width,t.addImage(c,"PNG",0,0,i,a),t.save("Zcaisse.pdf");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=i.a.useState(un()("2014-08-18T21:11:54")),T=Object(o.a)(I,2),P=T[0],E=T[1],B=Object(r.useState)(!1),D=Object(o.a)(B,2),L=D[0],F=D[1],R=localStorage.getItem("user_id")||"",H=Object(r.useState)(!1),q=Object(o.a)(H,2),z=(q[0],q[1],Object(h.c)()),Q=Object(r.useState)({username:"",password:""}),M=Object(o.a)(Q,2),G=M[0],K=M[1];return Object(r.useEffect)((function(){_.a.post("http://192.168.1.166:5000/api/getHistoriqueZcaisse",{user_id:R}).then((function(e){return z(Oe({dataZ:e.data.allHistorique}))})).catch((function(e){return console.log(e)})),console.log(O)}),[]),Object(W.jsxs)("div",{className:"zcaisse_body",children:[Object(W.jsxs)(ge.a,{show:L,onHide:function(){return F(!1)},className:"modal_ZZ",children:[Object(W.jsx)("div",{className:"head_zcaisse",children:Object(W.jsx)("h1",{children:"Zcaisse"})}),Object(W.jsx)(ge.a.Body,{className:"modals",children:Object(W.jsx)("div",{className:"pdf_Z",id:"pdf",children:Object(W.jsx)("div",{style:{border:"solid 1px",padding:"1rem",backgroundColor:"white",width:"95%",height:"100%"},children:Object(W.jsxs)("div",{className:"text_body",children:[Object(W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItmes:"center",height:"4%"},children:Object(W.jsxs)("h5",{children:[k.ouverture,"/",k.fermeture]})}),0!=(null===(e=k.cancledOrders)||void 0===e?void 0:e.length)?Object(W.jsxs)("h5",{children:["Commandes Annul\xe9s","",":"]}):"",null===(t=k.cancledOrders)||void 0===t?void 0:t.map((function(e,t){return Object(W.jsxs)("div",{className:"cmd_annuler",children:[Object(W.jsxs)("h5",{children:["Annuler par ",e.rejectedFrom,":"]}),0!=k.cancledOrders.length?e.orderItems.map((function(e,t){return Object(W.jsxs)("div",{className:"item_annuler",children:[Object(W.jsx)("h5",{children:e.qt}),Object(W.jsx)("h5",{children:e.name})]},t)})):"",Object(W.jsx)("hr",{style:{width:"100%"}})]},t)})),0!=(null===(n=k.products)||void 0===n?void 0:n.length)?Object(W.jsxs)("h5",{children:["Liste Des Produits","",":"]}):"",null===(c=k.products)||void 0===c?void 0:c.map((function(e,t){return Object(W.jsx)("div",{children:Object(W.jsx)("div",{classNam:"prod_z",children:Object(W.jsxs)("h6",{children:["-",e.name]})})})})),Object(W.jsxs)("div",{children:[Object(W.jsx)("hr",{style:{width:"100%"}}),null===(a=k.pay_method)||void 0===a?void 0:a.map((function(e,t){return Object(W.jsx)("div",{children:Object(W.jsxs)("h5",{children:[e.name,":",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:e.qt})]})},t)})),Object(W.jsx)("hr",{style:{width:"100%"}}),Object(W.jsxs)("h5",{children:["Annuler:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:null===(s=k.cancledOrders)||void 0===s?void 0:s.length})]}),Object(W.jsxs)("h5",{children:["Commandes:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:k.commandes})]}),Object(W.jsxs)("h5",{children:["Ticket Moyen:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:k.clients})]}),Object(W.jsx)("hr",{style:{width:"100%"}}),Object(W.jsxs)("h5",{children:["De Borne:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:null===(l=k.ordersType)||void 0===l?void 0:l.borne})]}),Object(W.jsxs)("h5",{children:["Emporter:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:null===(d=k.ordersType)||void 0===d?void 0:d.emporter})]}),Object(W.jsxs)("h5",{children:["Sur Place:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:null===(u=k.ordersType)||void 0===u?void 0:u.surPlace})]}),Object(W.jsxs)("h5",{children:["Livraison:",Object(W.jsx)("b",{style:{marginLeft:"1rem"},children:null===(j=k.ordersType)||void 0===j?void 0:j.livraison})]}),Object(W.jsx)("hr",{style:{width:"100%"}}),Object(W.jsxs)("h5",{children:["Ticket Moyen:",Object(W.jsxs)("b",{style:{marginLeft:"1rem"},children:[k.ticket_moyen,"\xa3"]})]}),Object(W.jsxs)("h5",{children:["Total TTC:",Object(W.jsxs)("b",{style:{marginLeft:"1rem"},children:[k.ttc,"\xa3"]})]}),Object(W.jsxs)("h5",{children:["Total HT:",Object(W.jsxs)("b",{style:{marginLeft:"1rem"},children:[k.ht,"\xa3"]})]}),Object(W.jsx)("hr",{style:{width:"100%"}}),Object(W.jsxs)("h5",{children:["Fond Initial:",Object(W.jsxs)("b",{style:{marginLeft:"1rem"},children:[k.fond_initial,"\xa3"]})]}),Object(W.jsxs)("h5",{children:["Fond Final:",Object(W.jsxs)("b",{style:{marginLeft:"1rem"},children:[k.fond_final,"\xa3"]})]})]})]})})})}),Object(W.jsx)(b.a,{variant:"success",onClick:function(){return S()},children:"Telecharger PDF"})]}),Object(W.jsx)("div",{className:"Zcaisse_header",children:Object(W.jsx)("h1",{children:"Zcaisse Historiques"})}),Object(W.jsxs)("div",{className:"zcaisse_container",children:[Object(W.jsxs)("div",{className:"filter_z",children:[Object(W.jsx)(bn.a,{dateAdapter:jn.a,children:Object(W.jsx)(hn.a,{label:"Date Zcaisse",inputFormat:"MM/DD/YYYY",value:P,onChange:function(e){var t="";E(e),e.$M<10&&(t="0"+String(parseInt(e.$M)+1)),g(e.$y+"-"+t+"-"+e.$D),console.log("date selected",f),console.log(O[0].data.ouverture),console.log(P)},renderInput:function(e){return Object(W.jsx)(On.a,Object(Y.a)({},e))}})}),Object(W.jsx)(pn.a,{fontSize:"large",color:"inherit",className:"relo",onClick:function(){return _.a.post("http://192.168.1.166:5000/api/getHistoriqueZcaisse",{user_id:R}).then((function(e){return z(Oe({dataZ:e.data.allHistorique}))})).catch((function(e){return console.log(e)})),void console.log(O)}})]}),Object(W.jsx)("div",{className:"zCaisse",children:0!=O.length?null===O||void 0===O?void 0:O.filter((function(e){return e.data.ouverture.includes(f)})).map((function(e,t){return Object(W.jsxs)("div",{className:"history",children:[Object(W.jsx)("b",{children:e.id}),Object(W.jsx)("b",{children:e.data.ouverture}),Object(W.jsx)("b",{children:e.data.fermeture}),Object(W.jsx)("b",{children:Object(W.jsx)("button",{style:{backgroundColor:"#08C18A",color:"white"},onClick:function(){return t=e.data,console.log(t),F(!0),void w(t);var t},children:"Afficher"})}),Object(W.jsx)("b",{children:Object(W.jsx)("button",{style:{backgroundColor:"transparent",color:"#08C18A"},onClick:function(){return t=e.data,void _.a.post("http://192.168.1.166:5000/api/printzcaisse",{PrintData:t,user_id:R}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var t},children:"imprimer"})})]},t)})):""}),R?"":Object(W.jsx)("div",{className:"login_modal",children:Object(W.jsxs)("div",{className:"Login_zcaisse",children:[Object(W.jsx)("h2",{children:"Login"}),Object(W.jsx)("input",{type:"text",onChange:function(e){return K(Object(Y.a)(Object(Y.a)({},G),{},{username:e.target.value}))},placeholder:"Nom utilisateur"}),Object(W.jsx)("input",{type:"password",onChange:function(e){return K(Object(Y.a)(Object(Y.a)({},G),{},{password:e.target.value}))},placeholder:"Mot de passe"}),Object(W.jsx)("button",{onClick:function(){_.a.post("http://192.168.1.166:5000/api/initZcaisse",Object(Y.a)({},G)).then((function(e){localStorage.setItem("user_id",e.data.user.id),z(Oe({dataZ:e.data.history})),console.log(e.data),console.log(O)}))},children:"se connecter"})]})})]})]})},vn=Ve.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SOCKET);var fn=function(){var e=new Date,t=e.getHours()+":"+e.getMinutes();Object(r.useEffect)((function(){var e=setInterval((function(){console.log("kol d9i9a"),"11:55"==t&&Q.a.fire({icon:"success",title:"<h5 >w9yet</h5>",showConfirmButton:!1,timer:2500})}),6e4);return function(){return clearInterval(e)}}),[]),Object(r.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[]);var n=Object(r.useState)(new Audio(tn)),c=Object(o.a)(n,2),i=c[0],a=(c[1],Object(r.useState)(new Audio(nn))),l=Object(o.a)(a,2),d=(l[0],l[1],Object(h.c)()),u=localStorage.getItem("user_id");return vn.on("update".concat(u),(function(e){i.play(),"cooking"==e.status?Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"</span> en pr\xe9paration")+"</h5>",showConfirmButton:!1,timer:2500}):"ready"==e.status?Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"\u20ac</span> et pr\xe9te")+"</h5>",showConfirmButton:!1,timer:2500}):Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"\u20ac</span> a \xe9t\xe9 annul\xe9")+"</h5>",showConfirmButton:!1,timer:2500}),d(Be({order:e}))})),Object(W.jsx)("div",{className:"App",children:Object(W.jsxs)(s.c,{children:[Object(W.jsx)(s.a,{exact:!0,path:"/",element:Object(W.jsx)(J,{})}),Object(W.jsx)(s.a,{path:"/init",element:Object(W.jsx)(xe,{})}),Object(W.jsx)(s.a,{path:"/main",element:Object(W.jsx)(rt,{})}),Object(W.jsx)(s.a,{path:"/menu",element:Object(W.jsx)(kt,{})}),Object(W.jsx)(s.a,{path:"/menu/:order_id",element:Object(W.jsx)(kt,{})}),Object(W.jsx)(s.a,{path:"/caisse",element:Object(W.jsx)(Rt,{})}),Object(W.jsx)(s.a,{path:"/cloture",element:Object(W.jsx)(Vt,{})}),Object(W.jsx)(s.a,{path:"/calendar",element:Object(W.jsx)(an,{})}),Object(W.jsx)(s.a,{path:"/history/:type",element:Object(W.jsx)(cn,{})}),Object(W.jsx)(s.a,{path:"/clients",element:Object(W.jsx)(rn,{})}),Object(W.jsx)(s.a,{path:"/data/zcaisse",element:Object(W.jsx)(xn,{})}),Object(W.jsx)(s.a,{path:"/avoires",element:Object(W.jsx)(Ht,{})}),Object(W.jsx)(s.a,{path:"/backoffice",element:Object(W.jsx)(ht,{})}),Object(W.jsx)(s.a,{path:"/clients/:id",element:Object(W.jsx)(rn,{})}),Object(W.jsx)(s.a,{path:"/checkout2/:table_id/:type/:part",element:Object(W.jsx)(Yt,{})}),Object(W.jsx)(s.a,{path:"/checkout/:table_id",element:Object(W.jsx)(Ut,{})}),Object(W.jsx)(s.a,{path:"/test",element:Object(W.jsx)(Zt,{})})]})})},gn=(n(679),n(57)),An=n(100),yn=n(405),Cn=n.n(yn),_n=Object(gn.c)({auth:B,message:y,data:pe,order:Me,caisse:Et}),Nn={key:"root",version:1,storage:Cn.a},kn=Object(An.g)(Nn,_n),wn=Object(x.a)({reducer:kn,middleware:function(e){return e({serializableCheck:{ignoredActions:[An.a,An.f,An.b,An.c,An.d,An.e]}})}}),Sn=n(219),In=(n(682),n(683),n(406)),Tn=Object(An.h)(wn);Object(a.render)(Object(W.jsx)(h.a,{store:wn,children:Object(W.jsx)(Sn.a,{children:Object(W.jsx)(In.a,{loading:null,persistor:Tn,children:Object(W.jsx)(fn,{})})})}),document.getElementById("root"))}},[[684,1,2]]]);
//# sourceMappingURL=main.792af4a3.chunk.js.map